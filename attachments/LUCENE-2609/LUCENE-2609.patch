Index: solr/contrib/clustering/build.xml
===================================================================
--- solr/contrib/clustering/build.xml	(revision 1067185)
+++ solr/contrib/clustering/build.xml	(working copy)
@@ -42,7 +42,7 @@
     <pathelement path="${dest}/test-classes"/>
     <pathelement path="${java.class.path}"/>
     <pathelement location="${common-solr.dir}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${common-solr.dir}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${common-solr.dir}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <path refid="common.classpath"/>
     <!-- DistributedClusteringComponentTest uses Jetty -->
     <fileset dir="${solr-path}/example/lib">
Index: solr/contrib/extraction/build.xml
===================================================================
--- solr/contrib/extraction/build.xml	(revision 1067185)
+++ solr/contrib/extraction/build.xml	(working copy)
@@ -40,7 +40,7 @@
     <pathelement path="${dest}/classes" />
     <pathelement path="${dest}/test-classes" />
     <pathelement location="${solr-path}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${solr-path}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${solr-path}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <pathelement path="${java.class.path}"/>
   </path>
 
Index: solr/contrib/dataimporthandler/build.xml
===================================================================
--- solr/contrib/dataimporthandler/build.xml	(revision 1067185)
+++ solr/contrib/dataimporthandler/build.xml	(working copy)
@@ -56,7 +56,7 @@
 	  <pathelement path="target/classes" />
   	<pathelement path="target/test-classes" />
     <pathelement location="${solr-path}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${solr-path}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${solr-path}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <pathelement path="${java.class.path}"/>
   </path>
 
@@ -68,7 +68,7 @@
   	<pathelement path="target/test-classes" />
   	<pathelement path="target/extras/test-classes" />
     <pathelement location="${solr-path}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${solr-path}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${solr-path}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <pathelement path="${java.class.path}"/>
   </path>
 	
Index: solr/contrib/analysis-extras/build.xml
===================================================================
--- solr/contrib/analysis-extras/build.xml	(revision 1067185)
+++ solr/contrib/analysis-extras/build.xml	(working copy)
@@ -73,7 +73,7 @@
     <pathelement path="${dest}/test-classes"/>
     <pathelement path="${java.class.path}"/>
     <pathelement location="${common-solr.dir}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${common-solr.dir}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${common-solr.dir}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <path refid="common.classpath"/>
   </path>
 
Index: solr/contrib/uima/build.xml
===================================================================
--- solr/contrib/uima/build.xml	(revision 1067185)
+++ solr/contrib/uima/build.xml	(working copy)
@@ -41,7 +41,7 @@
     <pathelement path="${dest}/classes" />
     <pathelement path="${dest}/test-classes" />
     <pathelement location="${solr-path}/build/tests"/> <!-- include solr test code -->
-    <pathelement location="${solr-path}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${solr-path}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <pathelement path="${java.class.path}"/>
   </path>
 
Index: solr/build.xml
===================================================================
--- solr/build.xml	(revision 1067185)
+++ solr/build.xml	(working copy)
@@ -340,7 +340,7 @@
     <path refid="compile.classpath.solrj" />
     <pathelement location="${dest}/solr"/>
     <pathelement location="${dest}/solrj"/> <!-- include solrj -->
-    <pathelement location="${common-solr.dir}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${common-solr.dir}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
   </path>
 
   <path id="test.run.classpath">
@@ -348,7 +348,7 @@
     <pathelement location="${dest}/tests"/>
     <!-- include the solrj classpath and jetty files included in example -->
     <path refid="compile.classpath.solrj" />
-    <pathelement location="${common-solr.dir}/../lucene/build/classes/test" />  <!-- include some lucene test code -->
+    <pathelement location="${common-solr.dir}/../lucene/build/classes/test-framework" />  <!-- include some lucene test code -->
     <pathelement path="${java.class.path}"/>
   </path>
 
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1067185)
+++ lucene/common-build.xml	(working copy)
@@ -109,6 +109,7 @@
 
   <property name="src.dir" location="src/java"/>
   <property name="tests.src.dir" location="src/test"/>
+  <property name="tests-framework.src.dir" location="${common.dir}/src/test-framework"/>
   <property name="build.dir" location="build"/>
   <property name="dist.dir" location="dist"/>
   <property name="maven.dist.dir" location="dist/maven"/>
@@ -354,6 +355,8 @@
   <macrodef name="jarify" description="Builds a JAR file">
   	<attribute name="basedir" default="${build.dir}/classes/java"/>
   	<attribute name="destfile" default="${build.dir}/${final.name}.jar"/>
+  	<attribute name="title" default="Lucene Search Engine: ${ant.project.name}"/>
+    <attribute name="excludes" default="**/pom.xml"/>
     <element name="manifest-attributes" optional="yes"/>
   	<element name="metainf-includes" optional="yes"/>
     <sequential>
@@ -363,12 +366,13 @@
         <arg line="."/>
       </exec>
       
-      <build-manifest/>
+      <build-manifest title="@{title}"/>
     	
       <jar
         destfile="@{destfile}"
         basedir="@{basedir}"
-      	manifest="${manifest.file}">
+      	manifest="${manifest.file}"
+        excludes="@{excludes}">
         <manifest>
         	<manifest-attributes/>
         </manifest>
@@ -381,7 +385,12 @@
     </sequential>
   </macrodef>
 
-  <target name="compile-test" depends="compile-core">
+  <target name="compile-test-framework" depends="compile-core">
+  	<compile-test-macro srcdir="${tests-framework.src.dir}" destdir="${common.dir}/build/classes/test-framework"
+  						test.classpath="test.classpath"/>
+  </target>
+
+  <target name="compile-test" depends="compile-test-framework">
   	<compile-test-macro srcdir="${tests.src.dir}" destdir="${build.dir}/classes/test"
   						test.classpath="test.classpath"/>
   </target>
@@ -542,6 +551,9 @@
       <fileset dir="${src.dir}">
         <include name="org/apache/**/*.java" />
       </fileset>
+      <testsources dir="${tests-framework.src.dir}">
+        <include name="org/apache/**/*.java" />
+      </testsources>
       <testsources dir="${tests.src.dir}">
         <include name="org/apache/**/*.java" />
       </testsources>
@@ -572,6 +584,9 @@
     <fileset dir="contrib" id="clover.contrib.test.src.files">
       <include name="**/test/**/*.java"/>
     </fileset>
+    <fileset dir="${tests-framework.src.dir}" id="clover.test.src.files">
+      <include name="**/*.java" />
+    </fileset>
     <fileset dir="${tests.src.dir}" id="clover.test.src.files">
       <include name="**/*.java" />
     </fileset>
@@ -642,6 +657,7 @@
 	  description="runs the tasks over source and test files">
     <rat:report xmlns:rat="antlib:org.apache.rat.anttasks">
       <fileset dir="${src.dir}"/>
+      <fileset dir="${tests-framework.src.dir}"/>
       <fileset dir="${tests.src.dir}"/>
     </rat:report>
   </target>
Index: lucene/CHANGES.txt
===================================================================
--- lucene/CHANGES.txt	(revision 1067185)
+++ lucene/CHANGES.txt	(working copy)
@@ -642,6 +642,9 @@
 * LUCENE-2657: Switch from using Maven POM templates to full POMs when
   generating Maven artifacts (Steven Rowe)
 
+* LUCENE-2609: Added jar-test-framework Ant target which packages Lucene's
+  tests' framework classes. (Drew Farris, Grant Ingersoll, Shai Erera)
+
 Test Cases
 
 * LUCENE-2037 Allow Junit4 tests in our environment (Erick Erickson
Index: lucene/build.xml
===================================================================
--- lucene/build.xml	(revision 1067185)
+++ lucene/build.xml	(working copy)
@@ -17,7 +17,8 @@
     limitations under the License.
  -->
 
-<project name="core" default="default" basedir=".">
+<project name="core" default="default" basedir="." 
+         xmlns:artifact="antlib:org.apache.maven.artifact.ant">
 
   <property name="junit.includes" value="**/Test*.java"/>
 
@@ -37,12 +38,13 @@
   	<path refid="classpath"/>
     <path refid="junit-path"/>
     <path refid="ant-path"/>
+    <pathelement location="${build.dir}/classes/test-framework"/>
     <pathelement location="${build.dir}/classes/test"/>
   </path>
 
-
   <path id="junit.classpath">
     <path refid="junit-path"/>
+    <pathelement location="${build.dir}/classes/test-framework"/>
     <pathelement location="${build.dir}/classes/test"/>
     <pathelement location="${build.dir}/classes/java"/>
     <pathelement path="${java.class.path}"/>
@@ -158,7 +160,7 @@
   </target>
 
   <target name="javadocs" description="Generate javadoc" 
-          depends="javadocs-all, javadocs-core, javadocs-contrib">
+          depends="javadocs-all, javadocs-core, javadocs-contrib, javadocs-test-framework">
     <echo file="${javadoc.dir}/index.html" append="false">
 <![CDATA[<html><head><title>${Name} ${version} Javadoc Index</title></head>
 <body>
@@ -272,7 +274,7 @@
   <!-- ================================================================== -->
   <!--                                                                    -->
   <!-- ================================================================== -->
-  <target name="package" depends="jar-core, jar-core-test, javadocs, build-contrib, init-dist, changes-to-html"/>
+  <target name="package" depends="jar-core, jar-test-framework, javadocs, build-contrib, init-dist, changes-to-html"/>
 
   <target name="nightly" depends="test, package-tgz">
   </target>
@@ -402,7 +404,7 @@
 
   <target name="dist-all" depends="dist, dist-src"/>
 
-  <target name="generate-maven-artifacts" depends="maven.ant.tasks-check, package, jar-src, javadocs">
+  <target name="generate-maven-artifacts" depends="maven.ant.tasks-check, package, jar-src, jar-test-framework-src, javadocs">
     <sequential>
       <ant target="get-maven-poms" dir=".."/>
 
@@ -418,6 +420,22 @@
                   classifier="tests"/>
         </artifact-attachments>
       </m2-deploy>
+
+      <artifact:install-provider artifactId="wagon-ssh" version="1.0-beta-7"/>
+      <artifact:pom id="test-framework-pom" file="src/test-framework/pom.xml"/>
+      <artifact:deploy>
+        <attach file="${build.dir}/${final.name}-tests.jar" 
+                classifier="tests" />
+        <attach file="${build.dir}/${final.name}-tests-src.jar"
+                classifier="test-sources"/>
+        <attach file="${build.dir}/${final.name}-tests-javadoc.jar"
+                classifier="test-javadoc"/>
+        <remoteRepository url="${m2.repository.url}">
+          <authentication username="${m2.repository.username}" privateKey="${m2.repository.private.key}"/>
+        </remoteRepository>
+        <pom refid="test-framework-pom"/>
+      </artifact:deploy>
+
       <contrib-crawl target="dist-maven"/>
     </sequential>
   </target>
@@ -648,16 +666,27 @@
     <patch patchfile="${patch.file}" strip="0"/>
   </target>
 
-  <target name="jar-core-test" depends="compile-test">
-    <!-- load the list of test files into a property named core.test.files -->
-  	<property file="../dev-tools/testjar/testfiles" />
-    <!-- copy the files so that we can compile and include both .java and .class in the jar --> 
-    <copy todir="${build.dir}/testjar" >
-        <fileset dir="src/test" includes="${core.test.files}" />
-    </copy>
-  	<compile-test-macro srcdir="${build.dir}/testjar" destdir="${build.dir}/testjar"
-						test.classpath="test.classpath"/>
-    <jarify basedir="${build.dir}/testjar" destfile="${build.dir}/${final.name}-tests.jar"/>
+  <target name="jar-test-framework" depends="compile-test-framework">
+    <jarify basedir="${build.dir}/classes/test-framework" destfile="${build.dir}/${final.name}-tests.jar" title="Lucene Search Engine: Test Framework" />
   </target>
 
+  <target name="javadocs-test-framework">
+	<sequential>
+      <mkdir dir="${javadoc.dir}/test-framework"/>
+      <invoke-javadoc
+          destdir="${javadoc.dir}/test-framework"
+          title="${Name} ${version} Test Framework API">
+        <sources>
+          <packageset dir="src/test-framework"/>
+          <link href=""/>
+        </sources>
+      </invoke-javadoc>
+      <jarify basedir="${javadoc.dir}/test-framework" destfile="${build.dir}/${final.name}-tests-javadoc.jar" title="Lucene Search Engine: Test Framework"/>
+    </sequential>
+  </target>
+
+  <target name="jar-test-framework-src" depends="init">
+    <jarify basedir="${tests-framework.src.dir}" destfile="${build.dir}/${final.name}-tests-src.jar" title="Lucene Search Engine: Test Framework"/>
+  </target>
+
 </project>
Index: lucene/contrib/db/bdb-je/build.xml
===================================================================
--- lucene/contrib/db/bdb-je/build.xml	(revision 1067185)
+++ lucene/contrib/db/bdb-je/build.xml	(working copy)
@@ -39,13 +39,6 @@
 	
   <import file="../../contrib-build.xml" />
 
-  <path id="test.classpath">
-    <path refid="classpath"/>
-    <pathelement location="../../../build/classes/test/"/>
-    <path refid="junit-path"/>
-    <pathelement location="${build.dir}/classes/java"/>
-  </path>
-
   <target name="get-je-jar" unless="je.jar.exists">
     <mkdir dir="lib" />
     <get src="http://download.oracle.com/maven/com/sleepycat/je/${je.version}/je-${je.version}.jar"
Index: lucene/contrib/db/bdb/build.xml
===================================================================
--- lucene/contrib/db/bdb/build.xml	(revision 1067185)
+++ lucene/contrib/db/bdb/build.xml	(working copy)
@@ -39,13 +39,6 @@
 
   <import file="../../contrib-build.xml" />
 
-  <path id="test.classpath">
-    <path refid="classpath"/>
-    <pathelement location="../../../build/classes/test/"/>
-    <path refid="junit-path"/>
-    <pathelement location="${build.dir}/classes/java"/>
-  </path>
-
   <target name="get-db-jar" unless="db.jar.exists">
     <mkdir dir="lib" />
     <get src="http://downloads.osafoundation.org/db/db-${db.version}.jar"
Index: lucene/contrib/contrib-build.xml
===================================================================
--- lucene/contrib/contrib-build.xml	(revision 1067185)
+++ lucene/contrib/contrib-build.xml	(working copy)
@@ -40,6 +40,7 @@
   
   <path id="test.base.classpath">
     <path refid="classpath"/>
+    <pathelement location="${common.dir}/build/classes/test-framework"/>
     <pathelement location="${common.dir}/build/classes/test"/>
     <path refid="junit-path"/>
     <pathelement location="${build.dir}/classes/java"/>
@@ -50,7 +51,6 @@
   <path id="junit.classpath">
     <path refid="test.classpath"/>
     <pathelement location="${build.dir}/classes/test"/>
-    <pathelement location="${build.dir}/classes/java"/>
     <pathelement path="${java.class.path}"/>
   </path>
 
Index: lucene/contrib/analyzers/smartcn/build.xml
===================================================================
--- lucene/contrib/analyzers/smartcn/build.xml	(revision 1067185)
+++ lucene/contrib/analyzers/smartcn/build.xml	(working copy)
@@ -28,11 +28,5 @@
   <property name="maven.dist.dir" location="../../../dist/maven" />
 
   <import file="../../contrib-build.xml"/>
-	
-  <path id="test.classpath">
-    <path refid="classpath"/>
-    <pathelement location="../../../build/classes/test/"/>
-    <path refid="junit-path"/>
-    <pathelement location="${build.dir}/classes/java"/>
-  </path>	
+
 </project>
Index: lucene/contrib/analyzers/common/build.xml
===================================================================
--- lucene/contrib/analyzers/common/build.xml	(revision 1067185)
+++ lucene/contrib/analyzers/common/build.xml	(working copy)
@@ -28,13 +28,6 @@
   <property name="maven.dist.dir" location="../../../dist/maven" />
 
   <import file="../../contrib-build.xml"/>
-	
-  <path id="test.classpath">
-    <path refid="classpath"/>
-    <pathelement location="../../../build/classes/test/"/>
-    <path refid="junit-path"/>
-    <pathelement location="${build.dir}/classes/java"/>
-  </path>	
 
   <target name="compile-core" depends="jflex-notice, common.compile-core"/>
 
Index: lucene/contrib/analyzers/stempel/build.xml
===================================================================
--- lucene/contrib/analyzers/stempel/build.xml	(revision 1067185)
+++ lucene/contrib/analyzers/stempel/build.xml	(working copy)
@@ -28,11 +28,5 @@
   <property name="maven.dist.dir" location="../../../dist/maven" />
 
   <import file="../../contrib-build.xml"/>
-	
-  <path id="test.classpath">
-    <path refid="classpath"/>
-    <pathelement location="../../../build/classes/test/"/>
-    <path refid="junit-path"/>
-    <pathelement location="${build.dir}/classes/java"/>
-  </path>	
+
 </project>
Index: dev-tools/idea/lucene/lucene.iml
===================================================================
--- dev-tools/idea/lucene/lucene.iml	(revision 1067185)
+++ dev-tools/idea/lucene/lucene.iml	(working copy)
@@ -9,6 +9,7 @@
       <sourceFolder url="file://$MODULE_DIR$/src/demo" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/jsp" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/tools/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-framework" isTestSource="true" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
       <excludeFolder url="file://$MODULE_DIR$/build" />
     </content>
Index: dev-tools/eclipse/dot.classpath
===================================================================
--- dev-tools/eclipse/dot.classpath	(revision 1067185)
+++ dev-tools/eclipse/dot.classpath	(working copy)
@@ -1,6 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <classpath>
 	<classpathentry kind="src" path="lucene/src/java"/>
+	<classpathentry kind="src" path="lucene/src/test-framework"/>
 	<classpathentry kind="src" path="lucene/src/test"/>
         <classpathentry kind="src" path="lucene/contrib/analyzers/common/src/java"/>
         <classpathentry kind="src" path="lucene/contrib/analyzers/common/src/resources"/>
Index: dev-tools/maven/solr/contrib/clustering/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/clustering/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/clustering/pom.xml.template	(working copy)
@@ -61,7 +61,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/contrib/extraction/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/extraction/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/extraction/pom.xml.template	(working copy)
@@ -64,7 +64,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template	(working copy)
@@ -61,7 +61,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template	(working copy)
@@ -68,7 +68,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template	(working copy)
@@ -76,7 +76,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/contrib/uima/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/uima/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/contrib/uima/pom.xml.template	(working copy)
@@ -56,7 +56,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/src/pom.xml.template
===================================================================
--- dev-tools/maven/solr/src/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/src/pom.xml.template	(working copy)
@@ -48,7 +48,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/solr/src/solrj/pom.xml.template
===================================================================
--- dev-tools/maven/solr/src/solrj/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/solr/src/solrj/pom.xml.template	(working copy)
@@ -44,7 +44,7 @@
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/icu/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/icu/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/icu/pom.xml.template	(working copy)
@@ -53,6 +53,13 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <type>test-jar</type>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
       <artifactId>lucene-analyzers</artifactId>
       <version>${project.version}</version>
     </dependency>
Index: dev-tools/maven/lucene/contrib/queryparser/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/queryparser/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/queryparser/pom.xml.template	(working copy)
@@ -51,6 +51,13 @@
       <scope>test</scope>
     </dependency>
     <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <type>test-jar</type>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/ant/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/ant/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/ant/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/wordnet/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/wordnet/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/wordnet/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/demo/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/demo/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/demo/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/instantiated/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/instantiated/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/instantiated/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/swing/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/swing/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/swing/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/benchmark/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/benchmark/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/benchmark/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/remote/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/remote/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/remote/pom.xml.template	(working copy)
@@ -49,6 +49,13 @@
       <scope>test</scope>
     </dependency>
     <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <type>test-jar</type>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/misc/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/misc/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/misc/pom.xml.template	(working copy)
@@ -50,6 +50,13 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <type>test-jar</type>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
       <artifactId>lucene-analyzers</artifactId>
       <version>${project.version}</version>
     </dependency>
Index: dev-tools/maven/lucene/contrib/spatial/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/spatial/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/spatial/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/highlighter/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/highlighter/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/highlighter/pom.xml.template	(working copy)
@@ -45,7 +45,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/memory/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/memory/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/memory/pom.xml.template	(working copy)
@@ -45,7 +45,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/lucli/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/lucli/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/lucli/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template	(working copy)
@@ -49,6 +49,13 @@
       <scope>test</scope>
     </dependency>
     <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <type>test-jar</type>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template	(working copy)
@@ -43,7 +43,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/contrib/queries/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/queries/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/contrib/queries/pom.xml.template	(working copy)
@@ -45,7 +45,7 @@
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
-      <artifactId>lucene-core</artifactId>
+      <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
       <type>test-jar</type>
       <scope>test</scope>
Index: dev-tools/maven/lucene/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/pom.xml.template	(working copy)
@@ -33,6 +33,7 @@
   <description>Lucene parent POM</description>
   <modules>
     <module>src</module>
+    <module>src/test-framework</module>
     <module>contrib</module>
   </modules>
   <build>
Index: dev-tools/maven/lucene/src/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/src/pom.xml.template	(revision 1067185)
+++ dev-tools/maven/lucene/src/pom.xml.template	(working copy)
@@ -121,6 +121,24 @@
           </programs>
         </configuration>
       </plugin>
+      <plugin>
+        <groupId>org.codehaus.mojo</groupId>
+        <artifactId>build-helper-maven-plugin</artifactId>
+        <executions>
+          <execution>
+            <id>add-test-source</id>
+            <phase>generate-test-sources</phase>
+            <goals>
+              <goal>add-test-source</goal>
+            </goals>
+            <configuration>
+              <sources>
+                <source>test-framework</source>
+              </sources>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 </project>
Index: dev-tools/maven/lucene/src/test-framework/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/src/test-framework/pom.xml.template	(revision 0)
+++ dev-tools/maven/lucene/src/test-framework/pom.xml.template	(revision 0)
@@ -0,0 +1,89 @@
+<project xmlns="http://maven.apache.org/POM/4.0.0"
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
+  <!--
+    Licensed to the Apache Software Foundation (ASF) under one
+    or more contributor license agreements.  See the NOTICE file
+    distributed with this work for additional information
+    regarding copyright ownership.  The ASF licenses this file
+    to you under the Apache License, Version 2.0 (the
+    "License"); you may not use this file except in compliance
+    with the License.  You may obtain a copy of the License at
+    
+    http://www.apache.org/licenses/LICENSE-2.0
+    
+    Unless required by applicable law or agreed to in writing,
+    software distributed under the License is distributed on an
+    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+    KIND, either express or implied.  See the License for the
+    specific language governing permissions and limitations
+    under the License.
+  -->
+  <modelVersion>4.0.0</modelVersion>
+  <parent>
+    <groupId>org.apache.lucene</groupId>
+    <artifactId>lucene-parent</artifactId>
+    <version>@version@</version>
+    <relativePath>../../pom.xml</relativePath>
+  </parent>
+  <groupId>org.apache.lucene</groupId>
+  <artifactId>lucene-test-framework</artifactId>
+  <packaging>jar</packaging>
+  <name>Lucene Test Framework</name>
+  <description>Apache Lucene Java Test Framework</description>
+  <properties>
+    <module-directory>lucene/src/test-framework</module-directory>
+    <build-directory>../../build</build-directory>
+  </properties>
+  <dependencies>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-core</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>junit</groupId>
+      <artifactId>junit</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.ant</groupId>
+      <artifactId>ant-junit</artifactId>
+      <scope>test</scope>
+    </dependency>
+  </dependencies>
+  <build>
+    <directory>${build-directory}/classes/test-framework</directory>
+    <testOutputDirectory>${build-directory}/classes/test-framework</testOutputDirectory>
+    <testSourceDirectory>.</testSourceDirectory>
+    <testResources>
+      <testResource>
+        <directory>${project.build.testSourceDirectory}</directory>
+        <excludes>
+          <exclude>**/*.java</exclude>
+        </excludes>
+      </testResource>
+    </testResources>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-jar-plugin</artifactId>
+        <executions>
+          <execution>
+            <goals>
+              <goal>test-jar</goal>
+            </goals>
+          </execution>
+        </executions>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-surefire-plugin</artifactId>
+        <configuration>
+          <skip>true</skip>
+        </configuration>
+      </plugin>
+    </plugins>
+  </build>
+</project>
