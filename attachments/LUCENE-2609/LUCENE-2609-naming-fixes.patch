Index: lucene/build.xml
===================================================================
--- lucene/build.xml	(revision 1085496)
+++ lucene/build.xml	(working copy)
@@ -51,7 +51,8 @@
   </path>
 
   <patternset id="binary.build.dist.patterns"
-              includes="${final.name}*.jar,docs/,contrib/*/*.jar,contrib/*/*.war, contrib/*/*/*.jar"
+              includes="${final.name}*.jar,lucene-test-framework*.jar,docs/,contrib/*/*.jar,contrib/*/*.war, contrib/*/*/*.jar"
+              excludes="*-src.jar"
   />
   <patternset id="binary.root.dist.patterns"
               includes="docs/,*.txt,contrib/**/README*,**/CHANGES.txt,contrib/**/*.sh contrib/**/docs/ contrib/xml-query-parser/*.dtd"
@@ -424,41 +425,17 @@
                   classifier="sources"/>
           <attach file="${build.dir}/${final.name}-javadoc.jar"
                   classifier="javadoc"/>
-          <attach file="${build.dir}/${final.name}-tests.jar"
-                  classifier="tests"/>
         </artifact-attachments>
       </m2-deploy>
+      <m2-deploy pom.xml="src/test-framework/pom.xml">
+        <artifact-attachments>
+          <attach file="${build.dir}/lucene-test-framework-${version}-src.jar"
+                  classifier="sources"/>
+          <attach file="${build.dir}/lucene-test-framework-${version}-javadoc.jar"
+                  classifier="javadoc"/>
+        </artifact-attachments>
+      </m2-deploy>
 
-      <!--
-        For the purposes of the generated artifacts, change the <packaging>
-        in the test-framework POM from "jar" to "test-jar" - this allows
-        artifact:deploy to properly name the artifact.  The Maven build doesn't
-        have a lifecycle mapping for the "test-jar" packaging, though, so the
-        POM in src/test-framework/ is left with the "jar" packaging.
-      -->
-      <property name="test-jar-packaging-test-framework-pom"
-                location="${build.dir}/test-jar-packaging-test-framework,pom"/>
-      <copy file="src/test-framework/pom.xml"
-            tofile="${test-jar-packaging-test-framework-pom}">
-        <filterset begintoken="&lt;packaging&gt;" endtoken="&lt;/packaging&gt;">
-          <filter token="jar"
-                  value="&lt;packaging&gt;test-jar&lt;/packaging&gt;"/>
-        </filterset>
-      </copy>
-      <artifact:pom id="test-framework-pom"
-                    file="${test-jar-packaging-test-framework-pom}"/>
-      <artifact:deploy file="${build.dir}/${final.name}-tests.jar">
-        <attach file="${build.dir}/${final.name}-tests-src.jar"
-                classifier="test-sources"/>
-        <attach file="${build.dir}/${final.name}-tests-javadoc.jar"
-                classifier="test-javadoc"/>
-        <remoteRepository url="${m2.repository.url}">
-          <authentication username="${m2.repository.username}"
-                          privateKey="${m2.repository.private.key}"/>
-        </remoteRepository>
-        <pom refid="test-framework-pom"/>
-      </artifact:deploy>
-
       <contrib-crawl target="dist-maven"/>
     </sequential>
   </target>
@@ -695,7 +672,7 @@
   </target>
 
   <target name="jar-test-framework" depends="compile-test-framework">
-    <jarify basedir="${build.dir}/classes/test-framework" destfile="${build.dir}/${final.name}-tests.jar"
+    <jarify basedir="${build.dir}/classes/test-framework" destfile="${build.dir}/lucene-test-framework-${version}.jar"
             title="Lucene Search Engine: Test Framework" />
   </target>
 
@@ -710,13 +687,13 @@
           <link href=""/>
         </sources>
       </invoke-javadoc>
-      <jarify basedir="${javadoc.dir}/test-framework" destfile="${build.dir}/${final.name}-tests-javadoc.jar"
+      <jarify basedir="${javadoc.dir}/test-framework" destfile="${build.dir}/lucene-test-framework-${version}-javadoc.jar"
 	          title="Lucene Search Engine: Test Framework" />
     </sequential>
   </target>
 
   <target name="jar-test-framework-src" depends="init">
-    <jarify basedir="${tests-framework.src.dir}" destfile="${build.dir}/${final.name}-tests-src.jar"
+    <jarify basedir="${tests-framework.src.dir}" destfile="${build.dir}/lucene-test-framework-${version}-src.jar"
             title="Lucene Search Engine: Test Framework" />
   </target>
 
Index: dev-tools/maven/solr/contrib/clustering/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/clustering/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/clustering/pom.xml.template	(working copy)
@@ -63,7 +63,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/contrib/extraction/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/extraction/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/extraction/pom.xml.template	(working copy)
@@ -66,7 +66,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/dataimporthandler/src/pom.xml.template	(working copy)
@@ -63,7 +63,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/dataimporthandler/src/extras/pom.xml.template	(working copy)
@@ -70,7 +70,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/analysis-extras/pom.xml.template	(working copy)
@@ -78,7 +78,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/contrib/uima/pom.xml.template
===================================================================
--- dev-tools/maven/solr/contrib/uima/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/contrib/uima/pom.xml.template	(working copy)
@@ -58,7 +58,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/src/pom.xml.template
===================================================================
--- dev-tools/maven/solr/src/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/src/pom.xml.template	(working copy)
@@ -50,7 +50,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/solr/src/solrj/pom.xml.template
===================================================================
--- dev-tools/maven/solr/src/solrj/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/solr/src/solrj/pom.xml.template	(working copy)
@@ -46,7 +46,6 @@
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/icu/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/icu/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/icu/pom.xml.template	(working copy)
@@ -55,7 +55,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/wordnet/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/wordnet/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/wordnet/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/ant/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/ant/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/ant/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/queryparser/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/queryparser/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/queryparser/pom.xml.template	(working copy)
@@ -54,7 +54,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/demo/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/demo/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/demo/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/db/bdb-je/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/db/bdb/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/swing/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/swing/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/swing/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/instantiated/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/instantiated/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/instantiated/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/benchmark/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/benchmark/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/benchmark/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/misc/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/misc/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/misc/pom.xml.template	(working copy)
@@ -52,7 +52,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/remote/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/remote/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/remote/pom.xml.template	(working copy)
@@ -52,7 +52,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/xml-query-parser/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/spatial/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/spatial/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/spatial/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/highlighter/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/highlighter/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/highlighter/pom.xml.template	(working copy)
@@ -47,7 +47,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/spellchecker/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/memory/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/memory/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/memory/pom.xml.template	(working copy)
@@ -47,7 +47,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/lucli/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/lucli/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/lucli/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/analyzers/smartcn/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/analyzers/common/pom.xml.template	(working copy)
@@ -52,7 +52,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/analyzers/stempel/pom.xml.template	(working copy)
@@ -45,7 +45,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/contrib/queries/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/contrib/queries/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/contrib/queries/pom.xml.template	(working copy)
@@ -47,7 +47,6 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-test-framework</artifactId>
       <version>${project.version}</version>
-      <type>test-jar</type>
       <scope>test</scope>
     </dependency>
     <dependency>
Index: dev-tools/maven/lucene/src/test-framework/pom.xml.template
===================================================================
--- dev-tools/maven/lucene/src/test-framework/pom.xml.template	(revision 1085496)
+++ dev-tools/maven/lucene/src/test-framework/pom.xml.template	(working copy)
@@ -40,45 +40,31 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>lucene-core</artifactId>
       <version>${project.version}</version>
-      <scope>test</scope>
     </dependency>
     <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
-      <scope>test</scope>
     </dependency>
     <dependency>
       <groupId>org.apache.ant</groupId>
       <artifactId>ant-junit</artifactId>
-      <scope>test</scope>
     </dependency>
   </dependencies>
   <build>
-    <directory>${build-directory}/classes/test-framework</directory>
-    <testOutputDirectory>${build-directory}/classes/test-framework</testOutputDirectory>
-    <testSourceDirectory>.</testSourceDirectory>
-    <testResources>
-      <testResource>
-        <directory>${project.build.testSourceDirectory}</directory>
+    <directory>${build-directory}</directory>
+    <outputDirectory>${build-directory}/classes/test-framework</outputDirectory>
+    <sourceDirectory>.</sourceDirectory>
+    <resources>
+      <resource>
+        <directory>${project.build.sourceDirectory}</directory>
         <excludes>
           <exclude>**/*.java</exclude>
         </excludes>
-      </testResource>
-    </testResources>
+      </resource>
+    </resources>
     <plugins>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-jar-plugin</artifactId>
-        <executions>
-          <execution>
-            <goals>
-              <goal>test-jar</goal>
-            </goals>
-          </execution>
-        </executions>
-      </plugin>
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-surefire-plugin</artifactId>
         <configuration>
           <skip>true</skip>
