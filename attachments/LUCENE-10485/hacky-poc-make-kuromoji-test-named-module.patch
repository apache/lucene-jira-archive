diff --git a/lucene/analysis/common/src/java/module-info.java b/lucene/analysis/common/src/java/module-info.java
index f8e7bf08554..fb27262f9a3 100644
--- a/lucene/analysis/common/src/java/module-info.java
+++ b/lucene/analysis/common/src/java/module-info.java
@@ -16,6 +16,7 @@
  */
 
 /** Lucene Analysis Common. */
+@SuppressWarnings({"module"})
 module org.apache.lucene.analysis.common {
   requires java.xml;
   requires org.apache.lucene.core;
@@ -60,7 +61,7 @@ module org.apache.lucene.analysis.common {
   exports org.apache.lucene.analysis.lv;
   exports org.apache.lucene.analysis.minhash;
   exports org.apache.lucene.analysis.miscellaneous;
-  exports org.apache.lucene.analysis.morph;
+  exports org.apache.lucene.analysis.morph to org.apache.lucene.analysis.kuromoji;
   exports org.apache.lucene.analysis.ne;
   exports org.apache.lucene.analysis.ngram;
   exports org.apache.lucene.analysis.nl;
diff --git a/lucene/analysis/kuromoji/build.gradle b/lucene/analysis/kuromoji/build.gradle
index fd8aedbbc1e..5e463d7dba5 100644
--- a/lucene/analysis/kuromoji/build.gradle
+++ b/lucene/analysis/kuromoji/build.gradle
@@ -25,3 +25,39 @@ dependencies {
 
   moduleTestImplementation project(':lucene:test-framework')
 }
+
+// Hacks to make tests a named module
+plugins.withType(JavaPlugin) {
+
+  tasks.withType(JavaCompile) {task ->
+    // 1. patch module
+    options.compilerArgs += ["--patch-module", "org.apache.lucene.analysis.kuromoji=${project.file("src/java")}"]
+  }
+
+  tasks.register("copyResources", Copy) {
+    // 2. all resources (dictionary data) in the main module should be copied
+    from "${project.file("src/resources")}"
+    into "$buildDir/classes/java/test"
+  }
+
+  tasks.register("copyAttributeImplClasses", Copy) {
+    // 3. all attribute impl classes in the main module should be copied
+    // those are not copied by --patch-module
+    // ... maybe because the attribute implementation classes are not referred from anywhere
+    from "$buildDir/classes/java/main/org/apache/lucene/analysis/ja/tokenattributes"
+    into "$buildDir/classes/java/test/org/apache/lucene/analysis/ja/tokenattributes"
+  }
+
+  tasks.getByName("testJar") {
+    dependsOn("copyResources")
+    dependsOn("copyAttributeImplClasses")
+  }
+
+  tasks.withType(Test) {
+    doFirst {
+      // 4. main module shouldn't be on the module path - split packages
+      // ... maybe test jar have to be created in a separate folder
+      project.delete("$buildDir/libs/lucene-analysis-kuromoji-10.0.0-SNAPSHOT.jar")
+    }
+  }
+}
diff --git a/lucene/analysis/kuromoji/src/test/module-info.java b/lucene/analysis/kuromoji/src/test/module-info.java
new file mode 100644
index 00000000000..6875d2acb41
--- /dev/null
+++ b/lucene/analysis/kuromoji/src/test/module-info.java
@@ -0,0 +1,29 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+/** Japanese Morphological Analyzer */
+open module org.apache.lucene.analysis.kuromoji {
+  requires org.apache.lucene.core;
+  requires org.apache.lucene.analysis.common;
+  requires org.apache.lucene.test_framework;
+
+  exports org.apache.lucene.analysis.ja;
+  exports org.apache.lucene.analysis.ja.completion;
+  exports org.apache.lucene.analysis.ja.dict;
+  exports org.apache.lucene.analysis.ja.tokenattributes;
+
+}
