Index: analysis/common/src/java/org/apache/lucene/analysis/util/ClasspathResourceLoader.java
===================================================================
--- analysis/common/src/java/org/apache/lucene/analysis/util/ClasspathResourceLoader.java	(revision 1437505)
+++ analysis/common/src/java/org/apache/lucene/analysis/util/ClasspathResourceLoader.java	(working copy)
@@ -34,7 +34,7 @@
    * Resource paths must be absolute.
    */
   public ClasspathResourceLoader() {
-    this(Thread.currentThread().getContextClassLoader());
+    this(ClasspathResourceLoader.class.getClassLoader());
   }
 
   /**
Index: analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java
===================================================================
--- analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java	(revision 1437505)
+++ analysis/common/src/java/org/apache/lucene/analysis/util/AnalysisSPILoader.java	(working copy)
@@ -46,7 +46,7 @@
   }
 
   public AnalysisSPILoader(Class<S> clazz, String[] suffixes) {
-    this(clazz, suffixes, Thread.currentThread().getContextClassLoader());
+    this(clazz, suffixes, AnalysisSPILoader.class.getClassLoader());
   }
   
   public AnalysisSPILoader(Class<S> clazz, String[] suffixes, ClassLoader classloader) {
Index: core/src/java/org/apache/lucene/util/SPIClassIterator.java
===================================================================
--- core/src/java/org/apache/lucene/util/SPIClassIterator.java	(revision 1437505)
+++ core/src/java/org/apache/lucene/util/SPIClassIterator.java	(working copy)
@@ -47,7 +47,7 @@
   private Iterator<String> linesIterator;
   
   public static <S> SPIClassIterator<S> get(Class<S> clazz) {
-    return new SPIClassIterator<S>(clazz, Thread.currentThread().getContextClassLoader());
+    return new SPIClassIterator<S>(clazz, SPIClassIterator.class.getClassLoader());
   }
   
   public static <S> SPIClassIterator<S> get(Class<S> clazz, ClassLoader loader) {
Index: core/src/java/org/apache/lucene/util/NamedSPILoader.java
===================================================================
--- core/src/java/org/apache/lucene/util/NamedSPILoader.java	(revision 1437505)
+++ core/src/java/org/apache/lucene/util/NamedSPILoader.java	(working copy)
@@ -34,7 +34,7 @@
   private final Class<S> clazz;
 
   public NamedSPILoader(Class<S> clazz) {
-    this(clazz, Thread.currentThread().getContextClassLoader());
+    this(clazz, NamedSPILoader.class.getClassLoader());
   }
   
   public NamedSPILoader(Class<S> clazz, ClassLoader classloader) {
