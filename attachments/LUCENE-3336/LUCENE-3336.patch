Index: lucene/build.xml
===================================================================
--- lucene/build.xml	(revision 1150482)
+++ lucene/build.xml	(working copy)
@@ -214,9 +214,16 @@
                    failonerror="false"/>
   </target>
   	
-  <target name="javadocs-all" description="Generate javadoc for core and contrib classes" depends="build-contrib">
+  <target name="javadocs-all" description="Generate javadoc for core and contrib classes">
   	<sequential>
       <mkdir dir="${javadoc.dir}/all"/>
+      
+      <!-- TODO: remove these dependencies: -->
+      <subant target="default">
+        <fileset dir="${common.dir}/../modules/queryparser" includes="build.xml"/>
+        <fileset dir="${common.dir}/../modules/analysis/common" includes="build.xml"/>
+        <fileset dir="${common.dir}/../modules/queries" includes="build.xml"/>
+      </subant>
 
       <path id="javadoc.classpath">
         <path refid="classpath"/>
Index: solr/build.xml
===================================================================
--- solr/build.xml	(revision 1150482)
+++ solr/build.xml	(working copy)
@@ -379,11 +379,15 @@
     </copy>
   </target>
  
-  <target name="javadocs-all" depends="compile,javadocs-dep"
+  <target name="javadocs-all" depends="prep-lucene-jars,javadocs-dep"
           description="Generate javadoc for core, java client and contrib">
     <sequential>
       <mkdir dir="${dest}/docs/api"/>
  
+      <subant target="module-jars-to-solr">
+        <fileset dir="contrib/analysis-extras" includes="build.xml"/>
+      </subant>
+
       <path id="javadoc.classpath">
         <path refid="classpath"/>
         <fileset dir="${dest}/contrib">
