Index: lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoReader.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoReader.java	(revision 1629656)
+++ lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoReader.java	(working copy)
@@ -55,12 +55,7 @@
         CodecUtil.checkHeader(input, Lucene50SegmentInfoFormat.CODEC_NAME,
                                      Lucene50SegmentInfoFormat.VERSION_START,
                                      Lucene50SegmentInfoFormat.VERSION_CURRENT);
-        final Version version;
-        try {
-          version = Version.parse(input.readString());
-        } catch (ParseException pe) {
-          throw new CorruptIndexException("unable to parse version string: " + pe.getMessage(), input, pe);
-        }
+        final Version version = Version.fromBits(input.readInt(), input.readInt(), input.readInt());
         
         final int docCount = input.readInt();
         if (docCount < 0) {
Index: lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoWriter.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoWriter.java	(revision 1629656)
+++ lucene/core/src/java/org/apache/lucene/codecs/lucene50/Lucene50SegmentInfoWriter.java	(working copy)
@@ -58,7 +58,10 @@
         throw new IllegalArgumentException("invalid major version: should be >= 5 but got: " + version.major + " segment=" + si);
       }
       // Write the Lucene version that created this segment, since 3.1
-      output.writeString(version.toString());
+      output.writeInt(version.major);
+      output.writeInt(version.minor);
+      output.writeInt(version.bugfix);
+      assert version.prerelease == 0;
       output.writeInt(si.getDocCount());
 
       output.writeByte((byte) (si.getUseCompoundFile() ? SegmentInfo.YES : SegmentInfo.NO));
Index: lucene/core/src/java/org/apache/lucene/util/Version.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/util/Version.java	(revision 1629656)
+++ lucene/core/src/java/org/apache/lucene/util/Version.java	(working copy)
@@ -370,6 +370,11 @@
         }
     }
   }
+  
+  /** Returns a new version based on raw numbers */
+  public static final Version fromBits(int major, int minor, int bugfix) {
+    return new Version(major, minor, bugfix);
+  }
 
   /** Major version, the difference between stable and trunk */
   public final int major;
