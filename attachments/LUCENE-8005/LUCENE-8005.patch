diff --git a/lucene/core/src/java/org/apache/lucene/search/UsageTrackingQueryCachingPolicy.java b/lucene/core/src/java/org/apache/lucene/search/UsageTrackingQueryCachingPolicy.java
index 1bbed5c05b..4107ec1b4d 100644
--- a/lucene/core/src/java/org/apache/lucene/search/UsageTrackingQueryCachingPolicy.java
+++ b/lucene/core/src/java/org/apache/lucene/search/UsageTrackingQueryCachingPolicy.java
@@ -36,7 +36,8 @@ public class UsageTrackingQueryCachingPolicy implements QueryCachingPolicy {
     // we need to check for super classes because we occasionally use anonymous
     // sub classes of eg. PointRangeQuery
     for (Class<?> clazz = query.getClass(); clazz != Query.class; clazz = clazz.getSuperclass()) {
-      final String simpleName = clazz.getSimpleName();
+      final String name = clazz.getName();
+      final String simpleName = name.substring(name.lastIndexOf(".") + 1);
       if (simpleName.startsWith("Point") && simpleName.endsWith("Query")) {
         return true;
       }
