Index: lucene/core/src/java/org/apache/lucene/index/DocumentsWriterStallControl.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/index/DocumentsWriterStallControl.java	(revision 1670270)
+++ lucene/core/src/java/org/apache/lucene/index/DocumentsWriterStallControl.java	(working copy)
@@ -77,7 +77,9 @@
           // don't loop here, higher level logic will re-stall!
           try {
             incWaiters();
-            wait();
+            // Defensive, in case we have a concurrency bug that fails to .notify/All our thread:
+            // just wait for up to 1 second here, and let caller re-stall if it's still needed:
+            wait(1000);
             decrWaiters();
           } catch (InterruptedException e) {
             throw new ThreadInterruptedException(e);
Index: lucene/core/src/test/org/apache/lucene/index/TestDocumentsWriterStallControl.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/TestDocumentsWriterStallControl.java	(revision 1670270)
+++ lucene/core/src/test/org/apache/lucene/index/TestDocumentsWriterStallControl.java	(working copy)
@@ -46,7 +46,7 @@
     ctrl.updateStalled(true);
     waitThreads = waitThreads(atLeast(1), ctrl);
     start(waitThreads);
-    awaitState(Thread.State.WAITING, waitThreads);
+    awaitState(Thread.State.TIMED_WAITING, waitThreads);
     assertTrue(ctrl.hasBlocked());
     assertTrue(ctrl.anyStalledThreads());
     ctrl.updateStalled(false);
