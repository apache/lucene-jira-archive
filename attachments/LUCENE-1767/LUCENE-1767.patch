Index: src/java/org/apache/lucene/util/OpenBitSet.java
===================================================================
--- src/java/org/apache/lucene/util/OpenBitSet.java	(revision 798981)
+++ src/java/org/apache/lucene/util/OpenBitSet.java	(working copy)
@@ -805,6 +805,14 @@
     return (int)((h>>32) ^ h);  // fold leftmost bits into right
   }
 
+  /**
+   * Returns an estimation of the memory consumption
+   * of this object.
+   */
+  public long sizeOf() {
+    // wlen, (arrayLen*longSize), arrayObj, this pointer
+    return 4 + (bits != null ? bits.length*8 : 0) + 16 + 8;
+  }
 }
 
 
