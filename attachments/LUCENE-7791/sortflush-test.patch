diff --git a/lucene/core/src/test/org/apache/lucene/index/TestIndexSorting.java b/lucene/core/src/test/org/apache/lucene/index/TestIndexSorting.java
index 1287dd2..8e926d3 100644
--- a/lucene/core/src/test/org/apache/lucene/index/TestIndexSorting.java
+++ b/lucene/core/src/test/org/apache/lucene/index/TestIndexSorting.java
@@ -757,6 +757,26 @@ public class TestIndexSorting extends LuceneTestCase {
     dir.close();
   }
 
+  public void testEmptyNonSortedIntField() throws Exception {
+    Directory dir = newDirectory();
+    IndexWriterConfig iwc = new IndexWriterConfig(new MockAnalyzer(random()));
+    Sort indexSort = new Sort(new SortField("foo", SortField.Type.INT));
+    iwc.setIndexSort(indexSort);
+    IndexWriter w = new IndexWriter(dir, iwc);
+    for (int i = 0; i != 128; ++i) {
+      Document doc = new Document();
+      doc.add(new NumericDocValuesField("foo", 128-i));
+      if (i < 64) {
+        doc.add(new NumericDocValuesField("maybeEmpty", 128-i));
+      }
+      w.addDocument(doc);
+    }
+    w.commit();
+    w.close();
+    dir.close();
+  }
+
+
   public void testBasicMultiValuedInt() throws Exception {
     Directory dir = newDirectory();
     IndexWriterConfig iwc = new IndexWriterConfig(new MockAnalyzer(random()));
