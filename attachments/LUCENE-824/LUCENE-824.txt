Index: src/test/org/apache/lucene/index/TestAddIndexesNoOptimize.java
===================================================================
--- src/test/org/apache/lucene/index/TestAddIndexesNoOptimize.java	(revision 515371)
+++ src/test/org/apache/lucene/index/TestAddIndexesNoOptimize.java	(working copy)
@@ -143,6 +143,7 @@
     }
     catch (IllegalArgumentException e) {
       assertEquals(100, writer.docCount());
+      assertEquals(1, writer.getSegmentCount());
     }
 
     writer.setMaxMergeDocs(maxMergeDocs);
Index: src/java/org/apache/lucene/index/IndexWriter.java
===================================================================
--- src/java/org/apache/lucene/index/IndexWriter.java	(revision 515371)
+++ src/java/org/apache/lucene/index/IndexWriter.java	(working copy)
@@ -1169,33 +1169,26 @@
 
     try {
 
-      try {
-        for (int i = 0; i < dirs.length; i++) {
-          if (directory == dirs[i]) {
-            // cannot add this index: segments may be deleted in merge before added
-            throw new IllegalArgumentException("Cannot add this index to itself");
-          }
+      for (int i = 0; i < dirs.length; i++) {
+        if (directory == dirs[i]) {
+          // cannot add this index: segments may be deleted in merge before added
+          throw new IllegalArgumentException("Cannot add this index to itself");
+        }
 
-          SegmentInfos sis = new SegmentInfos(); // read infos from dir
-          sis.read(dirs[i]);
-          for (int j = 0; j < sis.size(); j++) {
-            SegmentInfo info = sis.info(j);
-            segmentInfos.addElement(info); // add each info
-
-            while (startUpperBound < info.docCount) {
-              startUpperBound *= mergeFactor; // find the highest level from dirs
-              if (startUpperBound > maxMergeDocs) {
-                // upper bound cannot exceed maxMergeDocs
-                throw new IllegalArgumentException("Upper bound cannot exceed maxMergeDocs");
-              }
+        SegmentInfos sis = new SegmentInfos(); // read infos from dir
+        sis.read(dirs[i]);
+        for (int j = 0; j < sis.size(); j++) {
+          SegmentInfo info = sis.info(j);
+          segmentInfos.addElement(info); // add each info
+          
+          while (startUpperBound < info.docCount) {
+            startUpperBound *= mergeFactor; // find the highest level from dirs
+            if (startUpperBound > maxMergeDocs) {
+              // upper bound cannot exceed maxMergeDocs
+              throw new IllegalArgumentException("Upper bound cannot exceed maxMergeDocs");
             }
           }
         }
-      } catch (IllegalArgumentException e) {
-        for (int i = segmentInfos.size() - 1; i >= start; i--) {
-          segmentInfos.remove(i);
-        }
-        throw e;
       }
 
       // 3 maybe merge segments starting from the highest level from dirs
