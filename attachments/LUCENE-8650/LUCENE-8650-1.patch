From 8adbde4be83675c04ee614fc336344db180ef0db Mon Sep 17 00:00:00 2001
From: Dan Meehl <dmeehl@kmwllc.com>
Date: Fri, 18 Jan 2019 16:10:51 -0500
Subject: [PATCH] Enhance test.

---
 .../analysis/miscellaneous/TestConcatenatingTokenStream.java     | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/lucene/analysis/common/src/test/org/apache/lucene/analysis/miscellaneous/TestConcatenatingTokenStream.java b/lucene/analysis/common/src/test/org/apache/lucene/analysis/miscellaneous/TestConcatenatingTokenStream.java
index 258f9b8..0ed73c8 100644
--- a/lucene/analysis/common/src/test/org/apache/lucene/analysis/miscellaneous/TestConcatenatingTokenStream.java
+++ b/lucene/analysis/common/src/test/org/apache/lucene/analysis/miscellaneous/TestConcatenatingTokenStream.java
@@ -41,10 +41,17 @@ public class TestConcatenatingTokenStream extends BaseTokenStreamTestCase {
     third.setReader(new StringReader(" third words"));
 
     TokenStream ts = new ConcatenatingTokenStream(first, second, new EmptyTokenStream(), third);
+
+    // newAttributeFactory() may return a AttributeFactory.DEFAULT_ATTRIBUTE_FACTORY;
+    // which does not support type, increments, nor lengths, so they're nulled out.
     assertTokenStreamContents(ts,
         new String[] { "first", "words", "second", "words", "third", "words" },
         new int[]{ 0, 6, 12, 19, 25, 31 },
-        new int[]{ 5, 11, 18, 24, 30, 36 });
+        new int[]{ 5, 11, 18, 24, 30, 36 },
+        null,//new String[]{ "word", "word", "word", "word", "word", "word" },
+        null,//new int[]{ 1, 1, 1, 1, 1, 1 },
+        null,//new int[]{ 1, 1, 1, 1, 1, 1 },
+        36);
 
   }
 
-- 
2.7.4

