Index: solr/contrib/clustering/solr-clustering-pom.xml.template
===================================================================
--- solr/contrib/clustering/solr-clustering-pom.xml.template	(revision 954679)
+++ solr/contrib/clustering/solr-clustering-pom.xml.template	(working copy)
@@ -26,25 +26,25 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-clustering</artifactId>
   <name>Apache Solr Clustering</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Clustering</description>
   <packaging>jar</packaging>
   <dependencies>
     <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-solrj</artifactId>
-      <version>@maven_version@</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-core</artifactId>
-      <version>@maven_version@</version>
+      <version>@version@</version>
     </dependency>
     <!-- Carrot -->
     <dependency>
Index: solr/contrib/extraction/solr-cell-pom.xml.template
===================================================================
--- solr/contrib/extraction/solr-cell-pom.xml.template	(revision 954679)
+++ solr/contrib/extraction/solr-cell-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-cell</artifactId>
   <name>Apache Solr Content Extraction Library</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Content Extraction Library integrates Apache Tika content extraction framework into Solr</description>
   <packaging>jar</packaging>
 
Index: solr/contrib/dataimporthandler/solr-dataimporthandler-pom.xml.template
===================================================================
--- solr/contrib/dataimporthandler/solr-dataimporthandler-pom.xml.template	(revision 954679)
+++ solr/contrib/dataimporthandler/solr-dataimporthandler-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-dataimporthandler</artifactId>
   <name>Apache Solr DataImportHandler</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr DataImportHandler</description>
   <packaging>jar</packaging>
 
Index: solr/contrib/dataimporthandler/solr-dataimporthandler-extras-pom.xml.template
===================================================================
--- solr/contrib/dataimporthandler/solr-dataimporthandler-extras-pom.xml.template	(revision 954679)
+++ solr/contrib/dataimporthandler/solr-dataimporthandler-extras-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-dataimporthandler-extras</artifactId>
   <name>Apache Solr DataImportHandler Extras</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr DataImportHandler Extras</description>
   <packaging>jar</packaging>
 
Index: solr/contrib/velocity/solr-velocity-pom.xml.template
===================================================================
--- solr/contrib/velocity/solr-velocity-pom.xml.template	(revision 954679)
+++ solr/contrib/velocity/solr-velocity-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-velocity</artifactId>
   <name>Apache Solr Velocity Extension</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Velocity Extension adds support for integrating Solr and Velocity</description>
   <packaging>jar</packaging>
 
Index: solr/common-build.xml
===================================================================
--- solr/common-build.xml	(revision 954679)
+++ solr/common-build.xml	(working copy)
@@ -65,7 +65,7 @@
        By default, this should be set to "X.Y.N-dev" where X.Y.N is
        "1 greater" then the last version released (on this branch).
     -->
-  <property name="version" value="3.1-dev" />
+  <property name="version" value="3.1-SNAPSHOT" />
   
   <!-- Solr Specification Version -->
   <!--
@@ -122,9 +122,7 @@
        The version suffix of the Lucene artifacts checked into "lib" 
        IF YOU CHANGE THIS, SANITY CHECK "javadoc.link.lucene"
   -->
-  <property name="lucene_version" value="${version}"/>
-  <!-- The version number to assign to the Maven artifacts. -->
-  <property name="maven_version" value="3.1-SNAPSHOT"/>
+  <property name="version" value="${version}"/>
 
   <!-- By default, "deploy" to a temporary directory (as well as installing
        into your local repository).  If you wish to deploy to a remote
@@ -184,28 +182,28 @@
     <mkdir dir="${lucene-libs}"/>
     <copy todir="${lucene-libs}" preservelastmodified="true" flatten="true" failonerror="true" overwrite="true">
       <fileset dir="../lucene/build/">
-        <include name="lucene-core-${lucene_version}.jar" />
+        <include name="lucene-core-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/analyzers/common">
-        <include name="lucene-analyzers-${lucene_version}.jar" />
+        <include name="lucene-analyzers-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/highlighter">
-        <include name="lucene-highlighter-${lucene_version}.jar" />
+        <include name="lucene-highlighter-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/memory">
-        <include name="lucene-memory-${lucene_version}.jar" />
+        <include name="lucene-memory-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/misc">
-        <include name="lucene-misc-${lucene_version}.jar" />
+        <include name="lucene-misc-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/queries">
-        <include name="lucene-queries-${lucene_version}.jar" />
+        <include name="lucene-queries-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/spatial">
-        <include name="lucene-spatial-${lucene_version}.jar" />
+        <include name="lucene-spatial-${version}.jar" />
       </fileset>
       <fileset dir="../lucene/build/contrib/spellchecker">
-        <include name="lucene-spellchecker-${lucene_version}.jar" />
+        <include name="lucene-spellchecker-${version}.jar" />
       </fileset>
       </copy>
   </target>  
@@ -345,7 +343,7 @@
     <sequential>
       <copy file="@{pom.xml}" tofile="${maven.build.dir}/@{pom.xml}">
         <filterset begintoken="@" endtoken="@">
-          <filter token="maven_version" value="${maven_version}"/>
+          <filter token="version" value="${version}"/>
         </filterset>
       </copy>
       <artifact:install-provider artifactId="wagon-ssh" version="1.0-beta-2"/>
Index: solr/lib/solr-commons-csv-pom.xml.template
===================================================================
--- solr/lib/solr-commons-csv-pom.xml.template	(revision 954679)
+++ solr/lib/solr-commons-csv-pom.xml.template	(working copy)
@@ -24,13 +24,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
   <modelVersion>4.0.0</modelVersion>
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-commons-csv</artifactId>
   <name>Solr Specific Commons CSV</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Solr Specific Commons CSV</description>
   <packaging>jar</packaging>
 </project>
Index: solr/src/maven/solr-core-pom.xml.template
===================================================================
--- solr/src/maven/solr-core-pom.xml.template	(revision 954679)
+++ solr/src/maven/solr-core-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-core</artifactId>
   <name>Apache Solr Core</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Server</description>
   <packaging>jar</packaging>
 
@@ -42,49 +42,44 @@
     <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-solrj</artifactId>
-      <version>@maven_version@</version>
+      <version>@version@</version>
     </dependency>
 
     <!-- Lucene -->
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-analyzers</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-highlighter</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-queries</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
-      <artifactId>lucene-snowball</artifactId>
-      <version>2.9.1</version>
-    </dependency>
-    <dependency>
-      <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-memory</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-misc</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-spellchecker</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
     <dependency>
       <groupId>org.apache.lucene</groupId>
       <artifactId>lucene-spatial</artifactId>
-      <version>2.9.1</version>
+      <version>@version@</version>
     </dependency>
 
     <!-- Apache Commons -->
@@ -104,6 +99,11 @@
       <version>1.4</version>
     </dependency>
     <dependency>
+	    <groupId>commons-codec</groupId>
+	    <artifactId>commons-codec</artifactId>
+	    <version>1.4</version>
+		</dependency>
+    <dependency>
       <groupId>commons-fileupload</groupId>
       <artifactId>commons-fileupload</artifactId>
       <version>1.2.1</version>
@@ -113,7 +113,7 @@
     <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-commons-csv</artifactId>
-      <version>@maven_version@</version>
+      <version>@version@</version>
     </dependency>
 
     <!-- Stax : we could exclude this because already dependancy of solrj -->
Index: solr/src/maven/solr-parent-pom.xml.template
===================================================================
--- solr/src/maven/solr-parent-pom.xml.template	(revision 954679)
+++ solr/src/maven/solr-parent-pom.xml.template	(working copy)
@@ -32,7 +32,7 @@
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-parent</artifactId>
   <name>Apache Solr Parent POM</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Parent POM</description>
   <url>http://lucene.apache.org/solr</url>
   <packaging>pom</packaging>
Index: solr/src/maven/solr-solrj-pom.xml.template
===================================================================
--- solr/src/maven/solr-solrj-pom.xml.template	(revision 954679)
+++ solr/src/maven/solr-solrj-pom.xml.template	(working copy)
@@ -26,13 +26,13 @@
   <parent>
     <groupId>org.apache.solr</groupId>
     <artifactId>solr-parent</artifactId>
-    <version>@maven_version@</version>
+    <version>@version@</version>
   </parent>
 
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-solrj</artifactId>
   <name>Apache Solr Solrj</name>
-  <version>@maven_version@</version>
+  <version>@version@</version>
   <description>Apache Solr Solrj</description>
   <packaging>jar</packaging>
 
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 954679)
+++ lucene/common-build.xml	(working copy)
@@ -40,7 +40,7 @@
 
   <property name="name" value="${ant.project.name}"/>
   <property name="Name" value="Lucene"/>
-  <property name="dev.version" value="3.1-dev"/>
+  <property name="dev.version" value="3.1-SNAPSHOT"/>
   <property name="version" value="${dev.version}"/>
   <property name="spec.version" value="${version}"/>	
   <property name="year" value="2000-${current.year}"/>
Index: build.xml
===================================================================
--- build.xml	(revision 954679)
+++ build.xml	(working copy)
@@ -39,6 +39,18 @@
     </sequential>
   </target>
 
+  <target name="generate-maven-artifacts" description="Generate Maven Artifacts for Lucene and Solr">
+    <sequential>
+      <subant target="generate-maven-artifacts" inheritall="false" failonerror="true">
+        <fileset dir="lucene" includes="build.xml" />
+      </subant>
+
+      <subant target="generate-maven-artifacts" inheritall="false" failonerror="true">
+        <fileset dir="solr" includes="build.xml" />
+      </subant>
+    </sequential>
+  </target>
+
   <target name="clean" description="Clean Lucene and Solr">
     <sequential>
       <subant target="clean" inheritall="false" failonerror="true">
