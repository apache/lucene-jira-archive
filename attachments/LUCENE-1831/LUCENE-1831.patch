Index: src/java/org/apache/lucene/analysis/TokenStream.java
===================================================================
--- src/java/org/apache/lucene/analysis/TokenStream.java	(revision 806372)
+++ src/java/org/apache/lucene/analysis/TokenStream.java	(working copy)
@@ -146,6 +146,10 @@
       }
       return false;
     }
+    
+    public int hashCode() {
+      return delegate.hashCode() ^ 0x0a45ff31;
+    }
   }
 
   /**
Index: src/test/org/apache/lucene/search/CachingWrapperFilterHelper.java
===================================================================
--- src/test/org/apache/lucene/search/CachingWrapperFilterHelper.java	(revision 806372)
+++ src/test/org/apache/lucene/search/CachingWrapperFilterHelper.java	(working copy)
@@ -77,4 +77,8 @@
     if (!(o instanceof CachingWrapperFilterHelper)) return false;
     return this.filter.equals((CachingWrapperFilterHelper)o);
   }
+  
+  public int hashCode() {
+    return this.filter.hashCode() ^ 0x5525aacb;
+  }
 }
