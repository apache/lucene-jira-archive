Index: lucene/analysis/common/build.xml
===================================================================
--- lucene/analysis/common/build.xml	(revision 1713947)
+++ lucene/analysis/common/build.xml	(working copy)
@@ -114,6 +114,40 @@
     </delete>
   </target>
   
+  <target xmlns:ivy="antlib:org.apache.ivy.ant" name="-install-icu4j" unless="icu4j.loaded" depends="ivy-availability-check,ivy-configure">
+    <loadproperties prefix="ivyversions" srcFile="${common.dir}/ivy-versions.properties"/>
+    <ivy:cachepath organisation="com.ibm.icu" module="icu4j" revision="${ivyversions./com.ibm.icu/icu4j}"
+                   inline="true" conf="default" transitive="true" pathid="icu4j.classpath"/>
+    <property name="icu4j.loaded" value="true"/>
+  </target>
+  
+  <target name="unicode-tokenizers" depends="-install-icu4j,resolve-groovy">
+    <groovy classpathref="icu4j.classpath"><![CDATA[
+      import com.ibm.icu.lang.UCharacter;
+      
+      def appendChar = { StringBuilder sb, int c ->
+        if (sb.length() != 0) {
+          sb.append(", ");
+        }
+        sb.append(c);
+      }
+      
+      StringBuilder ws = new StringBuilder(), letter = new StringBuilder();
+      for (int c = UCharacter.MIN_CODE_POINT; c < UCharacter.MAX_CODE_POINT; c++) {
+        if (UCharacter.isUWhiteSpace(c)) {
+          appendChar(ws, c);
+        }
+        if (UCharacter.isLetter(c)) {
+          appendChar(letter, c);
+        }
+      }
+      
+      System.out.println("Unicode version: " + UCharacter.getUnicodeVersion());
+      System.out.println("Whitespace: " + ws);
+      //System.out.println("Letter: " + letter);
+    ]]></groovy>
+  </target>
+  
   <property name="tld.zones" value="http://www.internic.net/zones/root.zone"/>
   <property name="tld.output" location="src/java/org/apache/lucene/analysis/standard/ASCIITLD.jflex-macro"/>
 
@@ -141,7 +175,7 @@
 
   <target name="javadocs" depends="module-build.javadocs"/>
 
-  <target name="regenerate" depends="jflex"/>
+  <target name="regenerate" depends="jflex,unicode-tokenizers"/>
   
   <target name="patch-snowball" description="Patches all snowball programs in '${snowball.programs.dir}' to make them work with MethodHandles">
       <fileset id="snowball.programs" dir="${snowball.programs.dir}" includes="*Stemmer.java"/>
