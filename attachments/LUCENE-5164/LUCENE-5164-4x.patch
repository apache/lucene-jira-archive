Index: .
===================================================================
--- .	(revision 1512948)
+++ .	(working copy)

Property changes on: .
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk:r1512937
Index: dev-tools
===================================================================
--- dev-tools	(revision 1512948)
+++ dev-tools	(working copy)

Property changes on: dev-tools
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/dev-tools:r1512937
Index: lucene
===================================================================
--- lucene	(revision 1512948)
+++ lucene	(working copy)

Property changes on: lucene
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene:r1512937
Index: lucene/analysis
===================================================================
--- lucene/analysis	(revision 1512948)
+++ lucene/analysis	(working copy)

Property changes on: lucene/analysis
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/analysis:r1512937
Index: lucene/analysis/icu/src/java/org/apache/lucene/collation/ICUCollationKeyFilterFactory.java
===================================================================
--- lucene/analysis/icu/src/java/org/apache/lucene/collation/ICUCollationKeyFilterFactory.java	(revision 1512948)
+++ lucene/analysis/icu/src/java/org/apache/lucene/collation/ICUCollationKeyFilterFactory.java	(working copy)

Property changes on: lucene/analysis/icu/src/java/org/apache/lucene/collation/ICUCollationKeyFilterFactory.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/analysis/icu/src/java/org/apache/lucene/collation/ICUCollationKeyFilterFactory.java:r1512937
Index: lucene/backwards
===================================================================
--- lucene/backwards	(revision 1512948)
+++ lucene/backwards	(working copy)

Property changes on: lucene/backwards
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/backwards:r1512937
Index: lucene/benchmark
===================================================================
--- lucene/benchmark	(revision 1512948)
+++ lucene/benchmark	(working copy)

Property changes on: lucene/benchmark
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/benchmark:r1512937
Index: lucene/BUILD.txt
===================================================================
--- lucene/BUILD.txt	(revision 1512948)
+++ lucene/BUILD.txt	(working copy)

Property changes on: lucene/BUILD.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/BUILD.txt:r1512937
Index: lucene/build.xml
===================================================================
--- lucene/build.xml	(revision 1512948)
+++ lucene/build.xml	(working copy)

Property changes on: lucene/build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/build.xml:r1512937
Index: lucene/CHANGES.txt
===================================================================
--- lucene/CHANGES.txt	(revision 1512948)
+++ lucene/CHANGES.txt	(working copy)
@@ -63,14 +63,11 @@
   seek/lookup which can cause sideeffects if done on a cached FST root arc.
   (Simon Willnauer)
 
-* LUCENE-5160: Handle the case where reading from a file or FileChannel returns -1, which
-  could happen in rare cases where something happens to the file between the time we start the
-  read loop (where we check the length) and when we actually do the read. (gsingers, yonik, Robert Muir, Uwe Schindler)
+* LUCENE-5160: Handle the case where reading from a file or FileChannel returns -1,
+  which could happen in rare cases where something happens to the file between the
+  time we start the read loop (where we check the length) and when we actually do
+  the read. (gsingers, yonik, Robert Muir, Uwe Schindler)
 
-* LUCENE-5161: Fix default chunk sizes in FSDirectory.java to not be unnecessarily large,
-  and fix setReadChunkSize to always work regardless of whether the machine is 32bit
-  or 64bit.  (Uwe Schindler, Robert Muir)
-
 API Changes
 
 * LUCENE-5094: Add ramBytesUsed() to MultiDocValues.OrdinalMap.
@@ -106,6 +103,11 @@
 * LUCENE-5156: CompressingTermVectors TermsEnum no longer supports ord().
   (Robert Muir)
 
+* LUCENE-5161, LUCENE-5164: Fix default chunk sizes in FSDirectory to not be
+  unnecessarily large (now 8192 bytes); also use chunking when writing to index
+  files. FSDirectory#setReadChunkSize() is now deprecated and will be removed
+  in Lucene 5.0.  (Uwe Schindler, Robert Muir, gsingers)
+
 Optimizations
 
 * LUCENE-5088: Added TermFilter to filter docs by a specific term.
Index: lucene/CHANGES.txt
===================================================================
--- lucene/CHANGES.txt	(revision 1512948)
+++ lucene/CHANGES.txt	(working copy)

Property changes on: lucene/CHANGES.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/CHANGES.txt:r1512937
Index: lucene/classification
===================================================================
--- lucene/classification	(revision 1512948)
+++ lucene/classification	(working copy)

Property changes on: lucene/classification
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/classification:r1512937
Index: lucene/classification/build.xml
===================================================================
--- lucene/classification/build.xml	(revision 1512948)
+++ lucene/classification/build.xml	(working copy)

Property changes on: lucene/classification/build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/classification/build.xml:r1512937
Index: lucene/classification/ivy.xml
===================================================================
--- lucene/classification/ivy.xml	(revision 1512948)
+++ lucene/classification/ivy.xml	(working copy)

Property changes on: lucene/classification/ivy.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/classification/ivy.xml:r1512937
Index: lucene/classification/src
===================================================================
--- lucene/classification/src	(revision 1512948)
+++ lucene/classification/src	(working copy)

Property changes on: lucene/classification/src
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/classification/src:r1512937
Index: lucene/codecs
===================================================================
--- lucene/codecs	(revision 1512948)
+++ lucene/codecs	(working copy)

Property changes on: lucene/codecs
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/codecs:r1512937
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1512948)
+++ lucene/common-build.xml	(working copy)

Property changes on: lucene/common-build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/common-build.xml:r1512937
Index: lucene/core
===================================================================
--- lucene/core	(revision 1512948)
+++ lucene/core	(working copy)

Property changes on: lucene/core
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core:r1512937
Index: lucene/core/src/java/org/apache/lucene/store/BufferedIndexInput.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/store/BufferedIndexInput.java	(revision 1512948)
+++ lucene/core/src/java/org/apache/lucene/store/BufferedIndexInput.java	(working copy)
@@ -23,7 +23,7 @@
 /** Base implementation class for buffered {@link IndexInput}. */
 public abstract class BufferedIndexInput extends IndexInput {
 
-  /** Default buffer size set to 1024*/
+  /** Default buffer size set to {@value #BUFFER_SIZE}. */
   public static final int BUFFER_SIZE = 1024;
   
   // The normal read buffer size defaults to 1024, but
@@ -33,7 +33,7 @@
   // BufferedIndexInputs created during merging.  See
   // LUCENE-888 for details.
   /**
-   * A buffer size for merges set to 4096
+   * A buffer size for merges set to {@value #MERGE_BUFFER_SIZE}.
    */
   public static final int MERGE_BUFFER_SIZE = 4096;
 
@@ -115,15 +115,14 @@
 
   @Override
   public final void readBytes(byte[] b, int offset, int len, boolean useBuffer) throws IOException {
-
-    if(len <= (bufferLength-bufferPosition)){
+    int available = bufferLength - bufferPosition;
+    if(len <= available){
       // the buffer contains enough data to satisfy this request
       if(len>0) // to allow b to be null if len is 0...
         System.arraycopy(buffer, bufferPosition, b, offset, len);
       bufferPosition+=len;
     } else {
       // the buffer does not have enough data. First serve all we've got.
-      int available = bufferLength - bufferPosition;
       if(available > 0){
         System.arraycopy(buffer, bufferPosition, b, offset, available);
         offset += available;
Index: lucene/core/src/java/org/apache/lucene/store/FSDirectory.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/store/FSDirectory.java	(revision 1512948)
+++ lucene/core/src/java/org/apache/lucene/store/FSDirectory.java	(working copy)
@@ -31,6 +31,7 @@
 
 import org.apache.lucene.util.ThreadInterruptedException;
 import org.apache.lucene.util.Constants;
+import org.apache.lucene.util.IOUtils;
 
 /**
  * Base class for Directory implementations that store index
@@ -112,13 +113,16 @@
 public abstract class FSDirectory extends Directory {
 
   /**
-   * Default read chunk size: 2*{@link BufferedIndexInput#MERGE_BUFFER_SIZE}.
+   * Default read chunk size: 8192 bytes (this is the size up to which the JDK
+     does not allocate additional arrays while reading/writing)
+     @deprecated This constant is no longer used since Lucene 4.5.
    */
-  public static final int DEFAULT_READ_CHUNK_SIZE = BufferedIndexInput.MERGE_BUFFER_SIZE * 2;
+  @Deprecated
+  public static final int DEFAULT_READ_CHUNK_SIZE = 8192;
 
   protected final File directory; // The underlying filesystem directory
   protected final Set<String> staleFiles = synchronizedSet(new HashSet<String>()); // Files written, but not yet sync'ed
-  private int chunkSize = DEFAULT_READ_CHUNK_SIZE; // LUCENE-1566
+  private int chunkSize = DEFAULT_READ_CHUNK_SIZE;
 
   // returns the canonical version of the directory, creating it if it doesn't exist.
   private static File getCanonicalPath(File file) throws IOException {
@@ -348,24 +352,11 @@
   }
 
   /**
-   * Sets the maximum number of bytes read at once from the
-   * underlying file during {@link IndexInput#readBytes}.
-   * The default value is {@link #DEFAULT_READ_CHUNK_SIZE};
-   *
-   * <p> This was introduced due to <a
-   * href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6478546">Sun
-   * JVM Bug 6478546</a>, which throws an incorrect
-   * OutOfMemoryError when attempting to read too many bytes
-   * at once.  It only happens on 32bit JVMs with a large
-   * maximum heap size.</p>
-   *
-   * <p>Changes to this value will not impact any
-   * already-opened {@link IndexInput}s.  You should call
-   * this before attempting to open an index on the
-   * directory.</p>
+   * This setting has no effect anymore.
+   * @deprecated This is no longer used since Lucene 4.5.
    */
+  @Deprecated
   public final void setReadChunkSize(int chunkSize) {
-    // LUCENE-1566
     if (chunkSize <= 0) {
       throw new IllegalArgumentException("chunkSize must be positive");
     }
@@ -373,12 +364,11 @@
   }
 
   /**
-   * The maximum number of bytes to read at once from the
-   * underlying file during {@link IndexInput#readBytes}.
-   * @see #setReadChunkSize
+   * This setting has no effect anymore.
+   * @deprecated This is no longer used since Lucene 4.5.
    */
+  @Deprecated
   public final int getReadChunkSize() {
-    // LUCENE-1566
     return chunkSize;
   }
 
@@ -387,27 +377,23 @@
     /** the underlying RandomAccessFile */
     protected final RandomAccessFile file;
     boolean isClone = false;
-    /** maximum read length on a 32bit JVM to prevent incorrect OOM, see LUCENE-1566 */ 
-    protected final int chunkSize;
     /** start offset: non-zero in the slice case */
     protected final long off;
     /** end offset (start+length) */
     protected final long end;
     
     /** Create a new FSIndexInput, reading the entire file from <code>path</code> */
-    protected FSIndexInput(String resourceDesc, File path, IOContext context, int chunkSize) throws IOException {
+    protected FSIndexInput(String resourceDesc, File path, IOContext context) throws IOException {
       super(resourceDesc, context);
       this.file = new RandomAccessFile(path, "r"); 
-      this.chunkSize = chunkSize;
       this.off = 0L;
       this.end = file.length();
     }
     
     /** Create a new FSIndexInput, representing a slice of an existing open <code>file</code> */
-    protected FSIndexInput(String resourceDesc, RandomAccessFile file, long off, long length, int bufferSize, int chunkSize) {
+    protected FSIndexInput(String resourceDesc, RandomAccessFile file, long off, long length, int bufferSize) {
       super(resourceDesc, bufferSize);
       this.file = file;
-      this.chunkSize = chunkSize;
       this.off = off;
       this.end = off + length;
       this.isClone = true; // well, we are sorta?
@@ -445,23 +431,35 @@
    * Writes output with {@link RandomAccessFile#write(byte[], int, int)}
    */
   protected static class FSIndexOutput extends BufferedIndexOutput {
+    /**
+     * The maximum chunk size is 8192 bytes, because {@link RandomAccessFile} mallocs
+     * a native buffer outside of stack if the write buffer size is larger.
+     */
+    private static final int CHUNK_SIZE = 8192;
+    
     private final FSDirectory parent;
     private final String name;
     private final RandomAccessFile file;
     private volatile boolean isOpen; // remember if the file is open, so that we don't try to close it more than once
     
     public FSIndexOutput(FSDirectory parent, String name) throws IOException {
+      super(CHUNK_SIZE);
       this.parent = parent;
       this.name = name;
       file = new RandomAccessFile(new File(parent.directory, name), "rw");
       isOpen = true;
     }
 
-    /** output methods: */
     @Override
-    public void flushBuffer(byte[] b, int offset, int size) throws IOException {
+    protected void flushBuffer(byte[] b, int offset, int size) throws IOException {
       assert isOpen;
-      file.write(b, offset, size);
+      while (size > 0) {
+        final int toWrite = Math.min(CHUNK_SIZE, size);
+        file.write(b, offset, toWrite);
+        offset += toWrite;
+        size -= toWrite;
+      }
+      assert size == 0;
     }
     
     @Override
@@ -469,21 +467,14 @@
       parent.onIndexOutputClosed(this);
       // only close the file if it has not been closed yet
       if (isOpen) {
-        boolean success = false;
+        IOException priorE = null;
         try {
           super.close();
-          success = true;
+        } catch (IOException ioe) {
+          priorE = ioe;
         } finally {
           isOpen = false;
-          if (!success) {
-            try {
-              file.close();
-            } catch (Throwable t) {
-              // Suppress so we don't mask original exception
-            }
-          } else {
-            file.close();
-          }
+          IOUtils.closeWhileHandlingException(priorE, file);
         }
       }
     }
Index: lucene/core/src/java/org/apache/lucene/store/NIOFSDirectory.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/store/NIOFSDirectory.java	(revision 1512948)
+++ lucene/core/src/java/org/apache/lucene/store/NIOFSDirectory.java	(working copy)
@@ -77,7 +77,7 @@
   @Override
   public IndexInput openInput(String name, IOContext context) throws IOException {
     ensureOpen();
-    return new NIOFSIndexInput(new File(getDirectory(), name), context, getReadChunkSize());
+    return new NIOFSIndexInput(new File(getDirectory(), name), context);
   }
   
   @Override
@@ -96,7 +96,7 @@
       @Override
       public IndexInput openSlice(String sliceDescription, long offset, long length) {
         return new NIOFSIndexInput(sliceDescription, path, descriptor, descriptor.getChannel(), offset,
-            length, BufferedIndexInput.bufferSize(context), getReadChunkSize());
+            length, BufferedIndexInput.bufferSize(context));
       }
 
       @Override
@@ -114,18 +114,22 @@
    * Reads bytes with {@link FileChannel#read(ByteBuffer, long)}
    */
   protected static class NIOFSIndexInput extends FSIndexInput {
-
+    /**
+     * The maximum chunk size for reads of 16384 bytes.
+     */
+    private static final int CHUNK_SIZE = 16384;
+    
     private ByteBuffer byteBuf; // wraps the buffer for NIO
 
     final FileChannel channel;
 
-    public NIOFSIndexInput(File path, IOContext context, int chunkSize) throws IOException {
-      super("NIOFSIndexInput(path=\"" + path + "\")", path, context, chunkSize);
+    public NIOFSIndexInput(File path, IOContext context) throws IOException {
+      super("NIOFSIndexInput(path=\"" + path + "\")", path, context);
       channel = file.getChannel();
     }
     
-    public NIOFSIndexInput(String sliceDescription, File path, RandomAccessFile file, FileChannel fc, long off, long length, int bufferSize, int chunkSize) {
-      super("NIOFSIndexInput(" + sliceDescription + " in path=\"" + path + "\" slice=" + off + ":" + (off+length) + ")", file, off, length, bufferSize, chunkSize);
+    public NIOFSIndexInput(String sliceDescription, File path, RandomAccessFile file, FileChannel fc, long off, long length, int bufferSize) {
+      super("NIOFSIndexInput(" + sliceDescription + " in path=\"" + path + "\" slice=" + off + ":" + (off+length) + ")", file, off, length, bufferSize);
       channel = fc;
       isClone = true;
     }
@@ -138,24 +142,18 @@
 
     @Override
     protected void readInternal(byte[] b, int offset, int len) throws IOException {
-
       final ByteBuffer bb;
 
       // Determine the ByteBuffer we should use
-      if (b == buffer && 0 == offset) {
+      if (b == buffer) {
         // Use our own pre-wrapped byteBuf:
         assert byteBuf != null;
-        byteBuf.clear();
-        byteBuf.limit(len);
         bb = byteBuf;
+        byteBuf.clear().position(offset);
       } else {
         bb = ByteBuffer.wrap(b, offset, len);
       }
 
-      int readOffset = bb.position();
-      int readLength = bb.limit() - readOffset;
-      assert readLength == len;
-
       long pos = getFilePointer() + off;
       
       if (pos + len > end) {
@@ -163,33 +161,20 @@
       }
 
       try {
+        int readLength = len;
         while (readLength > 0) {
-          final int limit;
-          if (readLength > chunkSize) {
-            // LUCENE-1566 - work around JVM Bug by breaking
-            // very large reads into chunks
-            limit = readOffset + chunkSize;
-          } else {
-            limit = readOffset + readLength;
+          final int toRead = Math.min(CHUNK_SIZE, readLength);
+          bb.limit(bb.position() + toRead);
+          assert bb.remaining() == toRead;
+          final int i = channel.read(bb, pos);
+          if (i < 0) { // be defensive here, even though we checked before hand, something could have changed
+            throw new EOFException("read past EOF: " + this + " off: " + offset + " len: " + len + " pos: " + pos + " chunkLen: " + toRead + " end: " + end);
           }
-          bb.limit(limit);
-          int i = channel.read(bb, pos);
-          if (i < 0){//be defensive here, even though we checked before hand, something could have changed
-            throw new EOFException("read past EOF: " + this + " off: " + offset + " len: " + len + " pos: " + pos + " limit: " + limit + " end: " + end);
-          }
+          assert i > 0 : "FileChannel.read with non zero-length bb.remaining() must always read at least one byte (FileChannel is in blocking mode, see spec of ReadableByteChannel)";
           pos += i;
-          readOffset += i;
           readLength -= i;
         }
-      } catch (OutOfMemoryError e) {
-        // propagate OOM up and add a hint for 32bit VM Users hitting the bug
-        // with a large chunk size in the fast path.
-        final OutOfMemoryError outOfMemoryError = new OutOfMemoryError(
-              "OutOfMemoryError likely caused by the Sun VM Bug described in "
-              + "https://issues.apache.org/jira/browse/LUCENE-1566; try calling FSDirectory.setReadChunkSize "
-              + "with a value smaller than the current chunk size (" + chunkSize + ")");
-        outOfMemoryError.initCause(e);
-        throw outOfMemoryError;
+        assert readLength == 0;
       } catch (IOException ioe) {
         throw new IOException(ioe.getMessage() + ": " + this, ioe);
       }
Index: lucene/core/src/java/org/apache/lucene/store/SimpleFSDirectory.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/store/SimpleFSDirectory.java	(revision 1512948)
+++ lucene/core/src/java/org/apache/lucene/store/SimpleFSDirectory.java	(working copy)
@@ -55,7 +55,7 @@
   public IndexInput openInput(String name, IOContext context) throws IOException {
     ensureOpen();
     final File path = new File(directory, name);
-    return new SimpleFSIndexInput("SimpleFSIndexInput(path=\"" + path.getPath() + "\")", path, context, getReadChunkSize());
+    return new SimpleFSIndexInput("SimpleFSIndexInput(path=\"" + path.getPath() + "\")", path, context);
   }
 
   @Override
@@ -74,7 +74,7 @@
       @Override
       public IndexInput openSlice(String sliceDescription, long offset, long length) {
         return new SimpleFSIndexInput("SimpleFSIndexInput(" + sliceDescription + " in path=\"" + file.getPath() + "\" slice=" + offset + ":" + (offset+length) + ")", descriptor, offset,
-            length, BufferedIndexInput.bufferSize(context), getReadChunkSize());
+            length, BufferedIndexInput.bufferSize(context));
       }
 
       @Override
@@ -93,13 +93,18 @@
    * {@link RandomAccessFile#read(byte[], int, int)}.  
    */
   protected static class SimpleFSIndexInput extends FSIndexInput {
+    /**
+     * The maximum chunk size is 8192 bytes, because {@link RandomAccessFile} mallocs
+     * a native buffer outside of stack if the read buffer size is larger.
+     */
+    private static final int CHUNK_SIZE = 8192;
   
-    public SimpleFSIndexInput(String resourceDesc, File path, IOContext context, int chunkSize) throws IOException {
-      super(resourceDesc, path, context, chunkSize);
+    public SimpleFSIndexInput(String resourceDesc, File path, IOContext context) throws IOException {
+      super(resourceDesc, path, context);
     }
     
-    public SimpleFSIndexInput(String resourceDesc, RandomAccessFile file, long off, long length, int bufferSize, int chunkSize) {
-      super(resourceDesc, file, off, length, bufferSize, chunkSize);
+    public SimpleFSIndexInput(String resourceDesc, RandomAccessFile file, long off, long length, int bufferSize) {
+      super(resourceDesc, file, off, length, bufferSize);
     }
   
     /** IndexInput methods */
@@ -116,29 +121,16 @@
         }
 
         try {
-          do {
-            final int readLength;
-            if (total + chunkSize > len) {
-              readLength = len - total;
-            } else {
-              // LUCENE-1566 - work around JVM Bug by breaking very large reads into chunks
-              readLength = chunkSize;
+          while (total < len) {
+            final int toRead = Math.min(CHUNK_SIZE, len - total);
+            final int i = file.read(b, offset + total, toRead);
+            if (i < 0) { // be defensive here, even though we checked before hand, something could have changed
+             throw new EOFException("read past EOF: " + this + " off: " + offset + " len: " + len + " total: " + total + " chunkLen: " + toRead + " end: " + end);
             }
-            final int i = file.read(b, offset + total, readLength);
-            if (i < 0){//be defensive here, even though we checked before hand, something could have changed
-             throw new EOFException("read past EOF: " + this + " off: " + offset + " len: " + len + " total: " + total + " readLen: " + readLength + " end: " + end);
-            }
+            assert i > 0 : "RandomAccessFile.read with non zero-length toRead must always read at least one byte";
             total += i;
-          } while (total < len);
-        } catch (OutOfMemoryError e) {
-          // propagate OOM up and add a hint for 32bit VM Users hitting the bug
-          // with a large chunk size in the fast path.
-          final OutOfMemoryError outOfMemoryError = new OutOfMemoryError(
-              "OutOfMemoryError likely caused by the Sun VM Bug described in "
-              + "https://issues.apache.org/jira/browse/LUCENE-1566; try calling FSDirectory.setReadChunkSize "
-              + "with a value smaller than the current chunk size (" + chunkSize + ")");
-          outOfMemoryError.initCause(e);
-          throw outOfMemoryError;
+          }
+          assert total == len;
         } catch (IOException ioe) {
           throw new IOException(ioe.getMessage() + ": " + this, ioe);
         }
Index: lucene/core/src/test/org/apache/lucene/index/index.40.cfs.zip
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/index.40.cfs.zip	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/index/index.40.cfs.zip	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/index/index.40.cfs.zip
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/index/index.40.cfs.zip:r1512937
Index: lucene/core/src/test/org/apache/lucene/index/index.40.nocfs.zip
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/index.40.nocfs.zip	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/index/index.40.nocfs.zip	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/index/index.40.nocfs.zip
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/index/index.40.nocfs.zip:r1512937
Index: lucene/core/src/test/org/apache/lucene/index/index.40.optimized.cfs.zip
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/index.40.optimized.cfs.zip	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/index/index.40.optimized.cfs.zip	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/index/index.40.optimized.cfs.zip
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/index/index.40.optimized.cfs.zip:r1512937
Index: lucene/core/src/test/org/apache/lucene/index/index.40.optimized.nocfs.zip
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/index.40.optimized.nocfs.zip	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/index/index.40.optimized.nocfs.zip	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/index/index.40.optimized.nocfs.zip
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/index/index.40.optimized.nocfs.zip:r1512937
Index: lucene/core/src/test/org/apache/lucene/index/TestBackwardsCompatibility.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/index/TestBackwardsCompatibility.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/index/TestBackwardsCompatibility.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/index/TestBackwardsCompatibility.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/index/TestBackwardsCompatibility.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/search/TestSort.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/search/TestSort.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/search/TestSort.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/search/TestSort.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/search/TestSort.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/search/TestSortDocValues.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/search/TestSortDocValues.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/search/TestSortDocValues.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/search/TestSortDocValues.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/search/TestSortDocValues.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/search/TestSortRandom.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/search/TestSortRandom.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/search/TestSortRandom.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/search/TestSortRandom.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/search/TestSortRandom.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/search/TestTopFieldCollector.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/search/TestTotalHitCountCollector.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/search/TestTotalHitCountCollector.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/search/TestTotalHitCountCollector.java	(working copy)

Property changes on: lucene/core/src/test/org/apache/lucene/search/TestTotalHitCountCollector.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/core/src/test/org/apache/lucene/search/TestTotalHitCountCollector.java:r1512937
Index: lucene/core/src/test/org/apache/lucene/store/TestBufferedIndexInput.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/store/TestBufferedIndexInput.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/store/TestBufferedIndexInput.java	(working copy)
@@ -81,24 +81,6 @@
   public void testReadBytes() throws Exception {
     MyBufferedIndexInput input = new MyBufferedIndexInput();
     runReadBytes(input, BufferedIndexInput.BUFFER_SIZE, random());
-
-    // This tests the workaround code for LUCENE-1566 where readBytesInternal
-    // provides a workaround for a JVM Bug that incorrectly raises a OOM Error
-    // when a large byte buffer is passed to a file read.
-    // NOTE: this does only test the chunked reads and NOT if the Bug is triggered.
-    //final int tmpFileSize = 1024 * 1024 * 5;
-    final int inputBufferSize = 128;
-    File tmpInputFile = _TestUtil.createTempFile("IndexInput", "tmpFile", TEMP_DIR);
-    tmpInputFile.deleteOnExit();
-    writeBytes(tmpInputFile, TEST_FILE_LENGTH);
-
-    // run test with chunk size of 10 bytes
-    runReadBytesAndClose(new SimpleFSIndexInput("SimpleFSIndexInput(path=\"" + tmpInputFile + "\")", tmpInputFile,
-        newIOContext(random()), 10), inputBufferSize, random());
-
-    // run test with chunk size of 10 bytes
-    runReadBytesAndClose(new NIOFSIndexInput(tmpInputFile,
-        newIOContext(random()), 10), inputBufferSize, random());
   }
 
   private void runReadBytesAndClose(IndexInput input, int bufferSize, Random r)
@@ -208,6 +190,7 @@
     private static byte byten(long n){
       return (byte)(n*n%256);
     }
+    
     private static class MyBufferedIndexInput extends BufferedIndexInput {
       private long pos;
       private long len;
Index: lucene/core/src/test/org/apache/lucene/store/TestDirectory.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/store/TestDirectory.java	(revision 1512948)
+++ lucene/core/src/test/org/apache/lucene/store/TestDirectory.java	(working copy)
@@ -133,52 +133,66 @@
   // Test that different instances of FSDirectory can coexist on the same
   // path, can read, write, and lock files.
   public void testDirectInstantiation() throws Exception {
-    File path = _TestUtil.getTempDir("testDirectInstantiation");
+    final File path = _TestUtil.getTempDir("testDirectInstantiation");
+    
+    final byte[] largeBuffer = new byte[random().nextInt(256*1024)], largeReadBuffer = new byte[largeBuffer.length];
+    for (int i = 0; i < largeBuffer.length; i++) {
+      largeBuffer[i] = (byte) i; // automatically loops with modulo
+    }
 
-    int sz = 3;
-    Directory[] dirs = new Directory[sz];
+    final FSDirectory[] dirs = new FSDirectory[] {
+      new SimpleFSDirectory(path, null),
+      new NIOFSDirectory(path, null),
+      new MMapDirectory(path, null)
+    };
 
-    dirs[0] = new SimpleFSDirectory(path, null);
-    dirs[1] = new NIOFSDirectory(path, null);
-    dirs[2] = new MMapDirectory(path, null);
-
-    for (int i=0; i<sz; i++) {
-      Directory dir = dirs[i];
+    for (int i=0; i<dirs.length; i++) {
+      FSDirectory dir = dirs[i];
       dir.ensureOpen();
       String fname = "foo." + i;
       String lockname = "foo" + i + ".lck";
       IndexOutput out = dir.createOutput(fname, newIOContext(random()));
       out.writeByte((byte)i);
+      out.writeBytes(largeBuffer, largeBuffer.length);
       out.close();
 
-      for (int j=0; j<sz; j++) {
-        Directory d2 = dirs[j];
+      for (int j=0; j<dirs.length; j++) {
+        FSDirectory d2 = dirs[j];
         d2.ensureOpen();
         assertTrue(d2.fileExists(fname));
-        assertEquals(1, d2.fileLength(fname));
+        assertEquals(1 + largeBuffer.length, d2.fileLength(fname));
 
-        // don't test read on MMapDirectory, since it can't really be
-        // closed and will cause a failure to delete the file.
-        if (d2 instanceof MMapDirectory) continue;
+        // don't do read tests if unmapping is not supported!
+        if (d2 instanceof MMapDirectory && !((MMapDirectory) d2).getUseUnmap())
+          continue;
         
         IndexInput input = d2.openInput(fname, newIOContext(random()));
         assertEquals((byte)i, input.readByte());
+        // read array with buffering enabled
+        Arrays.fill(largeReadBuffer, (byte)0);
+        input.readBytes(largeReadBuffer, 0, largeReadBuffer.length, true);
+        assertArrayEquals(largeBuffer, largeReadBuffer);
+        // read again without using buffer
+        input.seek(1L);
+        Arrays.fill(largeReadBuffer, (byte)0);
+        input.readBytes(largeReadBuffer, 0, largeReadBuffer.length, false);
+        assertArrayEquals(largeBuffer, largeReadBuffer);        
         input.close();
       }
 
       // delete with a different dir
-      dirs[(i+1)%sz].deleteFile(fname);
+      dirs[(i+1)%dirs.length].deleteFile(fname);
 
-      for (int j=0; j<sz; j++) {
-        Directory d2 = dirs[j];
+      for (int j=0; j<dirs.length; j++) {
+        FSDirectory d2 = dirs[j];
         assertFalse(d2.fileExists(fname));
       }
 
       Lock lock = dir.makeLock(lockname);
       assertTrue(lock.obtain());
 
-      for (int j=0; j<sz; j++) {
-        Directory d2 = dirs[j];
+      for (int j=0; j<dirs.length; j++) {
+        FSDirectory d2 = dirs[j];
         Lock lock2 = d2.makeLock(lockname);
         try {
           assertFalse(lock2.obtain(1));
@@ -190,13 +204,13 @@
       lock.release();
       
       // now lock with different dir
-      lock = dirs[(i+1)%sz].makeLock(lockname);
+      lock = dirs[(i+1)%dirs.length].makeLock(lockname);
       assertTrue(lock.obtain());
       lock.release();
     }
 
-    for (int i=0; i<sz; i++) {
-      Directory dir = dirs[i];
+    for (int i=0; i<dirs.length; i++) {
+      FSDirectory dir = dirs[i];
       dir.ensureOpen();
       dir.close();
       assertFalse(dir.isOpen);
Index: lucene/demo
===================================================================
--- lucene/demo	(revision 1512948)
+++ lucene/demo	(working copy)

Property changes on: lucene/demo
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/demo:r1512937
Index: lucene/facet
===================================================================
--- lucene/facet	(revision 1512948)
+++ lucene/facet	(working copy)

Property changes on: lucene/facet
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/facet:r1512937
Index: lucene/grouping
===================================================================
--- lucene/grouping	(revision 1512948)
+++ lucene/grouping	(working copy)

Property changes on: lucene/grouping
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/grouping:r1512937
Index: lucene/highlighter
===================================================================
--- lucene/highlighter	(revision 1512948)
+++ lucene/highlighter	(working copy)

Property changes on: lucene/highlighter
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/highlighter:r1512937
Index: lucene/ivy-settings.xml
===================================================================
--- lucene/ivy-settings.xml	(revision 1512948)
+++ lucene/ivy-settings.xml	(working copy)

Property changes on: lucene/ivy-settings.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/ivy-settings.xml:r1512937
Index: lucene/join
===================================================================
--- lucene/join	(revision 1512948)
+++ lucene/join	(working copy)

Property changes on: lucene/join
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/join:r1512937
Index: lucene/JRE_VERSION_MIGRATION.txt
===================================================================
--- lucene/JRE_VERSION_MIGRATION.txt	(revision 1512948)
+++ lucene/JRE_VERSION_MIGRATION.txt	(working copy)

Property changes on: lucene/JRE_VERSION_MIGRATION.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/JRE_VERSION_MIGRATION.txt:r1512937
Index: lucene/LICENSE.txt
===================================================================
--- lucene/LICENSE.txt	(revision 1512948)
+++ lucene/LICENSE.txt	(working copy)

Property changes on: lucene/LICENSE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/LICENSE.txt:r1512937
Index: lucene/licenses
===================================================================
--- lucene/licenses	(revision 1512948)
+++ lucene/licenses	(working copy)

Property changes on: lucene/licenses
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/licenses:r1512937
Index: lucene/memory
===================================================================
--- lucene/memory	(revision 1512948)
+++ lucene/memory	(working copy)

Property changes on: lucene/memory
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/memory:r1512937
Index: lucene/MIGRATE.txt
===================================================================
--- lucene/MIGRATE.txt	(revision 1512948)
+++ lucene/MIGRATE.txt	(working copy)

Property changes on: lucene/MIGRATE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/MIGRATE.txt:r1512937
Index: lucene/misc
===================================================================
--- lucene/misc	(revision 1512948)
+++ lucene/misc	(working copy)

Property changes on: lucene/misc
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/misc:r1512937
Index: lucene/module-build.xml
===================================================================
--- lucene/module-build.xml	(revision 1512948)
+++ lucene/module-build.xml	(working copy)

Property changes on: lucene/module-build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/module-build.xml:r1512937
Index: lucene/NOTICE.txt
===================================================================
--- lucene/NOTICE.txt	(revision 1512948)
+++ lucene/NOTICE.txt	(working copy)

Property changes on: lucene/NOTICE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/NOTICE.txt:r1512937
Index: lucene/queries
===================================================================
--- lucene/queries	(revision 1512948)
+++ lucene/queries	(working copy)

Property changes on: lucene/queries
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/queries:r1512937
Index: lucene/queries/src/test/org/apache/lucene/queries/function/TestFunctionQuerySort.java
===================================================================
--- lucene/queries/src/test/org/apache/lucene/queries/function/TestFunctionQuerySort.java	(revision 1512948)
+++ lucene/queries/src/test/org/apache/lucene/queries/function/TestFunctionQuerySort.java	(working copy)

Property changes on: lucene/queries/src/test/org/apache/lucene/queries/function/TestFunctionQuerySort.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/queries/src/test/org/apache/lucene/queries/function/TestFunctionQuerySort.java:r1512937
Index: lucene/queryparser
===================================================================
--- lucene/queryparser	(revision 1512948)
+++ lucene/queryparser	(working copy)

Property changes on: lucene/queryparser
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/queryparser:r1512937
Index: lucene/README.txt
===================================================================
--- lucene/README.txt	(revision 1512948)
+++ lucene/README.txt	(working copy)

Property changes on: lucene/README.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/README.txt:r1512937
Index: lucene/replicator
===================================================================
--- lucene/replicator	(revision 1512948)
+++ lucene/replicator	(working copy)

Property changes on: lucene/replicator
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/replicator:r1512937
Index: lucene/sandbox
===================================================================
--- lucene/sandbox	(revision 1512948)
+++ lucene/sandbox	(working copy)

Property changes on: lucene/sandbox
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/sandbox:r1512937
Index: lucene/site
===================================================================
--- lucene/site	(revision 1512948)
+++ lucene/site	(working copy)

Property changes on: lucene/site
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/site:r1512937
Index: lucene/spatial
===================================================================
--- lucene/spatial	(revision 1512948)
+++ lucene/spatial	(working copy)

Property changes on: lucene/spatial
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/spatial:r1512937
Index: lucene/suggest
===================================================================
--- lucene/suggest	(revision 1512948)
+++ lucene/suggest	(working copy)

Property changes on: lucene/suggest
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/suggest:r1512937
Index: lucene/SYSTEM_REQUIREMENTS.txt
===================================================================
--- lucene/SYSTEM_REQUIREMENTS.txt	(revision 1512948)
+++ lucene/SYSTEM_REQUIREMENTS.txt	(working copy)

Property changes on: lucene/SYSTEM_REQUIREMENTS.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/SYSTEM_REQUIREMENTS.txt:r1512937
Index: lucene/test-framework
===================================================================
--- lucene/test-framework	(revision 1512948)
+++ lucene/test-framework	(working copy)

Property changes on: lucene/test-framework
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/test-framework:r1512937
Index: lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java
===================================================================
--- lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java	(revision 1512948)
+++ lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java	(working copy)
@@ -1153,7 +1153,6 @@
     } catch (Exception e) {
       Rethrow.rethrow(e);
     }
-    d.setReadChunkSize(_TestUtil.nextInt(random(), 8, 32678));
     return d;
   }
 
Index: lucene/tools
===================================================================
--- lucene/tools	(revision 1512948)
+++ lucene/tools	(working copy)

Property changes on: lucene/tools
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/lucene/tools:r1512937
Index: solr
===================================================================
--- solr	(revision 1512948)
+++ solr	(working copy)

Property changes on: solr
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr:r1512937
Index: solr/build.xml
===================================================================
--- solr/build.xml	(revision 1512948)
+++ solr/build.xml	(working copy)

Property changes on: solr/build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/build.xml:r1512937
Index: solr/CHANGES.txt
===================================================================
--- solr/CHANGES.txt	(revision 1512948)
+++ solr/CHANGES.txt	(working copy)

Property changes on: solr/CHANGES.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/CHANGES.txt:r1512937
Index: solr/cloud-dev
===================================================================
--- solr/cloud-dev	(revision 1512948)
+++ solr/cloud-dev	(working copy)

Property changes on: solr/cloud-dev
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/cloud-dev:r1512937
Index: solr/common-build.xml
===================================================================
--- solr/common-build.xml	(revision 1512948)
+++ solr/common-build.xml	(working copy)

Property changes on: solr/common-build.xml
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/common-build.xml:r1512937
Index: solr/contrib
===================================================================
--- solr/contrib	(revision 1512948)
+++ solr/contrib	(working copy)

Property changes on: solr/contrib
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/contrib:r1512937
Index: solr/core
===================================================================
--- solr/core	(revision 1512948)
+++ solr/core	(working copy)

Property changes on: solr/core
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/core:r1512937
Index: solr/core/src/test/org/apache/solr/core/TestConfig.java
===================================================================
--- solr/core/src/test/org/apache/solr/core/TestConfig.java	(revision 1512948)
+++ solr/core/src/test/org/apache/solr/core/TestConfig.java	(working copy)

Property changes on: solr/core/src/test/org/apache/solr/core/TestConfig.java
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/core/src/test/org/apache/solr/core/TestConfig.java:r1512937
Index: solr/example
===================================================================
--- solr/example	(revision 1512948)
+++ solr/example	(working copy)

Property changes on: solr/example
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/example:r1512937
Index: solr/LICENSE.txt
===================================================================
--- solr/LICENSE.txt	(revision 1512948)
+++ solr/LICENSE.txt	(working copy)

Property changes on: solr/LICENSE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/LICENSE.txt:r1512937
Index: solr/licenses
===================================================================
--- solr/licenses	(revision 1512948)
+++ solr/licenses	(working copy)

Property changes on: solr/licenses
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses:r1512937
Index: solr/licenses/httpclient-LICENSE-ASL.txt
===================================================================
--- solr/licenses/httpclient-LICENSE-ASL.txt	(revision 1512948)
+++ solr/licenses/httpclient-LICENSE-ASL.txt	(working copy)

Property changes on: solr/licenses/httpclient-LICENSE-ASL.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpclient-LICENSE-ASL.txt:r1512937
Index: solr/licenses/httpclient-NOTICE.txt
===================================================================
--- solr/licenses/httpclient-NOTICE.txt	(revision 1512948)
+++ solr/licenses/httpclient-NOTICE.txt	(working copy)

Property changes on: solr/licenses/httpclient-NOTICE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpclient-NOTICE.txt:r1512937
Index: solr/licenses/httpcore-LICENSE-ASL.txt
===================================================================
--- solr/licenses/httpcore-LICENSE-ASL.txt	(revision 1512948)
+++ solr/licenses/httpcore-LICENSE-ASL.txt	(working copy)

Property changes on: solr/licenses/httpcore-LICENSE-ASL.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpcore-LICENSE-ASL.txt:r1512937
Index: solr/licenses/httpcore-NOTICE.txt
===================================================================
--- solr/licenses/httpcore-NOTICE.txt	(revision 1512948)
+++ solr/licenses/httpcore-NOTICE.txt	(working copy)

Property changes on: solr/licenses/httpcore-NOTICE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpcore-NOTICE.txt:r1512937
Index: solr/licenses/httpmime-LICENSE-ASL.txt
===================================================================
--- solr/licenses/httpmime-LICENSE-ASL.txt	(revision 1512948)
+++ solr/licenses/httpmime-LICENSE-ASL.txt	(working copy)

Property changes on: solr/licenses/httpmime-LICENSE-ASL.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpmime-LICENSE-ASL.txt:r1512937
Index: solr/licenses/httpmime-NOTICE.txt
===================================================================
--- solr/licenses/httpmime-NOTICE.txt	(revision 1512948)
+++ solr/licenses/httpmime-NOTICE.txt	(working copy)

Property changes on: solr/licenses/httpmime-NOTICE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/licenses/httpmime-NOTICE.txt:r1512937
Index: solr/NOTICE.txt
===================================================================
--- solr/NOTICE.txt	(revision 1512948)
+++ solr/NOTICE.txt	(working copy)

Property changes on: solr/NOTICE.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/NOTICE.txt:r1512937
Index: solr/README.txt
===================================================================
--- solr/README.txt	(revision 1512948)
+++ solr/README.txt	(working copy)

Property changes on: solr/README.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/README.txt:r1512937
Index: solr/scripts
===================================================================
--- solr/scripts	(revision 1512948)
+++ solr/scripts	(working copy)

Property changes on: solr/scripts
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/scripts:r1512937
Index: solr/site
===================================================================
--- solr/site	(revision 1512948)
+++ solr/site	(working copy)

Property changes on: solr/site
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/site:r1512937
Index: solr/solrj
===================================================================
--- solr/solrj	(revision 1512948)
+++ solr/solrj	(working copy)

Property changes on: solr/solrj
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/solrj:r1512937
Index: solr/SYSTEM_REQUIREMENTS.txt
===================================================================
--- solr/SYSTEM_REQUIREMENTS.txt	(revision 1512948)
+++ solr/SYSTEM_REQUIREMENTS.txt	(working copy)

Property changes on: solr/SYSTEM_REQUIREMENTS.txt
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/SYSTEM_REQUIREMENTS.txt:r1512937
Index: solr/test-framework
===================================================================
--- solr/test-framework	(revision 1512948)
+++ solr/test-framework	(working copy)

Property changes on: solr/test-framework
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/test-framework:r1512937
Index: solr/webapp
===================================================================
--- solr/webapp	(revision 1512948)
+++ solr/webapp	(working copy)

Property changes on: solr/webapp
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /lucene/dev/trunk/solr/webapp:r1512937
