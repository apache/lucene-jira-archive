Index: LuceneCoreQuery.dtd
===================================================================
--- LuceneCoreQuery.dtd	(revision 739123)
+++ LuceneCoreQuery.dtd	(arbetskopia)
@@ -53,8 +53,8 @@
 -->
 
 <!-- @hidden Define core types of XML elements -->
-<!ENTITY % coreSpanQueries "SpanOr|SpanNear|SpanOrTerms|SpanFirst|SpanNot|SpanTerm" >
-<!ENTITY % coreQueries "BooleanQuery|UserQuery|FilteredQuery|TermQuery|TermsQuery|MatchAllDocsQuery|ConstantScoreQuery" >
+<!ENTITY % coreSpanQueries "SpanOr|SpanNear|SpanOrTerms|SpanFirst|SpanNot|SpanTerm|BoostingTermQuery" >
+<!ENTITY % coreQueries "BooleanQuery|UserQuery|FilteredQuery|TermQuery|TermsQuery|MatchAllDocsQuery|ConstantScoreQuery|BoostingTermQuery" >
 <!ENTITY % coreFilters "RangeFilter|CachedFilter" >
 
 <!-- @hidden Allow for extensions -->
@@ -186,7 +186,16 @@
 <!ATTLIST TermQuery fieldName CDATA #IMPLIED>
 
 
+<!-- a boosted term query - no analysis is done of the child text. also a span member.
+-->
+<!ELEMENT BoostingTermQuery (#PCDATA)>
+<!-- Optional boost for matches on this query. Values > 1 -->
+<!ATTLIST TermQuery boost CDATA "1.0">
+<!-- fieldName must be defined here or is taken from the most immediate parent XML element that defines a "fieldName" attribute -->
+<!ATTLIST TermQuery fieldName CDATA #IMPLIED>
 
+
+
 <!-- 
 	The equivalent of a BooleanQuery with multiple optional TermQuery clauses.
 	Child text is analyzed using a field-specific choice of Analyzer to produce a set of terms that are ORed together in Boolean logic.
Index: src/test/org/apache/lucene/xmlparser/SpanQuery.xml
===================================================================
--- src/test/org/apache/lucene/xmlparser/SpanQuery.xml	(revision 739123)
+++ src/test/org/apache/lucene/xmlparser/SpanQuery.xml	(arbetskopia)
@@ -15,7 +15,8 @@
 				<SpanNear slop="6" inOrder="false">		
 					<SpanTerm>mine</SpanTerm>					
 					<SpanOrTerms>worker workers</SpanOrTerms>
-				</SpanNear>
+          <BoostingTermQuery>heavy</BoostingTermQuery>
+        </SpanNear>
 			</SpanOr>
 	</SpanNear>	
 	<SpanFirst end="10">
Index: src/test/org/apache/lucene/xmlparser/BoostingTermQuery.xml
===================================================================
--- src/test/org/apache/lucene/xmlparser/BoostingTermQuery.xml	(revision 0)
+++ src/test/org/apache/lucene/xmlparser/BoostingTermQuery.xml	(revision 0)
@@ -0,0 +1,2 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<BoostingTermQuery fieldName="contents">sumitomo</BoostingTermQuery>
Index: src/test/org/apache/lucene/xmlparser/TestParser.java
===================================================================
--- src/test/org/apache/lucene/xmlparser/TestParser.java	(revision 739123)
+++ src/test/org/apache/lucene/xmlparser/TestParser.java	(arbetskopia)
@@ -1,9 +1,6 @@
 package org.apache.lucene.xmlparser;
 
-import java.io.BufferedReader;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.InputStreamReader;
+import java.io.*;
 
 import junit.framework.TestCase;
 
@@ -74,7 +71,7 @@
 				line=d.readLine();
 			}			
 			d.close();
-                        writer.close();
+      writer.close();
 		}
 		reader=IndexReader.open(dir);
 		searcher=new IndexSearcher(reader);
@@ -148,8 +145,13 @@
 			Query q=parse("TermsFilterQuery.xml");
 			dumpResults("Terms Filter",q, 5);
 	}
-	public void testSpanTermXML() throws Exception
+  public void testBoostingTermQueryXML() throws Exception
 	{
+			Query q=parse("BoostingTermQuery.xml");
+			dumpResults("BoostingTermQuery",q, 5);
+	}
+  public void testSpanTermXML() throws Exception
+	{
 			Query q=parse("SpanQuery.xml");
 			dumpResults("Span Query",q, 5);
 	}
Index: src/java/org/apache/lucene/xmlparser/CoreParser.java
===================================================================
--- src/java/org/apache/lucene/xmlparser/CoreParser.java	(revision 739123)
+++ src/java/org/apache/lucene/xmlparser/CoreParser.java	(arbetskopia)
@@ -8,22 +8,7 @@
 import org.apache.lucene.analysis.Analyzer;
 import org.apache.lucene.queryParser.QueryParser;
 import org.apache.lucene.search.Query;
-import org.apache.lucene.xmlparser.builders.BooleanQueryBuilder;
-import org.apache.lucene.xmlparser.builders.ConstantScoreQueryBuilder;
-import org.apache.lucene.xmlparser.builders.FilteredQueryBuilder;
-import org.apache.lucene.xmlparser.builders.MatchAllDocsQueryBuilder;
-import org.apache.lucene.xmlparser.builders.CachedFilterBuilder;
-import org.apache.lucene.xmlparser.builders.RangeFilterBuilder;
-import org.apache.lucene.xmlparser.builders.SpanFirstBuilder;
-import org.apache.lucene.xmlparser.builders.SpanNearBuilder;
-import org.apache.lucene.xmlparser.builders.SpanNotBuilder;
-import org.apache.lucene.xmlparser.builders.SpanOrBuilder;
-import org.apache.lucene.xmlparser.builders.SpanOrTermsBuilder;
-import org.apache.lucene.xmlparser.builders.SpanQueryBuilderFactory;
-import org.apache.lucene.xmlparser.builders.SpanTermBuilder;
-import org.apache.lucene.xmlparser.builders.TermQueryBuilder;
-import org.apache.lucene.xmlparser.builders.TermsQueryBuilder;
-import org.apache.lucene.xmlparser.builders.UserInputQueryBuilder;
+import org.apache.lucene.xmlparser.builders.*;
 import org.w3c.dom.Document;
 import org.w3c.dom.Element;
 
@@ -113,7 +98,11 @@
 		sqof.addBuilder("SpanNear",snb);
 		queryFactory.addBuilder("SpanNear",snb);
 
-		SpanTermBuilder snt=new SpanTermBuilder();
+    BoostingTermBuilder btb=new BoostingTermBuilder();
+    sqof.addBuilder("BoostingTermQuery",btb);
+    queryFactory.addBuilder("BoostingTermQuery",btb);        
+
+    SpanTermBuilder snt=new SpanTermBuilder();
 		sqof.addBuilder("SpanTerm",snt);
 		queryFactory.addBuilder("SpanTerm",snt);
 		
Index: src/java/org/apache/lucene/xmlparser/builders/BoostingTermBuilder.java
===================================================================
--- src/java/org/apache/lucene/xmlparser/builders/BoostingTermBuilder.java	(revision 0)
+++ src/java/org/apache/lucene/xmlparser/builders/BoostingTermBuilder.java	(revision 0)
@@ -0,0 +1,41 @@
+package org.apache.lucene.xmlparser.builders;
+
+import org.apache.lucene.index.Term;
+import org.apache.lucene.search.spans.SpanQuery;
+import org.apache.lucene.search.spans.SpanTermQuery;
+import org.apache.lucene.search.payloads.BoostingTermQuery;
+import org.apache.lucene.xmlparser.DOMUtils;
+import org.apache.lucene.xmlparser.ParserException;
+import org.w3c.dom.Element;
+
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+public class BoostingTermBuilder extends SpanBuilderBase
+{
+
+	public SpanQuery getSpanQuery(Element e) throws ParserException
+	{
+ 		String fieldName=DOMUtils.getAttributeWithInheritanceOrFail(e,"fieldName");
+ 		String value=DOMUtils.getNonBlankTextOrFail(e);
+  		BoostingTermQuery btq = new BoostingTermQuery(new Term(fieldName,value));
+
+  		btq.setBoost(DOMUtils.getAttribute(e,"boost",1.0f));
+		return btq;
+
+	}
+
+}
\ No newline at end of file
