Index: src/java/org/apache/lucene/search/FieldSortedHitQueue.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene/src/java/org/apache/lucene/search/FieldSortedHitQueue.java,v
retrieving revision 1.12
diff -u -r1.12 FieldSortedHitQueue.java
--- src/java/org/apache/lucene/search/FieldSortedHitQueue.java	18 Sep 2004 18:21:17 -0000	1.12
+++ src/java/org/apache/lucene/search/FieldSortedHitQueue.java	29 Sep 2004 09:52:47 -0000
@@ -200,10 +200,9 @@
   static ScoreDocComparator comparatorInt (final IndexReader reader, final String fieldname)
   throws IOException {
     final String field = fieldname.intern();
+    final int[] fieldOrder = FieldCache.DEFAULT.getInts (reader, field);
     return new ScoreDocComparator() {
 
-      final int[] fieldOrder = FieldCache.DEFAULT.getInts (reader, field);
-
       public final int compare (final ScoreDoc i, final ScoreDoc j) {
         final int fi = fieldOrder[i.doc];
         final int fj = fieldOrder[j.doc];
@@ -232,10 +231,9 @@
   static ScoreDocComparator comparatorFloat (final IndexReader reader, final String fieldname)
   throws IOException {
     final String field = fieldname.intern();
+    final float[] fieldOrder = FieldCache.DEFAULT.getFloats (reader, field);
     return new ScoreDocComparator () {
 
-      protected final float[] fieldOrder = FieldCache.DEFAULT.getFloats (reader, field);
-
       public final int compare (final ScoreDoc i, final ScoreDoc j) {
         final float fi = fieldOrder[i.doc];
         final float fj = fieldOrder[j.doc];
@@ -264,8 +262,8 @@
   static ScoreDocComparator comparatorString (final IndexReader reader, final String fieldname)
   throws IOException {
     final String field = fieldname.intern();
+    final FieldCache.StringIndex index = FieldCache.DEFAULT.getStringIndex (reader, field);
     return new ScoreDocComparator () {
-      final FieldCache.StringIndex index = FieldCache.DEFAULT.getStringIndex (reader, field);
 
       public final int compare (final ScoreDoc i, final ScoreDoc j) {
         final int fi = index.order[i.doc];
@@ -296,8 +294,8 @@
   throws IOException {
     final Collator collator = Collator.getInstance (locale);
     final String field = fieldname.intern();
+    final String[] index = FieldCache.DEFAULT.getStrings (reader, field);
     return new ScoreDocComparator() {
-      final String[] index = FieldCache.DEFAULT.getStrings (reader, field);
 
       public final int compare (final ScoreDoc i, final ScoreDoc j) {
         return collator.compare (index[i.doc], index[j.doc]);
