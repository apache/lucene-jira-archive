Index: lucene/src/test/org/apache/lucene/analysis/BaseTokenStreamTestCase.java
===================================================================
--- lucene/src/test/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(revision 1004457)
+++ lucene/src/test/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(working copy)
@@ -115,8 +115,12 @@
         assertEquals("endOffset "+i, endOffsets[i], offsetAtt.endOffset());
       if (types != null)
         assertEquals("type "+i, types[i], typeAtt.type());
-      if (posIncrements != null)
-        assertEquals("posIncrement "+i, posIncrements[i], posIncrAtt.getPositionIncrement());
+      if (posIncrements != null) {
+        int pos = posIncrAtt.getPositionIncrement();
+        if (i == 0)
+          assertTrue("senseless position increment: " + pos, pos > 0);
+        assertEquals("posIncrement "+i, posIncrements[i], pos);
+      }
     }
     assertFalse("end of stream", ts.incrementToken());
     ts.end();
