Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1309207)
+++ lucene/common-build.xml	(working copy)
@@ -201,6 +201,9 @@
   <property name="clover.db.dir" location="${common.dir}/build/test/clover/db"/>
   <property name="clover.report.dir" location="${common.dir}/build/test/clover/reports"/>
 
+  <!-- a reasonable default exclusion set, can be overridden for special cases -->
+  <property name="rat.excludes" value="**/TODO,**/*.txt"/>
+
   <available
             property="clover.present"
             classname="com.cenqua.clover.tasks.CloverReportTask"
@@ -908,12 +911,31 @@
   <target name="rat-sources" depends="rat-sources-typedef"
 	  description="runs the tasks over source and test files">
     <rat:report xmlns:rat="antlib:org.apache.rat.anttasks">
-      <fileset dir="${src.dir}"/>
-      <fileset dir="${tests-framework.src.dir}"/>
-      <fileset dir="${tests.src.dir}" erroronmissingdir="false"/>
+      <fileset dir="${src.dir}" excludes="${rat.excludes}"/>
+      <fileset dir="${tests-framework.src.dir}" excludes="${rat.excludes}"/>
+      <fileset dir="${tests.src.dir}" excludes="${rat.excludes}" erroronmissingdir="false"/>
       <!-- some modules have a src/tools/[java,test] -->
-      <fileset dir="src/tools/java" erroronmissingdir="false"/>
-      <fileset dir="src/tools/test" erroronmissingdir="false"/>
+      <fileset dir="src/tools/java" excludes="${rat.excludes}" erroronmissingdir="false"/>
+      <fileset dir="src/tools/test" excludes="${rat.excludes}" erroronmissingdir="false"/>
+      
+      <!-- brics automaton, not detected as BSD, probably because of single quotes 
+           instead of double quotes? -->
+      <rat:substringMatcher licenseFamilyCategory="BSD  "
+             licenseFamilyName="Modified BSD License">
+        <pattern substring="Copyright (c) 2001-2009 Anders Moeller"/>
+      </rat:substringMatcher>
+
+      <!-- svg files generated by gnuplot -->
+      <rat:substringMatcher licenseFamilyCategory="GEN  "
+             licenseFamilyName="Generated">
+        <pattern substring="Produced by GNUPLOT"/>
+      </rat:substringMatcher>
+
+      <!-- built in approved licenses -->
+      <rat:approvedLicense familyName="Apache License Version 2.0"/>
+      <rat:approvedLicense familyName="The MIT License"/>
+      <rat:approvedLicense familyName="Modified BSD License"/>
+      <rat:approvedLicense familyName="Generated"/>
     </rat:report>
   </target>
 
