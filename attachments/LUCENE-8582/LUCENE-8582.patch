From 8f7f97296a33548abc1bf2a3f335e8403c2c29cc Mon Sep 17 00:00:00 2001
From: Namgyu Kim <kng0828@gmail.com>
Date: Sat, 1 Dec 2018 03:49:18 +0900
Subject: [PATCH] LUCENE-8582: Set parent class of DutchAnalyzer to
 StopwordAnalyzerBase

Signed-off-by: Namgyu Kim <kng0828@gmail.com>
---
 .../apache/lucene/analysis/nl/DutchAnalyzer.java   | 14 ++++----------
 1 file changed, 4 insertions(+), 10 deletions(-)

diff --git a/lucene/analysis/common/src/java/org/apache/lucene/analysis/nl/DutchAnalyzer.java b/lucene/analysis/common/src/java/org/apache/lucene/analysis/nl/DutchAnalyzer.java
index bc4afc77d3..5867ad2351 100644
--- a/lucene/analysis/common/src/java/org/apache/lucene/analysis/nl/DutchAnalyzer.java
+++ b/lucene/analysis/common/src/java/org/apache/lucene/analysis/nl/DutchAnalyzer.java
@@ -26,6 +26,7 @@ import org.apache.lucene.analysis.CharArrayMap;
 import org.apache.lucene.analysis.CharArraySet;
 import org.apache.lucene.analysis.LowerCaseFilter;
 import org.apache.lucene.analysis.StopFilter;
+import org.apache.lucene.analysis.StopwordAnalyzerBase;
 import org.apache.lucene.analysis.TokenStream;
 import org.apache.lucene.analysis.Tokenizer;
 import org.apache.lucene.analysis.WordlistLoader;
@@ -50,8 +51,7 @@ import org.apache.lucene.util.IOUtils;
  *
  * @since 3.1
  */
-// TODO: extend StopwordAnalyzerBase
-public final class DutchAnalyzer extends Analyzer {
+public final class DutchAnalyzer extends StopwordAnalyzerBase {
   
   /** File containing default Dutch stopwords. */
   public final static String DEFAULT_STOPWORD_FILE = "dutch_stop.txt";
@@ -85,12 +85,6 @@ public final class DutchAnalyzer extends Analyzer {
     }
   }
 
-
-  /**
-   * Contains the stopwords used with the StopFilter.
-   */
-  private final CharArraySet stoptable;
-
   /**
    * Contains words that should be indexed but not stemmed.
    */
@@ -116,7 +110,7 @@ public final class DutchAnalyzer extends Analyzer {
   }
   
   public DutchAnalyzer(CharArraySet stopwords, CharArraySet stemExclusionTable, CharArrayMap<String> stemOverrideDict) {
-    this.stoptable = CharArraySet.unmodifiableSet(CharArraySet.copy(stopwords));
+    super(stopwords);
     this.excltable = CharArraySet.unmodifiableSet(CharArraySet.copy(stemExclusionTable));
     if (stemOverrideDict.isEmpty()) {
       this.stemdict = null;
@@ -151,7 +145,7 @@ public final class DutchAnalyzer extends Analyzer {
   protected TokenStreamComponents createComponents(String fieldName) {
     final Tokenizer source = new StandardTokenizer();
     TokenStream result = new LowerCaseFilter(source);
-    result = new StopFilter(result, stoptable);
+    result = new StopFilter(result, stopwords);
     if (!excltable.isEmpty())
       result = new SetKeywordMarkerFilter(result, excltable);
     if (stemdict != null)
-- 
2.18.0.windows.1

