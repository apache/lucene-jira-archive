diff --git a/lucene/analysis/common/src/test/org/apache/lucene/analysis/synonym/TestSynonymGraphFilter.java b/lucene/analysis/common/src/test/org/apache/lucene/analysis/synonym/TestSynonymGraphFilter.java
index 730d00a..f1e01f6 100644
--- a/lucene/analysis/common/src/test/org/apache/lucene/analysis/synonym/TestSynonymGraphFilter.java
+++ b/lucene/analysis/common/src/test/org/apache/lucene/analysis/synonym/TestSynonymGraphFilter.java
@@ -21,6 +21,7 @@ import java.io.IOException;
 import java.io.StringReader;
 import java.text.ParseException;
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.HashSet;
 import java.util.List;
 import java.util.Locale;
@@ -1389,9 +1390,9 @@ public class TestSynonymGraphFilter extends BaseTokenStreamTestCase {
         int count = syn1.out.length;
         boolean keepOrig = syn1.keepOrig;
         for(int j=0;j<synCount;j++) {
-          OneSyn syn2 = syns.get(i);
+          OneSyn syn2 = syns.get(j);
           keepOrig |= syn2.keepOrig;
-          if (syn1.in.equals(syn2.in)) {
+          if (Arrays.equals(syn1.in,syn2.in)) {
             count += syn2.out.length;
           }
         }
diff --git a/lucene/core/src/test/org/apache/lucene/util/TestBytesRef.java b/lucene/core/src/test/org/apache/lucene/util/TestBytesRef.java
index 3a5bb53..8209d38 100644
--- a/lucene/core/src/test/org/apache/lucene/util/TestBytesRef.java
+++ b/lucene/core/src/test/org/apache/lucene/util/TestBytesRef.java
@@ -20,7 +20,7 @@ package org.apache.lucene.util;
 public class TestBytesRef extends LuceneTestCase {
   public void testEmpty() {
     BytesRef b = new BytesRef();
-    assertEquals(BytesRef.EMPTY_BYTES, b.bytes);
+    assertSame(BytesRef.EMPTY_BYTES, b.bytes);
     assertEquals(0, b.offset);
     assertEquals(0, b.length);
   }
@@ -28,7 +28,7 @@ public class TestBytesRef extends LuceneTestCase {
   public void testFromBytes() {
     byte bytes[] = new byte[] { (byte)'a', (byte)'b', (byte)'c', (byte)'d' };
     BytesRef b = new BytesRef(bytes);
-    assertEquals(bytes, b.bytes);
+    assertSame(bytes, b.bytes);
     assertEquals(0, b.offset);
     assertEquals(4, b.length);
     
diff --git a/lucene/core/src/test/org/apache/lucene/util/TestIntsRef.java b/lucene/core/src/test/org/apache/lucene/util/TestIntsRef.java
index b997659..9167c7a 100644
--- a/lucene/core/src/test/org/apache/lucene/util/TestIntsRef.java
+++ b/lucene/core/src/test/org/apache/lucene/util/TestIntsRef.java
@@ -20,7 +20,7 @@ package org.apache.lucene.util;
 public class TestIntsRef extends LuceneTestCase {
   public void testEmpty() {
     IntsRef i = new IntsRef();
-    assertEquals(IntsRef.EMPTY_INTS, i.ints);
+    assertSame(IntsRef.EMPTY_INTS, i.ints);
     assertEquals(0, i.offset);
     assertEquals(0, i.length);
   }
@@ -28,7 +28,7 @@ public class TestIntsRef extends LuceneTestCase {
   public void testFromInts() {
     int ints[] = new int[] { 1, 2, 3, 4 };
     IntsRef i = new IntsRef(ints, 0, 4);
-    assertEquals(ints, i.ints);
+    assertSame(ints, i.ints);
     assertEquals(0, i.offset);
     assertEquals(4, i.length);
     
