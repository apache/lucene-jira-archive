Index: solr/common-build.xml
===================================================================
--- solr/common-build.xml	(revision 1138667)
+++ solr/common-build.xml	(working copy)
@@ -199,7 +199,8 @@
     <pathelement location="${common-solr.dir}/../lucene/build/contrib/queries/classes/java" />
     <pathelement location="${common-solr.dir}/../lucene/build/contrib/spatial/classes/java" />
     <pathelement location="${common-solr.dir}/../modules/grouping/build/classes/java" />
-  </path>   
+    <pathelement location="${common-solr.dir}/../modules/common/build/classes/java" />
+  </path>
 
   <target name="prep-lucene-jars">
     <sequential>
@@ -216,6 +217,7 @@
         <fileset dir="../lucene/contrib/queries" includes="build.xml" />
         <fileset dir="../lucene/contrib/spatial" includes="build.xml" />
         <fileset dir="../modules/grouping" includes="build.xml" />
+        <fileset dir="../modules/common" includes="build.xml" />
       </subant>
     </sequential>
   </target>
@@ -253,6 +255,9 @@
       <fileset dir="../modules/grouping/build">
         <include name="lucene-grouping-${version}.jar" />
       </fileset>
+      <fileset dir="../modules/common/build">
+        <include name="lucene-queries-${version}.jar" />
+      </fileset>
       </copy>
   </target>  
   
@@ -268,6 +273,7 @@
       <fileset dir="../lucene/contrib/queries" includes="build.xml"/>
       <fileset dir="../lucene/contrib/spatial" includes="build.xml"/>
       <fileset dir="../modules/grouping" includes="build.xml"/>
+      <fileset dir="../modules/common" includes="build.xml"/>
     </subant>
   </target>
    
Index: solr/src/java/org/apache/solr/schema/BoolField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/BoolField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/BoolField.java	(working copy)
@@ -17,14 +17,13 @@
 
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueBool;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.search.FieldCache;
 import org.apache.lucene.search.SortField;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueBool;
-import org.apache.solr.search.MutableValueInt;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.*;
 import org.apache.lucene.analysis.Analyzer;
Index: solr/src/java/org/apache/solr/schema/TrieField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/TrieField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/TrieField.java	(working copy)
@@ -16,6 +16,8 @@
  */
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValueDate;
+import org.apache.lucene.common.mutable.MutableValueLong;
 import org.apache.lucene.document.Fieldable;
 import org.apache.lucene.document.Field;
 import org.apache.lucene.document.NumericField;
@@ -31,8 +33,6 @@
 import org.apache.solr.analysis.*;
 import org.apache.solr.common.SolrException;
 import org.apache.solr.response.TextResponseWriter;
-import org.apache.solr.search.MutableValueDate;
-import org.apache.solr.search.MutableValueLong;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.*;
 
Index: solr/src/java/org/apache/solr/schema/SortableDoubleField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/SortableDoubleField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/SortableDoubleField.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueDouble;
 import org.apache.lucene.search.SortField;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValueDouble;
-import org.apache.solr.search.MutableValue;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.ValueSource;
 import org.apache.solr.search.function.FieldCacheSource;
Index: solr/src/java/org/apache/solr/schema/SortableLongField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/SortableLongField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/SortableLongField.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueLong;
 import org.apache.lucene.search.SortField;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValueLong;
-import org.apache.solr.search.MutableValue;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.ValueSource;
 import org.apache.solr.search.function.FieldCacheSource;
Index: solr/src/java/org/apache/solr/schema/SortableFloatField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/SortableFloatField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/SortableFloatField.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueFloat;
 import org.apache.lucene.search.SortField;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValueFloat;
-import org.apache.solr.search.MutableValue;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.ValueSource;
 import org.apache.solr.search.function.FieldCacheSource;
Index: solr/src/java/org/apache/solr/schema/SortableIntField.java
===================================================================
--- solr/src/java/org/apache/solr/schema/SortableIntField.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/schema/SortableIntField.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.schema;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueInt;
 import org.apache.lucene.search.SortField;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValueInt;
-import org.apache.solr.search.MutableValue;
 import org.apache.solr.search.QParser;
 import org.apache.solr.search.function.ValueSource;
 import org.apache.solr.search.function.FieldCacheSource;
Index: solr/src/java/org/apache/solr/search/function/DoubleFieldSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/DoubleFieldSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/DoubleFieldSource.java	(working copy)
@@ -17,13 +17,13 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueDouble;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.util.Bits;
 import org.apache.lucene.search.cache.DoubleValuesCreator;
 import org.apache.lucene.search.cache.CachedArray.DoubleValues;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueDouble;
 
 import java.io.IOException;
 import java.util.Map;
Index: solr/src/java/org/apache/solr/search/function/IntDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/IntDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/IntDocValues.java	(working copy)
@@ -1,8 +1,9 @@
 package org.apache.solr.search.function;
 
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueInt;
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueInt;
 
+
 public abstract class IntDocValues extends DocValues {
   protected final ValueSource vs;
 
Index: solr/src/java/org/apache/solr/search/function/BoolDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/BoolDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/BoolDocValues.java	(working copy)
@@ -1,9 +1,9 @@
 package org.apache.solr.search.function;
 
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueBool;
-import org.apache.solr.search.MutableValueInt;
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueBool;
 
+
 public abstract class BoolDocValues extends DocValues {
   protected final ValueSource vs;
 
Index: solr/src/java/org/apache/solr/search/function/StrDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/StrDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/StrDocValues.java	(working copy)
@@ -1,9 +1,8 @@
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueStr;
 import org.apache.lucene.util.BytesRef;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueFloat;
-import org.apache.solr.search.MutableValueStr;
 
 public abstract class StrDocValues extends DocValues {
   protected final ValueSource vs;
Index: solr/src/java/org/apache/solr/search/function/DoubleDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/DoubleDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/DoubleDocValues.java	(working copy)
@@ -1,7 +1,7 @@
 package org.apache.solr.search.function;
 
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueDouble;
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueDouble;
 
 public abstract class DoubleDocValues extends DocValues {
   protected final ValueSource vs;
Index: solr/src/java/org/apache/solr/search/function/QueryValueSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/QueryValueSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/QueryValueSource.java	(working copy)
@@ -17,14 +17,14 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueFloat;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.search.*;
 import org.apache.lucene.search.Weight.ScorerContext;
 import org.apache.lucene.util.ReaderUtil;
 import org.apache.solr.common.SolrException;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueFloat;
 
 import java.io.IOException;
 import java.util.Map;
Index: solr/src/java/org/apache/solr/search/function/LongFieldSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/LongFieldSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/LongFieldSource.java	(working copy)
@@ -17,13 +17,13 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueLong;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.util.Bits;
 import org.apache.lucene.search.cache.LongValuesCreator;
 import org.apache.lucene.search.cache.CachedArray.LongValues;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueLong;
 
 
 import java.io.IOException;
Index: solr/src/java/org/apache/solr/search/function/DocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/DocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/DocValues.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueFloat;
 import org.apache.lucene.search.*;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.util.BytesRef;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueFloat;
 
 /**
  * Represents field values as different types.
Index: solr/src/java/org/apache/solr/search/function/FloatFieldSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/FloatFieldSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/FloatFieldSource.java	(working copy)
@@ -20,12 +20,12 @@
 import java.io.IOException;
 import java.util.Map;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueFloat;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.util.Bits;
 import org.apache.lucene.search.cache.FloatValuesCreator;
 import org.apache.lucene.search.cache.CachedArray.FloatValues;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueFloat;
 
 /**
  * Obtains float field values from the {@link org.apache.lucene.search.FieldCache}
Index: solr/src/java/org/apache/solr/search/function/StringIndexDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/StringIndexDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/StringIndexDocValues.java	(working copy)
@@ -17,13 +17,13 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueStr;
 import org.apache.lucene.search.FieldCache;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.util.BytesRef;
 import org.apache.lucene.util.CharsRef;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueStr;
 
 import java.io.IOException;
 
Index: solr/src/java/org/apache/solr/search/function/LongDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/LongDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/LongDocValues.java	(working copy)
@@ -1,8 +1,9 @@
 package org.apache.solr.search.function;
 
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueLong;
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueLong;
 
+
 public abstract class LongDocValues extends DocValues {
   protected final ValueSource vs;
 
Index: solr/src/java/org/apache/solr/search/function/OrdFieldSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/OrdFieldSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/OrdFieldSource.java	(working copy)
@@ -17,12 +17,12 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueInt;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.search.FieldCache;
 import org.apache.lucene.util.ReaderUtil;
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueInt;
 
 import java.io.IOException;
 import java.util.Map;
Index: solr/src/java/org/apache/solr/search/function/FloatDocValues.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/FloatDocValues.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/FloatDocValues.java	(working copy)
@@ -1,7 +1,7 @@
 package org.apache.solr.search.function;
 
-import org.apache.solr.search.MutableValue;
-import org.apache.solr.search.MutableValueFloat;
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueFloat;
 
 public abstract class FloatDocValues extends DocValues {
   protected final ValueSource vs;
Index: solr/src/java/org/apache/solr/search/function/IntFieldSource.java
===================================================================
--- solr/src/java/org/apache/solr/search/function/IntFieldSource.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/function/IntFieldSource.java	(working copy)
@@ -17,11 +17,11 @@
 
 package org.apache.solr.search.function;
 
+import org.apache.lucene.common.mutable.MutableValue;
+import org.apache.lucene.common.mutable.MutableValueInt;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.util.Bits;
-import org.apache.solr.search.MutableValueInt;
-import org.apache.solr.search.MutableValue;
 import org.apache.lucene.search.cache.IntValuesCreator;
 import org.apache.lucene.search.cache.CachedArray.IntValues;
 
Index: solr/src/java/org/apache/solr/search/MutableValueLong.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueDouble.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueInt.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueBool.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueFloat.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueStr.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValueDate.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/MutableValue.java (deleted)
===================================================================
Index: solr/src/java/org/apache/solr/search/Grouping.java
===================================================================
--- solr/src/java/org/apache/solr/search/Grouping.java	(revision 1138667)
+++ solr/src/java/org/apache/solr/search/Grouping.java	(working copy)
@@ -18,6 +18,7 @@
 package org.apache.solr.search;
 
 import org.apache.commons.lang.ArrayUtils;
+import org.apache.lucene.common.mutable.MutableValue;
 import org.apache.lucene.document.Fieldable;
 import org.apache.lucene.index.IndexReader.AtomicReaderContext;
 import org.apache.lucene.queryParser.ParseException;
Index: modules/common/NOTICE.txt
===================================================================
--- modules/common/NOTICE.txt	(revision 0)
+++ modules/common/NOTICE.txt	(revision 0)
@@ -0,0 +1,5 @@
+Apache Lucene Common
+Copyright 2011 The Apache Software Foundation
+
+This product includes software developed by
+The Apache Software Foundation (http://www.apache.org/).
Index: modules/common/LICENSE.txt
===================================================================
--- modules/common/LICENSE.txt	(revision 0)
+++ modules/common/LICENSE.txt	(revision 0)
@@ -0,0 +1,202 @@
+
+                                 Apache License
+                           Version 2.0, January 2004
+                        http://www.apache.org/licenses/
+
+   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
+
+   1. Definitions.
+
+      "License" shall mean the terms and conditions for use, reproduction,
+      and distribution as defined by Sections 1 through 9 of this document.
+
+      "Licensor" shall mean the copyright owner or entity authorized by
+      the copyright owner that is granting the License.
+
+      "Legal Entity" shall mean the union of the acting entity and all
+      other entities that control, are controlled by, or are under common
+      control with that entity. For the purposes of this definition,
+      "control" means (i) the power, direct or indirect, to cause the
+      direction or management of such entity, whether by contract or
+      otherwise, or (ii) ownership of fifty percent (50%) or more of the
+      outstanding shares, or (iii) beneficial ownership of such entity.
+
+      "You" (or "Your") shall mean an individual or Legal Entity
+      exercising permissions granted by this License.
+
+      "Source" form shall mean the preferred form for making modifications,
+      including but not limited to software source code, documentation
+      source, and configuration files.
+
+      "Object" form shall mean any form resulting from mechanical
+      transformation or translation of a Source form, including but
+      not limited to compiled object code, generated documentation,
+      and conversions to other media types.
+
+      "Work" shall mean the work of authorship, whether in Source or
+      Object form, made available under the License, as indicated by a
+      copyright notice that is included in or attached to the work
+      (an example is provided in the Appendix below).
+
+      "Derivative Works" shall mean any work, whether in Source or Object
+      form, that is based on (or derived from) the Work and for which the
+      editorial revisions, annotations, elaborations, or other modifications
+      represent, as a whole, an original work of authorship. For the purposes
+      of this License, Derivative Works shall not include works that remain
+      separable from, or merely link (or bind by name) to the interfaces of,
+      the Work and Derivative Works thereof.
+
+      "Contribution" shall mean any work of authorship, including
+      the original version of the Work and any modifications or additions
+      to that Work or Derivative Works thereof, that is intentionally
+      submitted to Licensor for inclusion in the Work by the copyright owner
+      or by an individual or Legal Entity authorized to submit on behalf of
+      the copyright owner. For the purposes of this definition, "submitted"
+      means any form of electronic, verbal, or written communication sent
+      to the Licensor or its representatives, including but not limited to
+      communication on electronic mailing lists, source code control systems,
+      and issue tracking systems that are managed by, or on behalf of, the
+      Licensor for the purpose of discussing and improving the Work, but
+      excluding communication that is conspicuously marked or otherwise
+      designated in writing by the copyright owner as "Not a Contribution."
+
+      "Contributor" shall mean Licensor and any individual or Legal Entity
+      on behalf of whom a Contribution has been received by Licensor and
+      subsequently incorporated within the Work.
+
+   2. Grant of Copyright License. Subject to the terms and conditions of
+      this License, each Contributor hereby grants to You a perpetual,
+      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+      copyright license to reproduce, prepare Derivative Works of,
+      publicly display, publicly perform, sublicense, and distribute the
+      Work and such Derivative Works in Source or Object form.
+
+   3. Grant of Patent License. Subject to the terms and conditions of
+      this License, each Contributor hereby grants to You a perpetual,
+      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+      (except as stated in this section) patent license to make, have made,
+      use, offer to sell, sell, import, and otherwise transfer the Work,
+      where such license applies only to those patent claims licensable
+      by such Contributor that are necessarily infringed by their
+      Contribution(s) alone or by combination of their Contribution(s)
+      with the Work to which such Contribution(s) was submitted. If You
+      institute patent litigation against any entity (including a
+      cross-claim or counterclaim in a lawsuit) alleging that the Work
+      or a Contribution incorporated within the Work constitutes direct
+      or contributory patent infringement, then any patent licenses
+      granted to You under this License for that Work shall terminate
+      as of the date such litigation is filed.
+
+   4. Redistribution. You may reproduce and distribute copies of the
+      Work or Derivative Works thereof in any medium, with or without
+      modifications, and in Source or Object form, provided that You
+      meet the following conditions:
+
+      (a) You must give any other recipients of the Work or
+          Derivative Works a copy of this License; and
+
+      (b) You must cause any modified files to carry prominent notices
+          stating that You changed the files; and
+
+      (c) You must retain, in the Source form of any Derivative Works
+          that You distribute, all copyright, patent, trademark, and
+          attribution notices from the Source form of the Work,
+          excluding those notices that do not pertain to any part of
+          the Derivative Works; and
+
+      (d) If the Work includes a "NOTICE" text file as part of its
+          distribution, then any Derivative Works that You distribute must
+          include a readable copy of the attribution notices contained
+          within such NOTICE file, excluding those notices that do not
+          pertain to any part of the Derivative Works, in at least one
+          of the following places: within a NOTICE text file distributed
+          as part of the Derivative Works; within the Source form or
+          documentation, if provided along with the Derivative Works; or,
+          within a display generated by the Derivative Works, if and
+          wherever such third-party notices normally appear. The contents
+          of the NOTICE file are for informational purposes only and
+          do not modify the License. You may add Your own attribution
+          notices within Derivative Works that You distribute, alongside
+          or as an addendum to the NOTICE text from the Work, provided
+          that such additional attribution notices cannot be construed
+          as modifying the License.
+
+      You may add Your own copyright statement to Your modifications and
+      may provide additional or different license terms and conditions
+      for use, reproduction, or distribution of Your modifications, or
+      for any such Derivative Works as a whole, provided Your use,
+      reproduction, and distribution of the Work otherwise complies with
+      the conditions stated in this License.
+
+   5. Submission of Contributions. Unless You explicitly state otherwise,
+      any Contribution intentionally submitted for inclusion in the Work
+      by You to the Licensor shall be under the terms and conditions of
+      this License, without any additional terms or conditions.
+      Notwithstanding the above, nothing herein shall supersede or modify
+      the terms of any separate license agreement you may have executed
+      with Licensor regarding such Contributions.
+
+   6. Trademarks. This License does not grant permission to use the trade
+      names, trademarks, service marks, or product names of the Licensor,
+      except as required for reasonable and customary use in describing the
+      origin of the Work and reproducing the content of the NOTICE file.
+
+   7. Disclaimer of Warranty. Unless required by applicable law or
+      agreed to in writing, Licensor provides the Work (and each
+      Contributor provides its Contributions) on an "AS IS" BASIS,
+      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
+      implied, including, without limitation, any warranties or conditions
+      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
+      PARTICULAR PURPOSE. You are solely responsible for determining the
+      appropriateness of using or redistributing the Work and assume any
+      risks associated with Your exercise of permissions under this License.
+
+   8. Limitation of Liability. In no event and under no legal theory,
+      whether in tort (including negligence), contract, or otherwise,
+      unless required by applicable law (such as deliberate and grossly
+      negligent acts) or agreed to in writing, shall any Contributor be
+      liable to You for damages, including any direct, indirect, special,
+      incidental, or consequential damages of any character arising as a
+      result of this License or out of the use or inability to use the
+      Work (including but not limited to damages for loss of goodwill,
+      work stoppage, computer failure or malfunction, or any and all
+      other commercial damages or losses), even if such Contributor
+      has been advised of the possibility of such damages.
+
+   9. Accepting Warranty or Additional Liability. While redistributing
+      the Work or Derivative Works thereof, You may choose to offer,
+      and charge a fee for, acceptance of support, warranty, indemnity,
+      or other liability obligations and/or rights consistent with this
+      License. However, in accepting such obligations, You may act only
+      on Your own behalf and on Your sole responsibility, not on behalf
+      of any other Contributor, and only if You agree to indemnify,
+      defend, and hold each Contributor harmless for any liability
+      incurred by, or claims asserted against, such Contributor by reason
+      of your accepting any such warranty or additional liability.
+
+   END OF TERMS AND CONDITIONS
+
+   APPENDIX: How to apply the Apache License to your work.
+
+      To apply the Apache License to your work, attach the following
+      boilerplate notice, with the fields enclosed by brackets "[]"
+      replaced with your own identifying information. (Don't include
+      the brackets!)  The text should be enclosed in the appropriate
+      comment syntax for the file format. We also recommend that a
+      file or class name and description of purpose be included on the
+      same "printed page" as the copyright notice for easier
+      identification within third-party archives.
+
+   Copyright [yyyy] [name of copyright owner]
+
+   Licensed under the Apache License, Version 2.0 (the "License");
+   you may not use this file except in compliance with the License.
+   You may obtain a copy of the License at
+
+       http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an "AS IS" BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueStr.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueStr.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueStr.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 import org.apache.lucene.util.BytesRef;
 
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDouble.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDouble.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDouble.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 public class MutableValueDouble extends MutableValue {
   public double value;
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueInt.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueInt.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueInt.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 public class MutableValueInt extends MutableValue {
   public int value;
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueBool.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueBool.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueBool.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 public class MutableValueBool extends MutableValue {
   public boolean value;
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDate.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDate.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueDate.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 import java.util.Date;
 
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValue.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValue.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValue.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 /** @lucene.internal */
 public abstract class MutableValue implements Comparable {
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueLong.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueLong.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueLong.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 public class MutableValueLong extends MutableValue {
   public long value;
Index: modules/common/src/java/org/apache/lucene/common/mutable/MutableValueFloat.java
===================================================================
--- modules/common/src/java/org/apache/lucene/common/mutable/MutableValueFloat.java	(revision 0)
+++ modules/common/src/java/org/apache/lucene/common/mutable/MutableValueFloat.java	(working copy)
@@ -14,7 +14,7 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
-package org.apache.solr.search;
+package org.apache.lucene.common.mutable;
 
 public class MutableValueFloat extends MutableValue {
   public float value;
Index: modules/common/build.xml
===================================================================
--- modules/common/build.xml	(revision 0)
+++ modules/common/build.xml	(revision 0)
@@ -0,0 +1,31 @@
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one or more
+  contributor license agreements.  See the NOTICE file distributed with
+  this work for additional information regarding copyright ownership.
+  The ASF licenses this file to You under the Apache License, Version 2.0
+  (the "License"); you may not use this file except in compliance with
+  the License.  You may obtain a copy of the License at
+
+      http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+  -->
+
+<project name="common" default="default">
+    <description>
+        Module containing common classes to be used by Solr and other modules
+    </description>
+
+    <property name="build.dir" location="build/" />
+    <property name="dist.dir" location="dist/" />
+    <property name="maven.dist.dir" location="../dist/maven" />
+
+    <import file="../../lucene/contrib/contrib-build.xml"/>
+    <property name="working.dir" location="work"/>
+
+    <target name="dist-maven" depends="jar-core,javadocs,contrib-build.dist-maven" />
+</project>
\ No newline at end of file
Index: modules/build.xml
===================================================================
--- modules/build.xml	(revision 1138667)
+++ modules/build.xml	(working copy)
@@ -23,6 +23,7 @@
       <subant target="test" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -34,6 +35,7 @@
       <subant target="compile" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -45,6 +47,7 @@
       <subant target="compile-test" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -56,6 +59,7 @@
       <subant target="javadocs" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -68,6 +72,7 @@
       <subant target="dist-maven" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -78,6 +83,7 @@
       <subant target="validate" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
@@ -90,6 +96,7 @@
       <subant target="clean" inheritall="false" failonerror="true">
         <fileset dir="analysis" includes="build.xml" />
         <fileset dir="benchmark" includes="build.xml" />
+        <fileset dir="common" includes="build.xml" />
         <fileset dir="grouping" includes="build.xml" />
         <fileset dir="suggest" includes="build.xml" />
       </subant>
Index: dev-tools/idea/solr/solr.iml
===================================================================
--- dev-tools/idea/solr/solr.iml	(revision 1138667)
+++ dev-tools/idea/solr/solr.iml	(working copy)
@@ -31,6 +31,7 @@
     <orderEntry type="module" module-name="phonetic" />
     <orderEntry type="module" module-name="suggest" />
     <orderEntry type="module" module-name="common" />
+    <orderEntry type="module" module-name="analysis-common" />
     <orderEntry type="module" module-name="lucene" />
   </component>
 </module>
Index: dev-tools/idea/.idea/modules.xml
===================================================================
--- dev-tools/idea/.idea/modules.xml	(revision 1138667)
+++ dev-tools/idea/.idea/modules.xml	(working copy)
@@ -14,12 +14,13 @@
       <module filepath="$PROJECT_DIR$/lucene/contrib/spatial/spatial.iml" />
       <module filepath="$PROJECT_DIR$/lucene/contrib/wordnet/wordnet.iml" />
       <module filepath="$PROJECT_DIR$/lucene/contrib/xml-query-parser/xml-query-parser.iml" />
-      <module filepath="$PROJECT_DIR$/modules/analysis/common/common.iml" />
+      <module filepath="$PROJECT_DIR$/modules/analysis/common/analysis-common.iml" />
       <module filepath="$PROJECT_DIR$/modules/analysis/icu/icu.iml" />
       <module filepath="$PROJECT_DIR$/modules/analysis/phonetic/phonetic.iml" />
       <module filepath="$PROJECT_DIR$/modules/analysis/smartcn/smartcn.iml" />
       <module filepath="$PROJECT_DIR$/modules/analysis/stempel/stempel.iml" />
       <module filepath="$PROJECT_DIR$/modules/benchmark/benchmark.iml" />
+      <module filepath="$PROJECT_DIR$/modules/common/common.iml" />
       <module filepath="$PROJECT_DIR$/modules/grouping/grouping.iml" />
       <module filepath="$PROJECT_DIR$/modules/suggest/suggest.iml" />
       <module filepath="$PROJECT_DIR$/solr/solr.iml" />
Index: dev-tools/idea/.idea/workspace.xml
===================================================================
--- dev-tools/idea/.idea/workspace.xml	(revision 1138667)
+++ dev-tools/idea/.idea/workspace.xml	(working copy)
@@ -22,9 +22,16 @@
       <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=4.0 -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
-    <configuration default="false" name="common analysis module" type="JUnit" factoryName="JUnit">
+    <configuration default="false" name="common module" type="JUnit" factoryName="JUnit">
       <module name="common" />
       <option name="TEST_OBJECT" value="package" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/modules/common/build" />
+      <option name="VM_PARAMETERS" value="-ea  -DtempDir=temp" />
+      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+    </configuration>
+    <configuration default="false" name="common analysis module" type="JUnit" factoryName="JUnit">
+      <module name="analysis-common" />
+      <option name="TEST_OBJECT" value="package" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/modules/analysis/build/common" />
       <option name="VM_PARAMETERS" value="-ea  -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
@@ -113,6 +120,13 @@
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
+    <configuration default="false" name="queries module" type="JUnit" factoryName="JUnit">
+      <module name="queries-module" />
+      <option name="TEST_OBJECT" value="package" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/modules/queries/build" />
+      <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
+      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+    </configuration>
     <configuration default="false" name="queryparser contrib" type="JUnit" factoryName="JUnit">
       <module name="queryparser" />
       <option name="TEST_OBJECT" value="package" />
@@ -176,32 +190,33 @@
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
     </configuration>
-    <list size="25">
+    <list size="26">
       <item index="0" class="java.lang.String" itemvalue="JUnit.analysis-extras contrib" />
       <item index="1" class="java.lang.String" itemvalue="JUnit.benchmark module" />
       <item index="2" class="java.lang.String" itemvalue="JUnit.clustering contrib" />
-      <item index="3" class="java.lang.String" itemvalue="JUnit.common analysis module" />
-      <item index="4" class="java.lang.String" itemvalue="JUnit.dataimporthandler contrib" />
-      <item index="5" class="java.lang.String" itemvalue="JUnit.extraction contrib" />
-      <item index="6" class="java.lang.String" itemvalue="JUnit.extras from dataimporthandler contrib" />
-      <item index="7" class="java.lang.String" itemvalue="JUnit.grouping module" />
-      <item index="8" class="java.lang.String" itemvalue="JUnit.highlighter contrib" />
-      <item index="9" class="java.lang.String" itemvalue="JUnit.icu analysis module" />
-      <item index="10" class="java.lang.String" itemvalue="JUnit.instantiated contrib" />
-      <item index="11" class="java.lang.String" itemvalue="JUnit.lucene" />
-      <item index="12" class="java.lang.String" itemvalue="JUnit.memory contrib" />
-      <item index="13" class="java.lang.String" itemvalue="JUnit.misc contrib" />
-      <item index="14" class="java.lang.String" itemvalue="JUnit.phonetic analysis module" />
-      <item index="15" class="java.lang.String" itemvalue="JUnit.queries contrib" />
-      <item index="16" class="java.lang.String" itemvalue="JUnit.queryparser contrib" />
-      <item index="17" class="java.lang.String" itemvalue="JUnit.smartcn analysis module" />
-      <item index="18" class="java.lang.String" itemvalue="JUnit.solr" />
-      <item index="19" class="java.lang.String" itemvalue="JUnit.spatial contrib" />
-      <item index="20" class="java.lang.String" itemvalue="JUnit.stempel analysis module" />
-      <item index="21" class="java.lang.String" itemvalue="JUnit.suggest module" />
-      <item index="22" class="java.lang.String" itemvalue="JUnit.uima contrib" />
-      <item index="23" class="java.lang.String" itemvalue="JUnit.wordnet contrib" />
-      <item index="24" class="java.lang.String" itemvalue="JUnit.xml-query-parser contrib" />
+      <item index="3" class="java.lang.String" itemvalue="JUnit.common module" />
+      <item index="4" class="java.lang.String" itemvalue="JUnit.common analysis module" />
+      <item index="5" class="java.lang.String" itemvalue="JUnit.dataimporthandler contrib" />
+      <item index="6" class="java.lang.String" itemvalue="JUnit.extraction contrib" />
+      <item index="7" class="java.lang.String" itemvalue="JUnit.extras from dataimporthandler contrib" />
+      <item index="8" class="java.lang.String" itemvalue="JUnit.grouping module" />
+      <item index="9" class="java.lang.String" itemvalue="JUnit.highlighter contrib" />
+      <item index="10" class="java.lang.String" itemvalue="JUnit.icu analysis module" />
+      <item index="11" class="java.lang.String" itemvalue="JUnit.instantiated contrib" />
+      <item index="12" class="java.lang.String" itemvalue="JUnit.lucene" />
+      <item index="13" class="java.lang.String" itemvalue="JUnit.memory contrib" />
+      <item index="14" class="java.lang.String" itemvalue="JUnit.misc contrib" />
+      <item index="15" class="java.lang.String" itemvalue="JUnit.phonetic analysis module" />
+      <item index="16" class="java.lang.String" itemvalue="JUnit.queries contrib" />
+      <item index="17" class="java.lang.String" itemvalue="JUnit.queryparser contrib" />
+      <item index="18" class="java.lang.String" itemvalue="JUnit.smartcn analysis module" />
+      <item index="19" class="java.lang.String" itemvalue="JUnit.solr" />
+      <item index="20" class="java.lang.String" itemvalue="JUnit.spatial contrib" />
+      <item index="21" class="java.lang.String" itemvalue="JUnit.stempel analysis module" />
+      <item index="22" class="java.lang.String" itemvalue="JUnit.suggest module" />
+      <item index="23" class="java.lang.String" itemvalue="JUnit.uima contrib" />
+      <item index="24" class="java.lang.String" itemvalue="JUnit.wordnet contrib" />
+      <item index="25" class="java.lang.String" itemvalue="JUnit.xml-query-parser contrib" />
     </list>
   </component>
 </project>
Index: dev-tools/idea/modules/analysis/common/common.iml (deleted)
===================================================================
Index: dev-tools/idea/modules/common/common.iml
===================================================================
--- dev-tools/idea/modules/common/common.iml	(revision 0)
+++ dev-tools/idea/modules/common/common.iml	(revision 0)
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/build/classes/java" />
+    <output-test url="file://$MODULE_DIR$/build/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
+      <excludeFolder url="file://$MODULE_DIR$/work" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" module-name="lucene" />
+  </component>
+</module>
Index: dev-tools/eclipse/dot.classpath
===================================================================
--- dev-tools/eclipse/dot.classpath	(revision 1138667)
+++ dev-tools/eclipse/dot.classpath	(working copy)
@@ -40,6 +40,8 @@
 	<classpathentry kind="src" path="modules/analysis/stempel/src/test"/>
 	<classpathentry kind="src" path="modules/benchmark/src/java"/>
 	<classpathentry kind="src" path="modules/benchmark/src/test"/>
+	<classpathentry kind="src" path="modules/common/src/java"/>
+	<classpathentry kind="src" path="modules/common/src/test"/>
 	<classpathentry kind="src" path="modules/grouping/src/java"/>
 	<classpathentry kind="src" path="modules/grouping/src/test"/>
 	<classpathentry kind="src" path="modules/suggest/src/java"/>
Index: dev-tools/maven/solr/src/pom.xml.template
===================================================================
--- dev-tools/maven/solr/src/pom.xml.template	(revision 1138667)
+++ dev-tools/maven/solr/src/pom.xml.template	(working copy)
@@ -97,6 +97,11 @@
       <version>${project.version}</version>
     </dependency>
     <dependency>
+      <groupId>org.apache.lucene</groupId>
+      <artifactId>lucene-common</artifactId>
+      <version>${project.version}</version>
+    <dependency>
+    <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-commons-csv</artifactId>
     </dependency>
Index: dev-tools/maven/modules/pom.xml.template
===================================================================
--- dev-tools/maven/modules/pom.xml.template	(revision 1138667)
+++ dev-tools/maven/modules/pom.xml.template	(working copy)
@@ -33,6 +33,7 @@
   <modules>
     <module>analysis</module>
     <module>benchmark</module>
+    <module>common</module>
     <module>grouping</module>
     <module>suggest</module>
   </modules>
Index: dev-tools/maven/modules/common/pom.xml.template
===================================================================
--- dev-tools/maven/modules/common/pom.xml.template	(revision 0)
+++ dev-tools/maven/modules/common/pom.xml.template	(revision 0)
@@ -0,0 +1,66 @@
+<project xmlns="http://maven.apache.org/POM/4.0.0"
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
+  <!--
+    Licensed to the Apache Software Foundation (ASF) under one
+    or more contributor license agreements.  See the NOTICE file
+    distributed with this work for additional information
+    regarding copyright ownership.  The ASF licenses this file
+    to you under the Apache License, Version 2.0 (the
+    "License"); you may not use this file except in compliance
+    with the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing,
+    software distributed under the License is distributed on an
+    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+    KIND, either express or implied.  See the License for the
+    specific language governing permissions and limitations
+    under the License.
+  -->
+  <modelVersion>4.0.0</modelVersion>
+  <parent>
+    <groupId>org.apache.lucene</groupId>
+    <artifactId>lucene-parent</artifactId>
+    <version>@version@</version>
+    <relativePath>../../lucene/pom.xml</relativePath>
+  </parent>
+  <groupId>org.apache.lucene</groupId>
+  <artifactId>lucene-common</artifactId>
+  <packaging>jar</packaging>
+  <name>Lucene Common</name>
+  <description>Lucene Common Module</description>
+  <properties>
+    <module-directory>modules/common</module-directory>
+    <build-directory>build</build-directory>
+  </properties>
+  <dependencies>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>lucene-test-framework</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>junit</groupId>
+      <artifactId>junit</artifactId>
+      <scope>test</scope>
+    </dependency>
+  </dependencies>
+  <build>
+    <directory>${build-directory}</directory>
+    <outputDirectory>${build-directory}/classes/java</outputDirectory>
+    <testOutputDirectory>${build-directory}/classes/test</testOutputDirectory>
+    <sourceDirectory>src/java</sourceDirectory>
+    <testSourceDirectory>src/test</testSourceDirectory>
+    <testResources>
+      <testResource>
+        <directory>${project.build.testSourceDirectory}</directory>
+        <excludes>
+          <exclude>**/*.java</exclude>
+        </excludes>
+      </testResource>
+    </testResources>
+  </build>
+</project>
