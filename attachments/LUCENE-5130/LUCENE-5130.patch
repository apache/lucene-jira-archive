Index: lucene/analysis/common/build.xml
===================================================================
--- lucene/analysis/common/build.xml	(revision 1506547)
+++ lucene/analysis/common/build.xml	(working copy)
@@ -56,6 +56,11 @@
     <replaceregexp file="src/java/org/apache/lucene/analysis/charfilter/HTMLStripCharFilter.java"
                    match="\/\*\s*The following code was generated by JFlex.*"
                    replace="\/\* The following code was generated by JFlex. \*\/" flags=""/>
+    <!-- this suppression was enabled before, why does jflex create fallthrus with the grammar?!
+         if we put it in the .jflex file, it screws up javadocs, so inject it here in generation -->
+    <replaceregexp file="src/java/org/apache/lucene/analysis/charfilter/HTMLStripCharFilter.java"
+                   match="(public final class.*)"
+                   replace="@SuppressWarnings(&quot;fallthrough&quot;) \1" flags=""/>
   </target>
 
   <target name="generate-jflex-html-char-entities">
Index: lucene/analysis/common/src/java/org/apache/lucene/analysis/charfilter/HTMLStripCharFilter.java
===================================================================
--- lucene/analysis/common/src/java/org/apache/lucene/analysis/charfilter/HTMLStripCharFilter.java	(revision 1506547)
+++ lucene/analysis/common/src/java/org/apache/lucene/analysis/charfilter/HTMLStripCharFilter.java	(working copy)
@@ -35,7 +35,7 @@
  * A CharFilter that wraps another Reader and attempts to strip out HTML constructs.
  */
 
-public final class HTMLStripCharFilter extends BaseCharFilter {
+@SuppressWarnings("fallthrough") public final class HTMLStripCharFilter extends BaseCharFilter {
 
   /** This character denotes the end of file */
   private static final int YYEOF = -1;
Index: lucene/analysis/common/src/java/org/tartarus/snowball/Among.java
===================================================================
--- lucene/analysis/common/src/java/org/tartarus/snowball/Among.java	(revision 1506547)
+++ lucene/analysis/common/src/java/org/tartarus/snowball/Among.java	(working copy)
@@ -43,7 +43,7 @@
  * reflection calls (Lovins, etc) use EMPTY_ARGS/EMPTY_PARAMS
  */
 public class Among {
-  private static final Class<?>[] EMPTY_PARAMS = new Class[0];
+  private static final Class<?>[] EMPTY_PARAMS = new Class<?>[0];
 
   public Among(String s, int substring_i, int result,
                String methodname, SnowballProgram methodobject) {
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1506547)
+++ lucene/common-build.xml	(working copy)
@@ -1625,6 +1625,7 @@
         <compilerarg line="-Xmaxerrs 10000000"/> -->
         <!-- for generics in Java 1.5: -->
         <compilerarg line="${javac.args}"/>
+        <compilerarg line="-Werror"/> <!-- TODO: make this conditional, broken modules can declare some prop in build.xml -->
       </javac>
     </sequential>
   </macrodef>
