Index: HighlighterTest.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene-sandbox/contributions/highlighter/src/test/org/apache/lucene/search/highlight/HighlighterTest.java,v
retrieving revision 1.5
diff -u -r1.5 HighlighterTest.java
--- HighlighterTest.java	24 Sep 2004 12:18:19 -0000	1.5
+++ HighlighterTest.java	10 Oct 2004 13:53:30 -0000
@@ -103,7 +103,7 @@
 	}
 	public void testGetFuzzyFragments() throws Exception
 	{
-		doSearching("Kinnedy~");
+		doFuzzySearch("Kinnedy~");
 		doStandardHighlights();
 		assertTrue("Failed to find correct number of highlights " + numHighlights + " found", numHighlights == 4);
 	}
@@ -441,6 +441,18 @@
 		hits = searcher.search(query);
 	}
 
+  public void doFuzzySearch(String queryString) throws Exception
+  {
+    searcher = new IndexSearcher(ramDir);
+    QueryParser parser = new QueryParser(FIELD_NAME, new StandardAnalyzer());
+    parser.setFuzzyPrefixLength(0);
+    query = parser.parse(queryString);
+
+    query=query.rewrite(reader);
+    System.out.println("Searching for: " + query.toString(FIELD_NAME));
+    hits = searcher.search(query);
+  }
+    
 	void doStandardHighlights() throws Exception
 	{
 		Highlighter highlighter =new Highlighter(this,new QueryScorer(query));
