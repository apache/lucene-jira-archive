--- IndexWriter.java.orig	2005-01-04 12:31:38.807077200 -0800
+++ IndexWriter.java	2004-12-14 08:05:57.947083700 -0800
@@ -568,6 +568,11 @@
   }
 
   private final void writeDeleteableFiles(Vector files) throws IOException {
+  	if(files.size() < 1) {
+  		if(directory.fileExists("deleteable")) directory.deleteFile("deleteable");
+  		if(directory.fileExists("deleteable.new")) directory.deleteFile("deleteable.new");
+  		return;
+  	}
     OutputStream output = directory.createFile("deleteable.new");
     try {
       output.writeInt(files.size());
