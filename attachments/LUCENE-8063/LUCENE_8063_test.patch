Index: lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/RandomGeoShapeRelationshipTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/RandomGeoShapeRelationshipTest.java	(revision 4ebac27d13e6047bbfc065768943b89556d0588e)
+++ lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/RandomGeoShapeRelationshipTest.java	(revision )
@@ -310,4 +310,18 @@
     //It cannot be disjoint, same center!
     assertTrue(b.toString(), circle1.getRelationship(circle2) != GeoArea.DISJOINT);
   }
+
+  @Test
+  @Repeat(iterations = 100)
+  public void testRandomBounds() {
+    PlanetModel planetModel = randomPlanetModel();
+    int type = randomShapeType();
+    GeoAreaShape shape = randomGeoAreaShape(type, planetModel);
+    //get bounds
+    LatLonBounds bounds = new LatLonBounds();
+    shape.getBounds(bounds);
+    //we need to expand the shape to avoid OVERLAPS instead of WITHIN
+    GeoBBox bBox = GeoBBoxFactory.makeGeoBBox(planetModel, bounds).expand(1e-8);
+    assertEquals(shape.toString(), GeoArea.WITHIN, bBox.getRelationship(shape));
+  }
 }
