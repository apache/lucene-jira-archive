Index: lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java
===================================================================
--- lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java	(revision 1619123)
+++ lucene/test-framework/src/java/org/apache/lucene/util/LuceneTestCase.java	(working copy)
@@ -892,8 +892,8 @@
     if (r.nextBoolean()) {
       c.setMergeScheduler(new SerialMergeScheduler());
     } else if (rarely(r)) {
-      int maxThreadCount = TestUtil.nextInt(random(), 1, 4);
-      int maxMergeCount = TestUtil.nextInt(random(), maxThreadCount, maxThreadCount + 4);
+      int maxThreadCount = TestUtil.nextInt(r, 1, 4);
+      int maxMergeCount = TestUtil.nextInt(r, maxThreadCount, maxThreadCount + 4);
       ConcurrentMergeScheduler cms = new ConcurrentMergeScheduler();
       cms.setMaxMergesAndThreads(maxMergeCount, maxThreadCount);
       c.setMergeScheduler(cms);
@@ -975,7 +975,7 @@
       mergePolicy.setNoCFSRatio(r.nextBoolean() ? 1.0 : 0.0);
     }
     
-    if (rarely()) {
+    if (rarely(r)) {
       mergePolicy.setMaxCFSSegmentSizeMB(0.2 + r.nextDouble() * 2.0);
     } else {
       mergePolicy.setMaxCFSSegmentSizeMB(Double.POSITIVE_INFINITY);
@@ -1045,7 +1045,7 @@
           flushByRAM = false;
           break;
         case EITHER:
-          flushByRAM = random().nextBoolean();
+          flushByRAM = r.nextBoolean();
           break;
         default:
           throw new AssertionError();
