Index: HTMLParser.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene/src/demo/org/apache/lucene/demo/html/HTMLParser.java,v
retrieving revision 1.4
diff -u -r1.4 HTMLParser.java
--- HTMLParser.java	23 Nov 2003 18:37:32 -0000	1.4
+++ HTMLParser.java	2 Apr 2004 21:02:10 -0000
@@ -10,7 +10,8 @@
   StringBuffer title = new StringBuffer(SUMMARY_LENGTH);
   StringBuffer summary = new StringBuffer(SUMMARY_LENGTH * 2);
   Properties metaTags=new Properties();
-  String currentMetaTag="";
+  String currentMetaTag=null;
+  String currentMetaContent=null;
   int length = 0;
   boolean titleComplete = false;
   boolean inTitle = false;
@@ -122,8 +123,10 @@
       return;
     if (inMetaTag)
     {
-        metaTags.setProperty(currentMetaTag, text);
-        return;
+      metaTags.setProperty(currentMetaTag, currentMetaContent);
+      currentMetaTag = null;
+      currentMetaContent = null;
+      return;
     }
     if (inTitle)
       title.append(text);
@@ -262,11 +265,17 @@
            && t2 != null)
         {
                 currentMetaTag=t2.image.toLowerCase();
+                if(currentMetaTag != null && currentMetaContent != null) {
+                addText(t2.image);
+                }
         }
         if(inMetaTag && t1.image.equalsIgnoreCase("content") && t2 !=
 null)
         {
+                currentMetaContent=t2.image.toLowerCase();
+                if(currentMetaTag != null && currentMetaContent != null) {
                 addText(t2.image);
+                }
         }
           break;
         default:
@@ -441,15 +450,15 @@
     finally { jj_save(1, xla); }
   }
 
-  final private boolean jj_3_2() {
-    if (jj_scan_token(ArgQuote2)) return true;
-    if (jj_scan_token(CloseQuote2)) return true;
-    return false;
-  }
-
   final private boolean jj_3_1() {
     if (jj_scan_token(ArgQuote1)) return true;
     if (jj_scan_token(CloseQuote1)) return true;
+    return false;
+  }
+
+  final private boolean jj_3_2() {
+    if (jj_scan_token(ArgQuote2)) return true;
+    if (jj_scan_token(CloseQuote2)) return true;
     return false;
   }
 
