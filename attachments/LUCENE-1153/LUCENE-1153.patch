Index: common-build.xml
===================================================================
--- common-build.xml	(revision 615225)
+++ common-build.xml	(working copy)
@@ -45,6 +45,12 @@
   <property name="year" value="2000-${current.year}"/>
   <property name="final.name" value="lucene-${name}-${version}"/>
 
+  <property name="junit.jar" value="junit-3.8.2.jar"/>
+  <property name="junit-location.jar" value="${common.dir}/lib/${junit.jar}"/>
+  <path id="junit-path">
+    <pathelement location="${junit-location.jar}"/>
+  </path>
+
   <property name="javac.deprecation" value="off"/>
   <property name="javac.debug" value="on"/>
   <property name="javac.source" value="1.4"/>
@@ -111,11 +117,6 @@
     />
 
   <available
-    property="junit.present"
-    classname="junit.framework.TestCase"
-    />
-
-  <available
     property="maven.ant.tasks.present"
     classname="org.apache.maven.artifact.ant.Pom"
   />
@@ -334,13 +335,6 @@
   <property name="tests.verbose" value="false"/>
 
   <target name="test" depends="compile-test" description="Runs unit tests">
-    <fail unless="junit.present">
-      ##################################################################
-      JUnit not found.
-      Please make sure junit.jar is in ANT_HOME/lib, or made available
-      to Ant using other mechanisms like -lib or CLASSPATH.
-      ##################################################################
-    </fail>
     <mkdir dir="${junit.output.dir}"/>
     <junit printsummary="off" haltonfailure="no"
       errorProperty="tests.failed" failureProperty="tests.failed">
Index: CHANGES.txt
===================================================================
--- CHANGES.txt	(revision 615225)
+++ CHANGES.txt	(working copy)
@@ -1,4 +1,4 @@
-Lucene Change Log
+ï»¿Lucene Change Log
 $Id$
 
 ======================= Trunk (not yet released) =======================
@@ -40,6 +40,8 @@
 
 Build
 
+  1. LUCENE-1153: Added JUnit JAR to new lib directory.  Updated build to rely on local JUnit instead of ANT/lib.
+
 Test Cases
 
 ======================= Release 2.3.0 2008-01-21 =======================
Index: build.xml
===================================================================
--- build.xml	(revision 615225)
+++ build.xml	(working copy)
@@ -40,14 +40,16 @@
     <path refid="classpath"/>
     <pathelement location="${build.dir}/classes/demo"/>
   </path>
-
+  
   <path id="test.classpath">
     <path refid="demo.classpath"/>
+    <path refid="junit-path"/>
     <pathelement location="${build.dir}/classes/test"/>
   </path>
 
 
   <path id="junit.classpath">
+    <path refid="junit-path"/>
     <pathelement location="${build.dir}/classes/test"/>
     <pathelement location="${build.dir}/classes/java"/>
     <pathelement location="${build.dir}/classes/demo"/>
Index: contrib/contrib-build.xml
===================================================================
--- contrib/contrib-build.xml	(revision 615225)
+++ contrib/contrib-build.xml	(working copy)
@@ -41,7 +41,7 @@
   <path id="test.classpath">
     <path refid="classpath"/>
     <pathelement location="../../build/classes/test/"/>
-    <pathelement location="${junit.jar}"/>
+    <path refid="junit-path"/>
     <pathelement location="${build.dir}/classes/java"/>
   </path>
 
Index: lib/junit-3.8.2.jar
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: lib/junit-3.8.2.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

