Index: core/src/java/org/apache/lucene/search/TopDocs.java
===================================================================
--- core/src/java/org/apache/lucene/search/TopDocs.java	(wersja 1710387)
+++ core/src/java/org/apache/lucene/search/TopDocs.java	(kopia robocza)
@@ -272,7 +272,7 @@
       int hitUpto = 0;
       while (hitUpto < numIterOnHits) {
         assert queue.size() > 0;
-        ShardRef ref = queue.pop();
+        ShardRef ref = queue.top();
         final ScoreDoc hit = shardHits[ref.shardIndex].scoreDocs[ref.hitIndex++];
         hit.shardIndex = ref.shardIndex;
         if (hitUpto >= start) {
@@ -286,7 +286,9 @@
 
         if (ref.hitIndex < shardHits[ref.shardIndex].scoreDocs.length) {
           // Not done with this these TopDocs yet:
-          queue.add(ref);
+          queue.updateTop();
+        } else {
+          queue.pop();
         }
       }
     }
