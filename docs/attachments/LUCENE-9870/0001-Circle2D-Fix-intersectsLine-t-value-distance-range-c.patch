From b1dc78c5f365c88ca7777a94e0f2dce9f252feca Mon Sep 17 00:00:00 2001
From: Jorgen Nystad <jn@avinet.no>
Date: Thu, 25 Mar 2021 15:35:07 +0100
Subject: [PATCH] Circle2D: Fix intersectsLine t-value (distance) range check

---
 lucene/core/src/java/org/apache/lucene/geo/Circle2D.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lucene/core/src/java/org/apache/lucene/geo/Circle2D.java b/lucene/core/src/java/org/apache/lucene/geo/Circle2D.java
index 4cc64ed8b98..0d0cb4dabbf 100644
--- a/lucene/core/src/java/org/apache/lucene/geo/Circle2D.java
+++ b/lucene/core/src/java/org/apache/lucene/geo/Circle2D.java
@@ -171,7 +171,7 @@ class Circle2D implements Component2D {
 
     final double distance = dotProduct / magnitudeAB;
 
-    if (distance < 0 || distance > dotProduct) {
+    if (distance < 0 || distance > 1) {
       return false;
     }
 
-- 
2.30.0.windows.2

