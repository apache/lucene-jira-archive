diff --git a/lucene/core/src/java/org/apache/lucene/util/RamUsageEstimator.java b/lucene/core/src/java/org/apache/lucene/util/RamUsageEstimator.java
index 18d8acec3dd..573e35d24f1 100644
--- a/lucene/core/src/java/org/apache/lucene/util/RamUsageEstimator.java
+++ b/lucene/core/src/java/org/apache/lucene/util/RamUsageEstimator.java
@@ -190,14 +190,17 @@ public final class RamUsageEstimator {
       NUM_BYTES_ARRAY_HEADER = NUM_BYTES_OBJECT_HEADER + Integer.BYTES;
     }
 
-    // get min/max value of cached Long class instances:
+    // Try to get min/max value of cached Long class instances. We only check between -256 and 256 because
+    // the check code is prone for compiler-time optimization and can turn the check into a practically infinite loop.
+    final long MIN_CHECK_VALUE = -256;
+    final long MAX_CHECK_VALUE = 256;
     long longCacheMinValue = 0;
-    while (longCacheMinValue > Long.MIN_VALUE
+    while (longCacheMinValue > MIN_CHECK_VALUE
         && Long.valueOf(longCacheMinValue - 1) == Long.valueOf(longCacheMinValue - 1)) {
       longCacheMinValue -= 1;
     }
     long longCacheMaxValue = -1;
-    while (longCacheMaxValue < Long.MAX_VALUE
+    while (longCacheMaxValue < MAX_CHECK_VALUE
         && Long.valueOf(longCacheMaxValue + 1) == Long.valueOf(longCacheMaxValue + 1)) {
       longCacheMaxValue += 1;
     }
