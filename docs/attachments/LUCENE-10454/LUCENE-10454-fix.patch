Index: lucene/highlighter/src/java/org/apache/lucene/search/uhighlight/UnifiedHighlighter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lucene/highlighter/src/java/org/apache/lucene/search/uhighlight/UnifiedHighlighter.java b/lucene/highlighter/src/java/org/apache/lucene/search/uhighlight/UnifiedHighlighter.java
--- a/lucene/highlighter/src/java/org/apache/lucene/search/uhighlight/UnifiedHighlighter.java	(revision 226880dd33ab77b042d73ff278abd69b29951135)
+++ b/lucene/highlighter/src/java/org/apache/lucene/search/uhighlight/UnifiedHighlighter.java	(date 1648218083958)
@@ -1099,7 +1099,11 @@
     BytesRef[] terms = null;
     LabelledCharArrayMatcher[] automata = null;
     if (!highlightFlags.contains(HighlightFlag.WEIGHT_MATCHES) || !queryHasUnrecognizedPart) {
-      terms = filterExtractedTerms(fieldMatcher, allTerms);
+      if (allTerms.isEmpty()) {
+        terms = phraseHelper.getAllPositionInsensitiveTerms();
+      } else {
+        terms = filterExtractedTerms(fieldMatcher, allTerms);
+      }
       automata = getAutomata(field, query, highlightFlags);
     } // otherwise don't need to extract
     return new UHComponents(
