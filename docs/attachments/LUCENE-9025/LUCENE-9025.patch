From 549f14fd7488c2b1f0fc39b898d89b352a2192fb Mon Sep 17 00:00:00 2001
From: Jason Gerlowski <jason.gerlowski@lucidworks.com>
Date: Wed, 23 Oct 2019 11:58:24 -0400
Subject: [PATCH] LUCENE-9025: Add lookupTerm(BytesRef, long) overload

---
 .../org/apache/lucene/index/SortedSetDocValues.java | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/lucene/core/src/java/org/apache/lucene/index/SortedSetDocValues.java b/lucene/core/src/java/org/apache/lucene/index/SortedSetDocValues.java
index 9e1c6a395f9..710c9f34d01 100644
--- a/lucene/core/src/java/org/apache/lucene/index/SortedSetDocValues.java
+++ b/lucene/core/src/java/org/apache/lucene/index/SortedSetDocValues.java
@@ -76,7 +76,18 @@ public abstract class SortedSetDocValues extends DocValuesIterator {
    *  @param key Key to look up
    **/
   public long lookupTerm(BytesRef key) throws IOException {
-    long low = 0;
+    return lookupTerm(key, 0L);
+  }
+
+  /** If {@code key} exists, returns its ordinal, else
+   *  returns {@code -insertionPoint-1}, like {@code
+   *  Arrays.binarySearch}.
+   *
+   *  @param key Key to look up
+   *  @param lowerSearchBound ordinal to start the lookup
+   **/
+  public long lookupTerm(BytesRef key, long lowerSearchBound) throws IOException {
+    long low = lowerSearchBound;
     long high = getValueCount()-1;
 
     while (low <= high) {
-- 
2.17.0

