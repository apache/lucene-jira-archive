Index: IndexWriter.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene/src/java/org/apache/lucene/index/IndexWriter.java,v
retrieving revision 1.41
diff -u -r1.41 IndexWriter.java
--- IndexWriter.java	11 Oct 2004 21:24:39 -0000	1.41
+++ IndexWriter.java	26 Nov 2004 10:15:47 -0000
@@ -338,7 +338,8 @@
   public synchronized void close() throws IOException {
     flushRamSegments();
     ramDirectory.close();
-    writeLock.release();                          // release write lock
+    if(writeLock!=null)
+      writeLock.release();                          // release write lock
     writeLock = null;
     if(closeDir)
       directory.close();
