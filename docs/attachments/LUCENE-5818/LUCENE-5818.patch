Index: lucene/analysis/common/src/java/org/apache/lucene/analysis/hunspell/Stemmer.java
===================================================================
--- lucene/analysis/common/src/java/org/apache/lucene/analysis/hunspell/Stemmer.java	(revision 1609596)
+++ lucene/analysis/common/src/java/org/apache/lucene/analysis/hunspell/Stemmer.java	(working copy)
@@ -218,7 +218,7 @@
       fst.getFirstArc(arc);
       IntsRef NO_OUTPUT = outputs.getNoOutput();
       IntsRef output = NO_OUTPUT;
-      for (int i = 0; i < length; i++) {
+      for (int i = 0; i < length-1; i++) {
         if (i > 0) {
           int ch = word[i-1];
           if (fst.findTargetArc(ch, arc, arc, bytesReader) == null) {
@@ -292,7 +292,7 @@
       fst.getFirstArc(arc);
       IntsRef NO_OUTPUT = outputs.getNoOutput();
       IntsRef output = NO_OUTPUT;
-      for (int i = length; i >= 0; i--) {
+      for (int i = length; i > 0; i--) {
         if (i < length) {
           int ch = word[i];
           if (fst.findTargetArc(ch, arc, arc, bytesReader) == null) {
Index: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/TestStrangeOvergeneration.java
===================================================================
--- lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/TestStrangeOvergeneration.java	(revision 0)
+++ lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/TestStrangeOvergeneration.java	(working copy)
@@ -0,0 +1,34 @@
+package org.apache.lucene.analysis.hunspell;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+import org.junit.BeforeClass;
+
+public class TestStrangeOvergeneration extends StemmerTestBase {
+  @BeforeClass
+  public static void beforeClass() throws Exception {
+    init("strange-overgeneration.aff", "strange-overgeneration.dic");
+  }
+  
+  public void testStemming() {
+    assertStemsTo("btasty", "beer");
+    assertStemsTo("tasty");
+    assertStemsTo("yuck");
+    assertStemsTo("foo");
+  }
+}

Property changes on: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/TestStrangeOvergeneration.java
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
Index: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.aff
===================================================================
--- lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.aff	(revision 0)
+++ lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.aff	(working copy)
@@ -0,0 +1,10 @@
+SET UTF-8
+
+SFX A Y 1
+SFX A   baz        yuck         baz
+
+SFX B Y 1
+SFX B   bar        foo    .
+
+SFX C Y 1
+SFX C   eer        tasty  .

Property changes on: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.aff
___________________________________________________________________
Added: svn-eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
Index: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.dic
===================================================================
--- lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.dic	(revision 0)
+++ lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.dic	(working copy)
@@ -0,0 +1,5 @@
+3
+baz/A
+bar/B
+beer/C
+eer/C

Property changes on: lucene/analysis/common/src/test/org/apache/lucene/analysis/hunspell/strange-overgeneration.dic
___________________________________________________________________
Added: svn-eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
