Index: lucene/core/src/java/org/apache/lucene/util/CharsRefBuilder.java
===================================================================
--- lucene/core/src/java/org/apache/lucene/util/CharsRefBuilder.java	(revision 1618605)
+++ lucene/core/src/java/org/apache/lucene/util/CharsRefBuilder.java	(working copy)
@@ -17,6 +17,7 @@
  * limitations under the License.
  */
 
+import java.io.IOException;
 import java.util.Arrays;
 
 /**
@@ -23,7 +24,7 @@
  * A builder for {@link CharsRef} instances.
  * @lucene.internal
  */
-public class CharsRefBuilder {
+public class CharsRefBuilder implements Appendable {
 
   private final CharsRef ref;
 
@@ -64,6 +65,27 @@
     ref.length = 0;
   }
 
+  @Override
+  public Appendable append(CharSequence csq) {
+    return append(csq, 0, csq.length());
+  }
+
+  @Override
+  public Appendable append(CharSequence csq, int start, int end) {
+    grow(ref.length + end - start);
+    for (int i = start; i < end; ++i) {
+      setCharAt(ref.length++, csq.charAt(i));
+    }
+    return this;
+  }
+
+  @Override
+  public Appendable append(char c) {
+    grow(ref.length + 1);
+    setCharAt(ref.length++, c);
+    return this;
+  }
+
   /**
    * Copies the given {@link CharsRef} referenced content into this instance.
    */
Index: lucene/core/src/test/org/apache/lucene/util/TestCharsRefBuilder.java
===================================================================
--- lucene/core/src/test/org/apache/lucene/util/TestCharsRefBuilder.java	(revision 0)
+++ lucene/core/src/test/org/apache/lucene/util/TestCharsRefBuilder.java	(working copy)
@@ -0,0 +1,41 @@
+package org.apache.lucene.util;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+public class TestCharsRefBuilder extends LuceneTestCase {
+
+  public void testAppend() {
+    final String s = TestUtil.randomUnicodeString(random(), 100);
+    CharsRefBuilder builder = new CharsRefBuilder();
+    while (builder.length() < s.length()) {
+      if (random().nextBoolean()) {
+        builder.append(s.charAt(builder.length()));
+      } else {
+        final int start = builder.length();
+        final int end = TestUtil.nextInt(random(), start, s.length());
+        if (random().nextBoolean()) {
+          builder.append(s.substring(start, end));
+        } else {
+          builder.append(s, start, end);
+        }
+      }
+    }
+    assertEquals(s, builder.toString());
+  }
+
+}

Property changes on: lucene/core/src/test/org/apache/lucene/util/TestCharsRefBuilder.java
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
