From 04c6c7719b8fa5b06add7d88026d906c3f99a5b1 Mon Sep 17 00:00:00 2001
From: Sanne Grinovero <sanne@hibernate.org>
Date: Mon, 23 Nov 2015 16:44:09 +0000
Subject: [PATCH] LUCENE-6909 Allow efficient concurrent usage of a
 FacetsConfig

---
 lucene/facet/src/java/org/apache/lucene/facet/FacetsConfig.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lucene/facet/src/java/org/apache/lucene/facet/FacetsConfig.java b/lucene/facet/src/java/org/apache/lucene/facet/FacetsConfig.java
index be7d4b2..b241779 100644
--- a/lucene/facet/src/java/org/apache/lucene/facet/FacetsConfig.java
+++ b/lucene/facet/src/java/org/apache/lucene/facet/FacetsConfig.java
@@ -63,7 +63,7 @@ public class FacetsConfig {
    *  doc values). */
   public static final String DEFAULT_INDEX_FIELD_NAME = "$facets";
 
-  private final Map<String,DimConfig> fieldTypes = new ConcurrentHashMap<>();
+  private final ConcurrentHashMap<String,DimConfig> fieldTypes = new ConcurrentHashMap<>();
 
   // Used only for best-effort detection of app mixing
   // int/float/bytes in a single indexed field:
@@ -111,7 +111,7 @@ public class FacetsConfig {
   }
   
   /** Get the current configuration for a dimension. */
-  public synchronized DimConfig getDimConfig(String dimName) {
+  public DimConfig getDimConfig(String dimName) {
     DimConfig ft = fieldTypes.get(dimName);
     if (ft == null) {
       ft = getDefaultDimConfig();
-- 
2.5.0

