Index: src/test/org/apache/lucene/index/TestIndexWriter.java
===================================================================
--- src/test/org/apache/lucene/index/TestIndexWriter.java	(revision 607519)
+++ src/test/org/apache/lucene/index/TestIndexWriter.java	(working copy)
@@ -570,7 +570,12 @@
       // Make sure all terms < max size were indexed
       assertEquals(2, reader.docFreq(new Term("content", "abc")));
       assertEquals(1, reader.docFreq(new Term("content", "bbb")));
+
+      // Make sure the doc that failed to be added is not in the index (LUCENE-1112). 
+      assertEquals("document failed to be added should not be in the index",1,reader.numDocs());
+      
       reader.close();
+      
 
       // Make sure we can add a document with exactly the
       // maximum length term, and search on that term:
