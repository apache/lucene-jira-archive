Index: src/java/org/apache/lucene/search/payloads/BoostingNearQuery.java
===================================================================
--- src/java/org/apache/lucene/search/payloads/BoostingNearQuery.java	(revision 806524)
+++ src/java/org/apache/lucene/search/payloads/BoostingNearQuery.java	(working copy)
@@ -86,7 +86,7 @@
 
   public class BoostingSpanScorer extends SpanScorer {
     Spans spans;
-    Spans[] subSpans = null;
+    
     protected float payloadScore;
     private int payloadsSeen;
     Similarity similarity = getSimilarity();
@@ -161,6 +161,37 @@
       return result;
     }
   }
+  
+  //@Override
+  public int hashCode() {
+    final int prime = 31;
+    int result = super.hashCode();
+    result = prime * result + ((fieldName == null) ? 0 : fieldName.hashCode());
+    result = prime * result + ((function == null) ? 0 : function.hashCode());
+    return result;
+  }
 
+  //@Override
+  public boolean equals(Object obj) {
+    if (this == obj)
+      return true;
+    if (!super.equals(obj))
+      return false;
+    if (getClass() != obj.getClass())
+      return false;
+    BoostingNearQuery other = (BoostingNearQuery) obj;
+    if (fieldName == null) {
+      if (other.fieldName != null)
+        return false;
+    } else if (!fieldName.equals(other.fieldName))
+      return false;
+    if (function == null) {
+      if (other.function != null)
+        return false;
+    } else if (!function.equals(other.function))
+      return false;
+    return true;
+  }
+
 
 }
Index: src/java/org/apache/lucene/search/payloads/PayloadFunction.java
===================================================================
--- src/java/org/apache/lucene/search/payloads/PayloadFunction.java	(revision 806524)
+++ src/java/org/apache/lucene/search/payloads/PayloadFunction.java	(working copy)
@@ -16,8 +16,6 @@
  * limitations under the License.
  */
 
-import org.apache.lucene.index.Term;
-
 import java.io.Serializable;
 
 
@@ -33,9 +31,6 @@
  **/
 public abstract class PayloadFunction implements Serializable {
 
-
-
-
   /**
    * Calculate the score up to this point for this doc and field
    * @param docId The current doc
@@ -60,5 +55,9 @@
    * @return The final score for the payloads
    */
   public abstract float docScore(int docId, String field, int numPayloadsSeen, float payloadScore);
+  
+  public abstract int hashCode();
+  
+  public abstract boolean equals(Object o);
 
 }

