Index: src/java/org/apache/lucene/index/SegmentMerger.java
===================================================================
RCS file: /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/SegmentMerger.java,v
retrieving revision 1.17
diff -u -r1.17 SegmentMerger.java
--- src/java/org/apache/lucene/index/SegmentMerger.java	29 Dec 2004 21:37:47 -0000	1.17
+++ src/java/org/apache/lucene/index/SegmentMerger.java	1 Feb 2005 21:09:21 -0000
@@ -392,8 +392,9 @@
         try {
           for (int j = 0; j < readers.size(); j++) {
             IndexReader reader = (IndexReader) readers.elementAt(j);
-            byte[] input = reader.norms(fi.name);
             int maxDoc = reader.maxDoc();
+            byte[] input = new byte[maxDoc];
+            reader.norms(fi.name, input, 0);
             for (int k = 0; k < maxDoc; k++) {
               byte norm = input != null ? input[k] : (byte) 0;
               if (!reader.isDeleted(k)) {
