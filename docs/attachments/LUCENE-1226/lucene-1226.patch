Index: src/java/org/apache/lucene/index/IndexWriter.java
===================================================================
--- src/java/org/apache/lucene/index/IndexWriter.java	(revision 636513)
+++ src/java/org/apache/lucene/index/IndexWriter.java	(working copy)
@@ -3017,6 +3017,9 @@
           synchronized(this) {
             info.setUseCompoundFile(true);
           }
+          
+          success = true;
+          
         } finally {
           if (!success) {
             if (infoStream != null)
