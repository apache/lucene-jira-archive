Index: src/test/org/apache/lucene/spatial3d/geom/GeoExactCircleTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/test/org/apache/lucene/spatial3d/geom/GeoExactCircleTest.java	(date 1512143098000)
+++ src/test/org/apache/lucene/spatial3d/geom/GeoExactCircleTest.java	(revision )
@@ -142,6 +142,37 @@
     assertTrue(circle1.isWithin(point));
   }
 
+  @Test
+  @Repeat(iterations = 10)
+  public void testPointsWithIn() {
+    double a = 1 - random().nextDouble() * 0.025;
+    double b = 1 + random().nextDouble() * 0.025;
+    PlanetModel planetModel;
+    if (random().nextBoolean()) {
+      planetModel = new PlanetModel(a, b);
+    }
+    else {
+      planetModel = new PlanetModel(b, a);
+    }
+    GeoPoint center = randomGeoPoint(planetModel);
+    GeoCircle circle = null;
+    while (circle == null) {
+      double radius = random().nextDouble() * Math.PI;
+      try {
+        circle = GeoCircleFactory.makeExactGeoCircle(planetModel, center.getLatitude(), center.getLongitude(), radius, 1e-12);
+      }
+      catch (Exception e) {
+        //ignore
+      }
+    }
+
+    for (int i=0; i<10000; i++) {
+      GeoPoint point = randomGeoPoint(planetModel);
+      double distance = planetModel.surfaceDistance(circle.getCenter(), point);
+      assertEquals(point + " " + circle, distance - circle.getRadius() < Vector.MINIMUM_RESOLUTION, circle.isWithin(point));
+    }
+  }
+
   /**
    * in LUCENE-8054 we have problems with exact circles that have
    * edges that are close together. This test creates those circles with the same
