Index: lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/GeoCircleTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/GeoCircleTest.java	(revision 277bc3a94be284d41c001291dc0ff5d03dae11e1)
+++ lucene/spatial3d/src/test/org/apache/lucene/spatial3d/geom/GeoCircleTest.java	(revision )
@@ -418,5 +418,18 @@
     assert gc.isWithin(gp)?solid.isWithin(gp):true;
     
   }
-  
+
+  @Test
+  public void RandomPointBearingWGS84Test() {
+    PlanetModel planetModel = PlanetModel.WGS84;
+    RandomGeo3dShapeGenerator generator = new RandomGeo3dShapeGenerator();
+    GeoCircle circle = (GeoCircle) generator.randomGeoAreaShape(RandomGeo3dShapeGenerator.CIRCLE, planetModel);
+
+    for (int i = 0; i < 10000; i++) {
+      GeoPoint point = circle.getCenter();
+      GeoPoint bPoint = generator.randomGeoPoint(planetModel);
+      double surfaceDistance = planetModel.surfaceDistance(point, bPoint);
+      assertEquals(Double.toString(surfaceDistance - circle.getRadius()), circle.isWithin(bPoint), surfaceDistance <= circle.getRadius());
+    }
+  }
 }
