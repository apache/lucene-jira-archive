Index: modules/suggest/src/java/org/apache/lucene/search/spell/SpellChecker.java
===================================================================
--- modules/suggest/src/java/org/apache/lucene/search/spell/SpellChecker.java	(revision 1145697)
+++ modules/suggest/src/java/org/apache/lucene/search/spell/SpellChecker.java	(working copy)
@@ -115,17 +115,6 @@
 
   private StringDistance sd;
   private Comparator<SuggestWord> comparator;
-  
-  /** we don't need to actually analyze any content:
-   *  all fields are indexed NOT_ANALYZED, but docsinverter
-   *  needs this for the offset gap!
-   */
-  private static Analyzer noAnalyzer = new Analyzer() {
-    @Override
-    public TokenStream tokenStream(String fieldName, Reader reader) {
-      return null;
-    }
-  };
 
   /**
    * Use the given directory as a spell checker index. The directory
@@ -182,7 +171,7 @@
       if (!IndexReader.indexExists(spellIndexDir)) {
           IndexWriter writer = new IndexWriter(spellIndexDir,
             new IndexWriterConfig(Version.LUCENE_CURRENT,
-                noAnalyzer));
+                null));
           writer.close();
       }
       swapSearcher(spellIndexDir);
@@ -480,7 +469,7 @@
       final Directory dir = this.spellIndex;
       final IndexWriter writer = new IndexWriter(dir, new IndexWriterConfig(
           Version.LUCENE_CURRENT,
-          noAnalyzer)
+          null)
           .setOpenMode(OpenMode.CREATE));
       writer.close();
       swapSearcher(dir);
@@ -517,7 +506,7 @@
     synchronized (modifyCurrentIndexLock) {
       ensureOpen();
       final Directory dir = this.spellIndex;
-      final IndexWriter writer = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_CURRENT, noAnalyzer).setRAMBufferSizeMB(ramMB));
+      final IndexWriter writer = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_CURRENT, null).setRAMBufferSizeMB(ramMB));
       ((TieredMergePolicy) writer.getConfig().getMergePolicy()).setMaxMergeAtOnce(mergeFactor);
       IndexSearcher indexSearcher = obtainSearcher();
       final List<TermsEnum> termsEnums = new ArrayList<TermsEnum>();
Index: lucene/src/java/org/apache/lucene/index/DocInverterPerField.java
===================================================================
--- lucene/src/java/org/apache/lucene/index/DocInverterPerField.java	(revision 1145648)
+++ lucene/src/java/org/apache/lucene/index/DocInverterPerField.java	(working copy)
@@ -78,7 +78,7 @@
       if (field.isIndexed() && doInvert) {
         
         if (i > 0)
-          fieldState.position += docState.analyzer.getPositionIncrementGap(fieldInfo.name);
+          fieldState.position += docState.analyzer == null ? 0 : docState.analyzer.getPositionIncrementGap(fieldInfo.name);
 
         if (!field.isTokenized()) {		  // un-tokenized field
           String stringValue = field.stringValue();
@@ -188,7 +188,7 @@
           }
         }
 
-        fieldState.offset += docState.analyzer.getOffsetGap(field);
+        fieldState.offset += docState.analyzer == null ? 0 : docState.analyzer.getOffsetGap(field);
         fieldState.boost *= field.getBoost();
       }
 
