Index: CHANGES.txt
===================================================================
--- CHANGES.txt	(revision 613270)
+++ CHANGES.txt	(working copy)
@@ -11,6 +11,12 @@
     
 New features
 
+ 1. LUCENE-1137: Added get/setFlags() method on Token to allow for encoding more information about a Token using bit flags (as an int).
+    The type bits are not indexed (similar to type()) but are completely distinct from the type() string value.  They are
+    useful for passing more information about a Token to other TokenFilters in the analysis stream.  This functionality is
+    experimental.  While we expect it to be permanent, we are not decided on the size of the flags.  It is currently an int,
+    but we may change it to be a long.
+
 Optimizations
 
 Documentation
@@ -228,6 +234,7 @@
   replaceInvalidAcronym which defaults to false, the current, incorrect behavior.  Setting
   this flag to true fixes the problem.  This flag is a temporary fix and is already
   marked as being deprecated.  3.x will implement the correct approach.  (Shai Erera via Grant Ingersoll)
+  LUCENE-1140: Fixed NPE caused by 1068 (Alexei Dets via Grant Ingersoll)
     
 28. LUCENE-749: ChainedFilter behavior fixed when logic of 
     first filter is ANDNOT.  (Antonio Bruno via Doron Cohen)
Index: src/java/org/apache/lucene/analysis/standard/StandardAnalyzer.java
===================================================================
--- src/java/org/apache/lucene/analysis/standard/StandardAnalyzer.java	(revision 613270)
+++ src/java/org/apache/lucene/analysis/standard/StandardAnalyzer.java	(working copy)
@@ -85,6 +85,7 @@
    * @deprecated Remove in 3.X and make true the only valid value
    */
   public StandardAnalyzer(boolean replaceInvalidAcronym) {
+    this(STOP_WORDS);
     this.replaceInvalidAcronym = replaceInvalidAcronym;
   }
 
Index: src/test/org/apache/lucene/analysis/TestStandardAnalyzer.java
===================================================================
--- src/test/org/apache/lucene/analysis/TestStandardAnalyzer.java	(revision 613270)
+++ src/test/org/apache/lucene/analysis/TestStandardAnalyzer.java	(working copy)
@@ -120,6 +120,16 @@
     assertAnalyzesTo(a, "Excite@Home", new String[]{"excite@home"});
   }
 
+  public void testLucene1140() throws Exception {
+    try {
+      StandardAnalyzer analyzer = new StandardAnalyzer(true);
+      assertAnalyzesTo(analyzer, "www.nutch.org.", new String[]{ "www.nutch.org" }, new String[] { "<HOST>" });
+    } catch (NullPointerException e) {
+      assertTrue("Should not throw an NPE and it did", false);
+    }
+
+  }
+
   public void testDomainNames() throws Exception {
     // domain names
     assertAnalyzesTo(a, "www.nutch.org", new String[]{"www.nutch.org"});
