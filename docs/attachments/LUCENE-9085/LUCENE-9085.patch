diff --git a/lucene/core/src/java/org/apache/lucene/analysis/CharacterUtils.java b/lucene/core/src/java/org/apache/lucene/analysis/CharacterUtils.java
index e2cc47f0c12..9ed077c96f2 100644
--- a/lucene/core/src/java/org/apache/lucene/analysis/CharacterUtils.java
+++ b/lucene/core/src/java/org/apache/lucene/analysis/CharacterUtils.java
@@ -53,7 +53,7 @@ public final class CharacterUtils {
    */
   public static void toLowerCase(final char[] buffer, final int offset, final int limit) {
     assert buffer.length >= limit;
-    assert offset <=0 && offset <= buffer.length;
+    assert 0 <= offset && offset <= buffer.length;
     for (int i = offset; i < limit;) {
       i += Character.toChars(
               Character.toLowerCase(
@@ -70,7 +70,7 @@ public final class CharacterUtils {
    */
   public static void toUpperCase(final char[] buffer, final int offset, final int limit) {
     assert buffer.length >= limit;
-    assert offset <=0 && offset <= buffer.length;
+    assert 0 <= offset && offset <= buffer.length;
     for (int i = offset; i < limit;) {
       i += Character.toChars(
               Character.toUpperCase(
diff --git a/lucene/core/src/test/org/apache/lucene/analysis/TestCharacterUtils.java b/lucene/core/src/test/org/apache/lucene/analysis/TestCharacterUtils.java
index 438e5e3cdc5..d6bebcabccc 100644
--- a/lucene/core/src/test/org/apache/lucene/analysis/TestCharacterUtils.java
+++ b/lucene/core/src/test/org/apache/lucene/analysis/TestCharacterUtils.java
@@ -32,6 +32,17 @@ import org.junit.Test;
  */
 public class TestCharacterUtils extends LuceneTestCase {
 
+  public void testLowerUpper() throws IOException {
+    Reader reader = new StringReader("ABc");
+    CharacterBuffer buffer = CharacterUtils.newCharacterBuffer(3);
+    assertTrue(CharacterUtils.fill(buffer, reader));
+    assertEquals(3, buffer.getLength());
+    CharacterUtils.toLowerCase(buffer.getBuffer(), 1, 3);
+    assertEquals("Abc", new String(buffer.getBuffer()));
+    CharacterUtils.toUpperCase(buffer.getBuffer(), 1, 3);
+    assertEquals("ABC", new String(buffer.getBuffer()));
+  }
+
   public void testConversions() {
     final char[] orig = TestUtil.randomUnicodeString(random(), 100).toCharArray();
     final int[] buf = new int[orig.length];
