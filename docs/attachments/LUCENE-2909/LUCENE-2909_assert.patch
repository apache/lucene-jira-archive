Index: lucene/src/test-framework/org/apache/lucene/analysis/BaseTokenStreamTestCase.java
===================================================================
--- lucene/src/test-framework/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(revision 1067897)
+++ lucene/src/test-framework/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(working copy)
@@ -111,8 +111,11 @@
       assertEquals("term "+i, output[i], termAtt.toString());
       if (startOffsets != null)
         assertEquals("startOffset "+i, startOffsets[i], offsetAtt.startOffset());
-      if (endOffsets != null)
+      if (endOffsets != null) {
         assertEquals("endOffset "+i, endOffsets[i], offsetAtt.endOffset());
+        if (finalOffset != null)
+          assertTrue("endOffset "+i+" <= finalOffset", endOffsets[i] <= finalOffset.intValue());
+      }
       if (types != null)
         assertEquals("type "+i, types[i], typeAtt.type());
       if (posIncrements != null)
