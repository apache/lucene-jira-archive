From 97b0616070da4abff24cf4921fa75741cd380d48 Mon Sep 17 00:00:00 2001
From: danmuzi <kng0828@gmail.com>
Date: Tue, 14 Aug 2018 01:36:01 +0900
Subject: [PATCH] LUCENE-8449: Code Optimizations in FieldTermStack

---
 .../lucene/search/vectorhighlight/FieldTermStack.java | 11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)

diff --git a/lucene/highlighter/src/java/org/apache/lucene/search/vectorhighlight/FieldTermStack.java b/lucene/highlighter/src/java/org/apache/lucene/search/vectorhighlight/FieldTermStack.java
index f67ba80443..b1700c8a53 100644
--- a/lucene/highlighter/src/java/org/apache/lucene/search/vectorhighlight/FieldTermStack.java
+++ b/lucene/highlighter/src/java/org/apache/lucene/search/vectorhighlight/FieldTermStack.java
@@ -196,7 +196,7 @@ public class FieldTermStack {
     // this is a circular list, so with no syns, just points to itself
     private TermInfo next;
 
-    public TermInfo( String text, int startOffset, int endOffset, int position, float weight ){
+    TermInfo(String text, int startOffset, int endOffset, int position, float weight){
       this.text = text;
       this.startOffset = startOffset;
       this.endOffset = endOffset;
@@ -219,9 +219,7 @@ public class FieldTermStack {
     
     @Override
     public String toString(){
-      StringBuilder sb = new StringBuilder();
-      sb.append( text ).append( '(' ).append(startOffset).append( ',' ).append( endOffset ).append( ',' ).append( position ).append( ')' );
-      return sb.toString();
+      return text + '(' + startOffset + ',' + endOffset + ',' + position + ')';
     }
 
     @Override
@@ -248,10 +246,7 @@ public class FieldTermStack {
         return false;
       }
       TermInfo other = (TermInfo) obj;
-      if (position != other.position) {
-        return false;
-      }
-      return true;
+      return position == other.position;
     }
   }
 }
-- 
2.18.0.windows.1

