Index: lucene/test-framework/src/java/org/apache/lucene/analysis/BaseTokenStreamTestCase.java
===================================================================
--- lucene/test-framework/src/java/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(revision 1304816)
+++ lucene/test-framework/src/java/org/apache/lucene/analysis/BaseTokenStreamTestCase.java	(working copy)
@@ -611,9 +611,13 @@
         if (evilness < 10) {
           sb.append(_TestUtil.randomSimpleString(random, wordLength));
         } else if (evilness < 15) {
-          sb.append(_TestUtil.randomRealisticUnicodeString(random, wordLength));
+          assert sb.length() == 0; // we should always get wordLength back!
+          sb.append(_TestUtil.randomRealisticUnicodeString(random, wordLength, wordLength));
         } else if (evilness == 16) {
           sb.append(_TestUtil.randomHtmlishString(random, wordLength));
+        } else if (evilness == 17) {
+          // gives a lot of punctuation
+          sb.append(_TestUtil.randomRegexpishString(random, wordLength));
         } else {
           sb.append(_TestUtil.randomUnicodeString(random, wordLength));
         }
Index: lucene/test-framework/src/java/org/apache/lucene/util/_TestUtil.java
===================================================================
--- lucene/test-framework/src/java/org/apache/lucene/util/_TestUtil.java	(revision 1304816)
+++ lucene/test-framework/src/java/org/apache/lucene/util/_TestUtil.java	(working copy)
@@ -264,7 +264,15 @@
    * If you call this enough times, you might get a valid regex!
    */
   public static String randomRegexpishString(Random r) {
-    final int end = r.nextInt(20);
+    return randomRegexpishString(r, 20);
+  }
+  
+  /**
+   * Returns a String thats "regexpish" (contains lots of operators typically found in regular expressions)
+   * If you call this enough times, you might get a valid regex!
+   */
+  public static String randomRegexpishString(Random r, int maxLength) {
+    final int end = nextInt(r, 0, maxLength);
     if (end == 0) {
       // allow 0 length
       return "";
