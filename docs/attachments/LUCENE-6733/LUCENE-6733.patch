Index: lucene/analysis/kuromoji/ivy.xml
===================================================================
--- lucene/analysis/kuromoji/ivy.xml	(revision 1695226)
+++ lucene/analysis/kuromoji/ivy.xml	(working copy)
@@ -27,10 +27,10 @@
 
   <dependencies>
     <dependency org="mecab" name="mecab-ipadic" rev="${/mecab/mecab-ipadic}" conf="ipadic"> 
-      <artifact name="ipadic" type=".tar.gz" url="http://mecab.googlecode.com/files/mecab-ipadic-2.7.0-20070801.tar.gz"/>
+      <artifact name="ipadic" type=".tar.gz" url="http://downloads.sourceforge.net/project/mecab/mecab-ipadic/2.7.0-20070801/mecab-ipadic-2.7.0-20070801.tar.gz"/>
     </dependency>
     <dependency org="mecab" name="mecab-naist-jdic" rev="${/mecab/mecab-naist-jdic}" conf="naist">
-      <artifact name="mecab-naist-jdic" type=".tar.gz" url="http://sourceforge.jp/frs/redir.php?m=iij&amp;f=/naist-jdic/53500/mecab-naist-jdic-0.6.3b-20111013.tar.gz"/>
+      <artifact name="mecab-naist-jdic" type=".tar.gz" url="http://osdn.jp/projects/naist-jdic/downloads/53500/mecab-naist-jdic-0.6.3b-20111013.tar.gz"/>
     </dependency>
     <exclude org="*" ext="*" matcher="regexp" type="${ivy.exclude.types}"/>
   </dependencies>
Index: lucene/analysis/kuromoji/build.xml
===================================================================
--- lucene/analysis/kuromoji/build.xml	(revision 1695226)
+++ lucene/analysis/kuromoji/build.xml	(working copy)
@@ -35,10 +35,12 @@
   <!-- default configuration: uses mecab-ipadic -->
   <property name="ipadic.type" value="ipadic"/>
   <property name="ipadic.version" value="mecab-ipadic-2.7.0-20070801" />
+  <property name="ipadic.md5" value="e09556657cc70e45564c6514a6b08495" />
 
   <!-- alternative configuration: uses mecab-naist-jdic
   <property name="ipadic.type" value="naist"/>
   <property name="ipadic.version" value="mecab-naist-jdic-0.6.3b-20111013" />
+  <property name="ipadic.md5" value="52238fb14d949e49a65a9dbc1f7e382c" />
   -->
   
   <property name="dict.src.file" value="${ipadic.version}.tar.gz" />
@@ -59,7 +61,11 @@
   <target name="compile-core" depends="jar-analyzers-common, common.compile-core" />
   <target name="download-dict" depends="ivy-availability-check,ivy-fail,ivy-configure" unless="dict.available">
      <ivy:retrieve pattern="${build.dir}/${dict.src.file}" conf="${ipadic.type}" symlink="${ivy.symlink}"/>
-     <!-- TODO: we should checksum too -->
+     <checksum file="${build.dir}/${dict.src.file}" algorithm="MD5" verifyproperty="verify" property="${ipadic.md5}" />
+     <condition property="break" value="true">
+        <equals arg1="false" arg2="${verify}" />
+     </condition>
+     <fail message="checksum incorrect" if="break" />
      <gunzip src="${build.dir}/${dict.src.file}"/>
      <untar src="${build.dir}/${ipadic.version}.tar" dest="${build.dir}"/>
   </target>
