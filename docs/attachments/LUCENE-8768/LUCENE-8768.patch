 lucene/common-build.xml | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

diff --git a/lucene/common-build.xml b/lucene/common-build.xml
index c61eee2..76d1a01 100644
--- a/lucene/common-build.xml
+++ b/lucene/common-build.xml
@@ -179,6 +179,8 @@
   <property name="javadoc.charset" value="utf-8"/>
   <property name="javadoc.dir" location="${common.dir}/build/docs"/>
   <property name="javadoc.maxmemory" value="512m" />
+  
+  <!-- We must have the index disabled for releases, as Java 11 includes a javascript search engine with GPL license: -->
   <property name="javadoc.noindex" value="true"/>
 
   <!---TODO: Fix accessibility (order of H1/H2/H3 headings), see https://issues.apache.org/jira/browse/LUCENE-8729 -->
@@ -2127,7 +2129,7 @@ ${ant.project.name}.test.dependencies=${test.classpath.list}
         <sources />
                 
         <classpath refid="javadoc.classpath"/>
-        <arg line="--release ${javac.release}"/>
+        <arg line="--no-module-directories --release ${javac.release}"/>
         <arg line="${javadoc.doclint.args}"/>
       </javadoc>
       <record name="@{destdir}/log_javadoc.txt" action="stop"/>
@@ -2143,16 +2145,9 @@ ${ant.project.name}.test.dependencies=${test.classpath.list}
 
       <delete>
         <fileset file="@{destdir}/log_javadoc.txt">
-          <or>
-            <not>
-              <containsregexp expression="\[javadoc\]\s*[1-9][0-9]*\s*warning"/>
-            </not>
-            <and>
-              <!-- allow 1 warning, if there is also a bootstrap warning generated by Java7 -->
-              <containsregexp expression="\[javadoc\]\s*warning.*bootstrap"/>
-              <containsregexp expression="\[javadoc\]\s*1\s*warning"/>
-            </and>
-          </or>
+          <not>
+            <containsregexp expression="\[javadoc\]\s*[1-9][0-9]*\s*warning"/>
+          </not>
         </fileset>
       </delete>
 
