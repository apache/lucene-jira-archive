Index: dev-tools/idea/.idea/libraries/JUnit.xml
===================================================================
--- dev-tools/idea/.idea/libraries/JUnit.xml	(revision 1711077)
+++ dev-tools/idea/.idea/libraries/JUnit.xml	(working copy)
@@ -2,7 +2,7 @@
   <library name="JUnit">
     <CLASSES>
       <root url="jar://$PROJECT_DIR$/lucene/test-framework/lib/junit-4.10.jar!/" />
-      <root url="jar://$PROJECT_DIR$/lucene/test-framework/lib/randomizedtesting-runner-2.1.17.jar!/" />
+      <root url="jar://$PROJECT_DIR$/lucene/test-framework/lib/randomizedtesting-runner-2.2.0.jar!/" />
     </CLASSES>
     <JAVADOC />
     <SOURCES />
Index: lucene/CHANGES.txt
===================================================================
--- lucene/CHANGES.txt	(revision 1711077)
+++ lucene/CHANGES.txt	(working copy)
@@ -230,6 +230,10 @@
 
 Other
 
+* LUCENE-6478: Test execution can hang with java.security.debug. (Dawid Weiss)
+
+* LUCENE-6862: Upgrade of RandomizedRunner to version 2.2.0. (Dawid Weiss)
+
 * LUCENE-6857: Validate StandardQueryParser with NOT operator 
   with-in parantheses. (Jigar Shah via Dawid Weiss)
 
Index: lucene/ivy-versions.properties
===================================================================
--- lucene/ivy-versions.properties	(revision 1711077)
+++ lucene/ivy-versions.properties	(working copy)
@@ -7,7 +7,7 @@
 /cglib/cglib-nodep = 2.2
 /com.adobe.xmp/xmpcore = 5.1.2
 
-com.carrotsearch.randomizedtesting.version = 2.1.17
+com.carrotsearch.randomizedtesting.version = 2.2.0
 /com.carrotsearch.randomizedtesting/junit4-ant = ${com.carrotsearch.randomizedtesting.version}
 /com.carrotsearch.randomizedtesting/randomizedtesting-runner = ${com.carrotsearch.randomizedtesting.version}
 
Index: lucene/licenses/junit4-ant-2.1.17.jar.sha1
===================================================================
--- lucene/licenses/junit4-ant-2.1.17.jar.sha1	(revision 1711077)
+++ lucene/licenses/junit4-ant-2.1.17.jar.sha1	(working copy)
@@ -1 +0,0 @@
-afcdd0466514053750c1bcd1eeb0b152c48bc53e
Index: lucene/licenses/junit4-ant-2.2.0.jar.sha1
===================================================================
--- lucene/licenses/junit4-ant-2.2.0.jar.sha1	(revision 0)
+++ lucene/licenses/junit4-ant-2.2.0.jar.sha1	(working copy)
@@ -0,0 +1 @@
+0d401c9c729deccd5db8a5df3102eb18793c2224

Property changes on: lucene/licenses/junit4-ant-2.2.0.jar.sha1
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
Index: lucene/licenses/randomizedtesting-runner-2.1.17.jar.sha1
===================================================================
--- lucene/licenses/randomizedtesting-runner-2.1.17.jar.sha1	(revision 1711077)
+++ lucene/licenses/randomizedtesting-runner-2.1.17.jar.sha1	(working copy)
@@ -1 +0,0 @@
-d1eae63c4b7f6dd1959ae314c53da06b3ae7dc79
Index: lucene/licenses/randomizedtesting-runner-2.2.0.jar.sha1
===================================================================
--- lucene/licenses/randomizedtesting-runner-2.2.0.jar.sha1	(revision 0)
+++ lucene/licenses/randomizedtesting-runner-2.2.0.jar.sha1	(working copy)
@@ -0,0 +1 @@
+60de504132241be049564a3a34fd7dcc296e2ef0

Property changes on: lucene/licenses/randomizedtesting-runner-2.2.0.jar.sha1
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
Index: lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/Geo3dShapeRectRelationTestCase.java
===================================================================
--- lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/Geo3dShapeRectRelationTestCase.java	(revision 1711077)
+++ lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/Geo3dShapeRectRelationTestCase.java	(working copy)
@@ -48,10 +48,6 @@
   @Rule
   public final TestLog testLog = TestLog.instance;
 
-  protected static Random random() {
-    return RandomizedContext.current().getRandom();
-  }
-
   protected final PlanetModel planetModel;
 
   public Geo3dShapeRectRelationTestCase(PlanetModel planetModel) {
Index: lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/RandomizedShapeTestCase.java
===================================================================
--- lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/RandomizedShapeTestCase.java	(revision 1711077)
+++ lucene/spatial/src/test/org/apache/lucene/spatial/spatial4j/RandomizedShapeTestCase.java	(working copy)
@@ -18,7 +18,6 @@
  */
 
 
-import com.carrotsearch.randomizedtesting.RandomizedTest;
 import com.spatial4j.core.context.SpatialContext;
 import com.spatial4j.core.distance.DistanceUtils;
 import com.spatial4j.core.shape.Circle;
@@ -31,11 +30,15 @@
 import static com.spatial4j.core.shape.SpatialRelation.CONTAINS;
 import static com.spatial4j.core.shape.SpatialRelation.WITHIN;
 
+import org.apache.lucene.util.LuceneTestCase;
+
+import static com.carrotsearch.randomizedtesting.RandomizedTest.*;
+
 /**
  * A base test class with utility methods to help test shapes.
  * Extends from RandomizedTest.
  */
-public abstract class RandomizedShapeTestCase extends RandomizedTest {
+public abstract class RandomizedShapeTestCase extends LuceneTestCase {
 
   protected static final double EPS = 10e-9;
 
Index: lucene/test-framework/src/test/org/apache/lucene/util/WithNestedTests.java
===================================================================
--- lucene/test-framework/src/test/org/apache/lucene/util/WithNestedTests.java	(revision 1711077)
+++ lucene/test-framework/src/test/org/apache/lucene/util/WithNestedTests.java	(working copy)
@@ -177,7 +177,7 @@
         b.append("\n");
         b.append(f.getTrace());
       }
-      RandomizedTest.assertFalse("Expected failures: " + expected + " but was " + 
+      Assert.assertFalse("Expected failures: " + expected + " but was " + 
           result.getFailureCount() + ", failures below: " + b.toString(), true);
     }
   }
Index: solr/licenses/junit4-ant-2.1.17.jar.sha1
===================================================================
--- solr/licenses/junit4-ant-2.1.17.jar.sha1	(revision 1711077)
+++ solr/licenses/junit4-ant-2.1.17.jar.sha1	(working copy)
@@ -1 +0,0 @@
-afcdd0466514053750c1bcd1eeb0b152c48bc53e
Index: solr/licenses/junit4-ant-2.2.0.jar.sha1
===================================================================
--- solr/licenses/junit4-ant-2.2.0.jar.sha1	(revision 0)
+++ solr/licenses/junit4-ant-2.2.0.jar.sha1	(working copy)
@@ -0,0 +1 @@
+0d401c9c729deccd5db8a5df3102eb18793c2224

Property changes on: solr/licenses/junit4-ant-2.2.0.jar.sha1
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
Index: solr/licenses/randomizedtesting-runner-2.1.17.jar.sha1
===================================================================
--- solr/licenses/randomizedtesting-runner-2.1.17.jar.sha1	(revision 1711077)
+++ solr/licenses/randomizedtesting-runner-2.1.17.jar.sha1	(working copy)
@@ -1 +0,0 @@
-d1eae63c4b7f6dd1959ae314c53da06b3ae7dc79
Index: solr/licenses/randomizedtesting-runner-2.2.0.jar.sha1
===================================================================
--- solr/licenses/randomizedtesting-runner-2.2.0.jar.sha1	(revision 0)
+++ solr/licenses/randomizedtesting-runner-2.2.0.jar.sha1	(working copy)
@@ -0,0 +1 @@
+60de504132241be049564a3a34fd7dcc296e2ef0

Property changes on: solr/licenses/randomizedtesting-runner-2.2.0.jar.sha1
___________________________________________________________________
Added: svn:eol-style
## -0,0 +1 ##
+native
\ No newline at end of property
