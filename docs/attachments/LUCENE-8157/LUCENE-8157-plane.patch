Index: src/test/org/apache/lucene/spatial3d/geom/RandomPlaneTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/test/org/apache/lucene/spatial3d/geom/RandomPlaneTest.java	(date 1517520254000)
+++ src/test/org/apache/lucene/spatial3d/geom/RandomPlaneTest.java	(revision )
@@ -71,4 +71,24 @@
     }
   }
 
+  public void testLUCENE8157() {
+    GeoPoint A = new GeoPoint(PlanetModel.SPHERE, 0.281855362988772, -0.7816673189809037);
+    GeoPoint B = new GeoPoint(PlanetModel.SPHERE, 0.28185536309057774, -0.7816673188511931);
+    GeoPoint C = new GeoPoint(PlanetModel.SPHERE, 0.28186535556824205, -0.7816546103463846);
+
+    //check coplanarity
+    Plane AC = new Plane(A, C);
+    assertFalse(AC.evaluateIsZero(B));
+    SidedPlane AB = new SidedPlane(new GeoPoint(1, 0,0), A, B);
+    assertFalse(AB.evaluateIsZero(C));
+    boolean isConvex = false;
+    if (AB.isWithin(C)) {
+      isConvex = true;
+    }
+    SidedPlane BC = new SidedPlane(A, isConvex, B, C);
+    //fails here!!
+    assertFalse(BC.evaluateIsZero(A));
+    assertTrue(BC.isWithin(A) == isConvex);
+  }
+
 }
