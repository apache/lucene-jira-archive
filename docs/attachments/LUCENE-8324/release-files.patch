diff --git a/lucene/core/src/test/org/apache/lucene/index/TestSoftDeletesRetentionMergePolicy.java b/lucene/core/src/test/org/apache/lucene/index/TestSoftDeletesRetentionMergePolicy.java
index be1f7ac16a..9fa3638358 100644
--- a/lucene/core/src/test/org/apache/lucene/index/TestSoftDeletesRetentionMergePolicy.java
+++ b/lucene/core/src/test/org/apache/lucene/index/TestSoftDeletesRetentionMergePolicy.java
@@ -408,7 +408,7 @@ public class TestSoftDeletesRetentionMergePolicy extends LuceneTestCase {
     IndexWriter writer = new IndexWriter(dir, config);
     for (int i = 0; i < 2; i++) {
       Document d = new Document();
-      d.add(new StringField("id", Integer.toString(i), Field.Store.YES));
+      d.add(new StringField("id", "doc-" + i, Field.Store.YES));
       writer.addDocument(d);
     }
     writer.flush();
@@ -436,11 +436,13 @@ public class TestSoftDeletesRetentionMergePolicy extends LuceneTestCase {
       writer.addDocument(d);
       writer.deleteDocuments(new Term("id", "1"));
     }
+    writer.flush();
     writer.commit();
     IndexReader reader = writer.getReader();
-    assertEquals(reader.numDocs(), 1);
+    assertEquals(reader.numDocs(), 2);
     reader.close();
     assertEquals(1, writer.segmentInfos.asList().size());
+    assertEquals(writer.segmentInfos.files(true).size(), dir.listAll().length);
 
     writer.close();
     dir.close();
