Index: build.xml
===================================================================
--- build.xml	(revision 1692281)
+++ build.xml	(working copy)
@@ -362,8 +362,8 @@
   </target>
 
   <target name="clean-jars" description="Remove all JAR files from lib folders in the checkout">
-    <delete failonerror="true">
-      <fileset dir=".">
+    <delete failonerror="true" removenotfollowedsymlinks="true">
+      <fileset dir="." followsymlinks="false">
         <include name="**/*.jar"/>
         <exclude name="*/build/**"/>
         <exclude name="*/dist/**"/>
@@ -371,7 +371,23 @@
         <exclude name="*/example/exampledocs/**"/>
       </fileset>
     </delete>
+    <condition property="ivy.symlink"> <!-- redefine it here, since lucene/common-build.xml isn't included -->
+      <os family="unix"/>
+    </condition>
+    <!-- <delete> doesn't remove dangling symlinks, even with removenotfollowedsymlinks="true" -->
+    <antcall target="-clean-dangling-jar-symlinks"/>
   </target>
+  <target name="-clean-dangling-jar-symlinks" if="${ivy.symlink}">
+    <apply executable="rm" failonerror="true">
+      <fileset dir="." followsymlinks="false">
+        <include name="**/*.jar"/>
+        <exclude name="*/build/**"/>
+        <exclude name="*/dist/**"/>
+        <exclude name="*/package/**"/>
+        <exclude name="*/example/exampledocs/**"/>
+      </fileset>
+    </apply>
+  </target>
 
   <target name="ivy-bootstrap" description="Download and install Ivy in the users ant lib dir">
     <subant buildpath="lucene" target="ivy-bootstrap" inheritall="false" failonerror="true"/>
