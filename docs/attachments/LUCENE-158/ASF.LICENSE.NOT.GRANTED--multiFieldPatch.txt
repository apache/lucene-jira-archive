cvs server: Diffing .
cvs server: Diffing docs
cvs server: Diffing docs/images
cvs server: Diffing docs/lucene-sandbox
cvs server: Diffing docs/lucene-sandbox/indyo
cvs server: Diffing docs/lucene-sandbox/larm
cvs server: Diffing lib
cvs server: Diffing metadata
cvs server: Diffing src
cvs server: Diffing src/demo
cvs server: Diffing src/demo/org
cvs server: Diffing src/demo/org/apache
cvs server: Diffing src/demo/org/apache/lucene
cvs server: Diffing src/demo/org/apache/lucene/HTMLParser
cvs server: Diffing src/demo/org/apache/lucene/demo
cvs server: Diffing src/demo/org/apache/lucene/demo/html
cvs server: Diffing src/java
cvs server: Diffing src/java/org
cvs server: Diffing src/java/org/apache
cvs server: Diffing src/java/org/apache/lucene
cvs server: Diffing src/java/org/apache/lucene/analysis
cvs server: Diffing src/java/org/apache/lucene/analysis/de
cvs server: Diffing src/java/org/apache/lucene/analysis/ru
cvs server: Diffing src/java/org/apache/lucene/analysis/standard
cvs server: Diffing src/java/org/apache/lucene/document
cvs server: Diffing src/java/org/apache/lucene/index
cvs server: Diffing src/java/org/apache/lucene/queryParser
Index: src/java/org/apache/lucene/queryParser/MultiFieldQueryParser.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene/src/java/org/apache/lucene/queryParser/MultiFieldQueryParser.java,v
retrieving revision 1.4
diff -u -r1.4 MultiFieldQueryParser.java
--- src/java/org/apache/lucene/queryParser/MultiFieldQueryParser.java	29 Mar 2004 22:48:03 -0000	1.4
+++ src/java/org/apache/lucene/queryParser/MultiFieldQueryParser.java	6 Aug 2004 16:13:17 -0000
@@ -17,10 +17,6 @@
  */
 
 import org.apache.lucene.analysis.Analyzer;
-import org.apache.lucene.queryParser.CharStream;
-import org.apache.lucene.queryParser.ParseException;
-import org.apache.lucene.queryParser.QueryParser;
-import org.apache.lucene.queryParser.QueryParserTokenManager;
 import org.apache.lucene.search.BooleanQuery;
 import org.apache.lucene.search.Query;
 
@@ -71,10 +67,16 @@
     public static Query parse(String query, String[] fields, Analyzer analyzer)
 	throws ParseException
     {
+        return parse(query, fields, analyzer, DEFAULT_OPERATOR_OR);
+    }
+    
+    public static Query parse(String query, String[] fields, Analyzer analyzer, int operator)
+	throws ParseException
+    {
         BooleanQuery bQuery = new BooleanQuery();
         for (int i = 0; i < fields.length; i++)
         {
-            Query q = parse(query, fields[i], analyzer);
+            Query q = parse(query, fields[i], analyzer, operator);
             bQuery.add(q, false, false);
         }
         return bQuery;
@@ -111,13 +113,13 @@
      * @throws TokenMgrError if query parsing fails
      */
     public static Query parse(String query, String[] fields, int[] flags,
-	Analyzer analyzer)
+	Analyzer analyzer, int operator)
 	throws ParseException
     {
         BooleanQuery bQuery = new BooleanQuery();
         for (int i = 0; i < fields.length; i++)
         {
-            Query q = parse(query, fields[i], analyzer);
+            Query q = parse(query, fields[i], analyzer, operator);
             int flag = flags[i];
             switch (flag)
             {
@@ -133,5 +135,11 @@
             }
         }
         return bQuery;
+    }
+    
+    public static Query parse(String query, String[] fields, int[] flags,
+	Analyzer analyzer) throws ParseException
+    {
+        return parse(query, fields, flags, analyzer, DEFAULT_OPERATOR_OR);
     }
 }
Index: src/java/org/apache/lucene/queryParser/QueryParser.java
===================================================================
RCS file: /home/cvspublic/jakarta-lucene/src/java/org/apache/lucene/queryParser/QueryParser.java,v
retrieving revision 1.11
diff -u -r1.11 QueryParser.java
--- src/java/org/apache/lucene/queryParser/QueryParser.java	22 May 2004 17:34:31 -0000	1.11
+++ src/java/org/apache/lucene/queryParser/QueryParser.java	6 Aug 2004 16:13:17 -0000
@@ -86,6 +86,19 @@
     QueryParser parser = new QueryParser(field, analyzer);
     return parser.parse(query);
   }
+    
+/** Parses a query string, returning a {@link org.apache.lucene.search.Query}.
+   *  @param query  the query string to be parsed.
+   *  @param field  the default field for query terms.
+   *  @param analyzer   used to find terms in the query text.
+   *  @throws ParseException if the parsing fails
+   */
+  static public Query parse(String query, String field, Analyzer analyzer, int operator)
+       throws ParseException {
+    QueryParser parser = new QueryParser(field, analyzer);
+    parser.setOperator(operator);
+    return parser.parse(query);
+  }    
 
   /** Constructs a query parser.
    *  @param f  the default field for query terms.
cvs server: Diffing src/java/org/apache/lucene/search
cvs server: Diffing src/java/org/apache/lucene/search/spans
cvs server: Diffing src/java/org/apache/lucene/store
cvs server: Diffing src/java/org/apache/lucene/util
cvs server: Diffing src/jsp
cvs server: Diffing src/jsp/WEB-INF
cvs server: Diffing src/jsp/WEB-INF/lib
cvs server: Diffing src/test
cvs server: Diffing src/test/org
cvs server: Diffing src/test/org/apache
cvs server: Diffing src/test/org/apache/lucene
cvs server: Diffing src/test/org/apache/lucene/analysis
cvs server: Diffing src/test/org/apache/lucene/analysis/ru
cvs server: Diffing src/test/org/apache/lucene/document
cvs server: Diffing src/test/org/apache/lucene/index
cvs server: Diffing src/test/org/apache/lucene/index/store
cvs server: Diffing src/test/org/apache/lucene/queryParser
cvs server: Diffing src/test/org/apache/lucene/search
cvs server: Diffing src/test/org/apache/lucene/search/spans
cvs server: Diffing src/test/org/apache/lucene/store
cvs server: Diffing src/test/org/apache/lucene/util
cvs server: Diffing xdocs
cvs server: Diffing xdocs/images
cvs server: Diffing xdocs/lucene-sandbox
cvs server: Diffing xdocs/lucene-sandbox/indyo
cvs server: Diffing xdocs/lucene-sandbox/larm
cvs server: Diffing xdocs/stylesheets
