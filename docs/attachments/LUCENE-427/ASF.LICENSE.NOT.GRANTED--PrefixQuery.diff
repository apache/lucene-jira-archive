Index: lucene/java/trunk/src/java/org/apache/lucene/search/PrefixQuery.java
===================================================================
--- lucene/java/trunk/src/java/org/apache/lucene/search/PrefixQuery.java	(revision 233542)
+++ lucene/java/trunk/src/java/org/apache/lucene/search/PrefixQuery.java	(working copy)
@@ -17,6 +17,7 @@
  */
 
 import java.io.IOException;
+import java.util.Set;
 
 import org.apache.lucene.index.Term;
 import org.apache.lucene.index.TermEnum;
@@ -26,6 +27,7 @@
  * is built by QueryParser for input like <code>app*</code>. */
 public class PrefixQuery extends Query {
   private Term prefix;
+  BooleanQuery query;
 
   /** Constructs a query for terms starting with <code>prefix</code>. */
   public PrefixQuery(Term prefix) {
@@ -36,7 +38,7 @@
   public Term getPrefix() { return prefix; }
 
   public Query rewrite(IndexReader reader) throws IOException {
-    BooleanQuery query = new BooleanQuery(true);
+    query = new BooleanQuery(true);
     TermEnum enumerator = reader.terms(prefix);
     try {
       String prefixText = prefix.text();
@@ -60,6 +62,13 @@
     return query;
   }
 
+  // inherit javadoc
+  public void extractTerms(Set terms) {
+    if (query!=null) {
+      query.extractTerms(terms);
+    }
+  }
+  
   /** Prints a user-readable version of this query. */
   public String toString(String field) {
     StringBuffer buffer = new StringBuffer();
