Index: lucene/analysis/kuromoji/build.xml
===================================================================
--- lucene/analysis/kuromoji/build.xml	(revision 1641182)
+++ lucene/analysis/kuromoji/build.xml	(working copy)
@@ -58,7 +58,7 @@
 
   <target name="compile-core" depends="jar-analyzers-common, common.compile-core" />
   <target name="download-dict" depends="ivy-availability-check,ivy-fail,ivy-configure" unless="dict.available">
-     <ivy:retrieve pattern="${build.dir}/${dict.src.file}" conf="${ipadic.type}"/>
+     <ivy:retrieve pattern="${build.dir}/${dict.src.file}" conf="${ipadic.type}" symlink="${ivy.symlink}"/>
      <!-- TODO: we should checksum too -->
      <gunzip src="${build.dir}/${dict.src.file}"/>
      <untar src="${build.dir}/${ipadic.version}.tar" dest="${build.dir}"/>
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1641182)
+++ lucene/common-build.xml	(working copy)
@@ -398,10 +398,14 @@
     <!-- <property name="ivy.settings.uptodate" value="true"/> -->
   </target>
 
+  <condition property="ivy.symlink">
+    <os family="unix"/>
+  </condition>
+
   <target name="resolve" depends="ivy-availability-check,ivy-configure">
     <!-- todo, make this a property or something. 
          only special cases need bundles -->
-    <ivy:retrieve type="jar,bundle,test,test-jar,tests" log="download-only"
+    <ivy:retrieve type="jar,bundle,test,test-jar,tests" log="download-only" symlink="${ivy.symlink}"
                   conf="${ivy.default.configuration}" sync="${ivy.sync}"/>
   </target>
 
Index: lucene/queryparser/build.xml
===================================================================
--- lucene/queryparser/build.xml	(revision 1641182)
+++ lucene/queryparser/build.xml	(working copy)
@@ -142,7 +142,7 @@
 
   <target name="resolve-javacc" xmlns:ivy="antlib:org.apache.ivy.ant">
     <!-- setup a "fake" JavaCC distribution folder in ${build.dir} to make JavaCC ANT task happy: -->
-    <ivy:retrieve organisation="net.java.dev.javacc" module="javacc" revision="5.0"
+    <ivy:retrieve organisation="net.java.dev.javacc" module="javacc" revision="5.0" symlink="${ivy.symlink}"
       inline="true" conf="default" transitive="false" type="jar" sync="true"
       pattern="${build.dir}/javacc/bin/lib/[artifact].[ext]"/>
   </target>
Index: lucene/replicator/build.xml
===================================================================
--- lucene/replicator/build.xml	(revision 1641182)
+++ lucene/replicator/build.xml	(working copy)
@@ -32,7 +32,7 @@
 	<target name="resolve" depends="common.resolve">
 		<sequential>
 	    <!-- javax.servlet jar -->
-	    <ivy:retrieve conf="servlet" log="download-only" type="orbit"/>
+	    <ivy:retrieve conf="servlet" log="download-only" type="orbit" symlink="${ivy.symlink}"/>
 		</sequential>
 	</target>
 
Index: solr/contrib/contrib-build.xml
===================================================================
--- solr/contrib/contrib-build.xml	(revision 1641182)
+++ solr/contrib/contrib-build.xml	(working copy)
@@ -49,8 +49,8 @@
 
   <target name="resolve" depends="ivy-availability-check,ivy-fail,ivy-configure">
     <sequential>
-      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only"/>
-      <ivy:retrieve conf="test" type="jar,bundle,test" sync="${ivy.sync}" log="download-only"
+      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"/>
+      <ivy:retrieve conf="test" type="jar,bundle,test" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"
                     pattern="${test.lib.dir}/[artifact]-[revision](-[classifier]).[ext]"/>
     </sequential>
   </target>
Index: solr/contrib/morphlines-core/build.xml
===================================================================
--- solr/contrib/morphlines-core/build.xml	(revision 1641182)
+++ solr/contrib/morphlines-core/build.xml	(working copy)
@@ -93,8 +93,8 @@
 
   <target name="resolve" depends="ivy-availability-check,ivy-fail,ivy-configure">
     <sequential>
-      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only"/>
-      <ivy:retrieve conf="test,test.DfsMiniCluster" type="jar,bundle,test" sync="${ivy.sync}" log="download-only"
+      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"/>
+      <ivy:retrieve conf="test,test.DfsMiniCluster" type="jar,bundle,test" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"
                     pattern="${test.lib.dir}/[artifact]-[revision](-[classifier]).[ext]"/>
     </sequential>
   </target>
Index: solr/core/build.xml
===================================================================
--- solr/core/build.xml	(revision 1641182)
+++ solr/core/build.xml	(working copy)
@@ -62,8 +62,8 @@
 
   <target name="resolve" depends="ivy-availability-check,ivy-fail,ivy-configure">
     <sequential>
-      <ivy:retrieve conf="compile,compile.hadoop" type="jar,bundle" sync="${ivy.sync}" log="download-only"/>
-      <ivy:retrieve conf="test,test.DfsMiniCluster" type="jar,bundle,test" sync="${ivy.sync}" log="download-only"
+      <ivy:retrieve conf="compile,compile.hadoop" type="jar,bundle" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"/>
+      <ivy:retrieve conf="test,test.DfsMiniCluster" type="jar,bundle,test" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"
                     pattern="${test.lib.dir}/[artifact]-[revision](-[classifier]).[ext]"/>
     </sequential>
   </target>
@@ -92,7 +92,7 @@
   <target name="resolve-javacc" xmlns:ivy="antlib:org.apache.ivy.ant">
     <!-- setup a "fake" JavaCC distribution folder in ${build.dir} to make JavaCC ANT task happy: -->
     <ivy:retrieve organisation="net.java.dev.javacc" module="javacc" revision="5.0"
-      inline="true" transitive="false" type="jar" sync="true"
+      inline="true" transitive="false" type="jar" sync="true" symlink="${ivy.symlink}"
       pattern="${build.dir}/javacc/bin/lib/[artifact].[ext]"/>
   </target>
 
Index: solr/server/build.xml
===================================================================
--- solr/server/build.xml	(revision 1641182)
+++ solr/server/build.xml	(working copy)
@@ -51,14 +51,14 @@
   <target name="resolve" depends="ivy-availability-check,ivy-fail,ivy-configure,sync-hack">
     <sequential>
     <!-- jetty libs in lib/ -->
-    <ivy:retrieve conf="jetty" type="jar" log="download-only"/>
-    <ivy:retrieve conf="logging" type="jar,bundle" log="download-only"
+    <ivy:retrieve conf="jetty" type="jar" log="download-only" symlink="${ivy.symlink}"/>
+    <ivy:retrieve conf="logging" type="jar,bundle" log="download-only" symlink="${ivy.symlink}"
                   pattern="lib/ext/[artifact]-[revision].[ext]"/>
     <!-- start.jar -->
-    <ivy:retrieve conf="start" type="jar" log="download-only" 
+    <ivy:retrieve conf="start" type="jar" log="download-only" symlink="${ivy.symlink}" 
                   pattern="start.jar"/>
     <!-- servlet-api.jar -->
-    <ivy:retrieve conf="servlet" log="download-only" type="orbit"
+    <ivy:retrieve conf="servlet" log="download-only" type="orbit" symlink="${ivy.symlink}"
                   pattern="lib/servlet-api-3.0.jar"/>
     </sequential>
   </target>
Index: solr/solrj/build.xml
===================================================================
--- solr/solrj/build.xml	(revision 1641182)
+++ solr/solrj/build.xml	(working copy)
@@ -44,8 +44,8 @@
 
   <target name="resolve" depends="ivy-availability-check,ivy-fail,ivy-configure">
     <sequential>
-      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only"/>
-      <ivy:retrieve conf="test" type="jar,bundle,test" sync="${ivy.sync}" log="download-only"
+      <ivy:retrieve conf="compile" type="jar,bundle" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"/>
+      <ivy:retrieve conf="test" type="jar,bundle,test" sync="${ivy.sync}" log="download-only" symlink="${ivy.symlink}"
                     pattern="${test.lib.dir}/[artifact]-[revision](-[classifier]).[ext]"/>
     </sequential>
   </target>
