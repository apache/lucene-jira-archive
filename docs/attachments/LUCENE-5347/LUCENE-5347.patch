Index: dev-tools/maven/pom.xml.template
===================================================================
--- dev-tools/maven/pom.xml.template	(revision 1544348)
+++ dev-tools/maven/pom.xml.template	(working copy)
@@ -159,7 +159,7 @@
         <plugin>
           <groupId>de.thetaphi</groupId>
           <artifactId>forbiddenapis</artifactId>
-          <version>1.3</version>
+          <version>1.4</version>
           <configuration>
             <!--
               This is the default setting, we don't support too new Java versions.
Index: lucene/common-build.xml
===================================================================
--- lucene/common-build.xml	(revision 1544348)
+++ lucene/common-build.xml	(working copy)
@@ -2182,7 +2182,7 @@
   <property name="forbidden-sysout-excludes" value=""/>
   
   <target name="-install-forbidden-apis" unless="forbidden-apis.loaded" depends="ivy-availability-check,ivy-configure">
-    <ivy:cachepath organisation="de.thetaphi" module="forbiddenapis" revision="1.3"
+    <ivy:cachepath organisation="de.thetaphi" module="forbiddenapis" revision="1.4"
       inline="true" conf="default" transitive="true" pathid="forbidden-apis.classpath"/>
     <taskdef name="forbidden-apis" classname="de.thetaphi.forbiddenapis.AntTask" classpathref="forbidden-apis.classpath"/>
     <property name="forbidden-apis.loaded" value="true"/>
Index: solr/core/src/java/org/apache/solr/handler/admin/ShowFileRequestHandler.java
===================================================================
--- solr/core/src/java/org/apache/solr/handler/admin/ShowFileRequestHandler.java	(revision 1544348)
+++ solr/core/src/java/org/apache/solr/handler/admin/ShowFileRequestHandler.java	(working copy)
@@ -423,7 +423,7 @@
     File home = null;
     try {
       home = new File(FileUtils.getTempDirectory(), "SOLR_5459"); // Unlikely to name a core or collection this!
-      FileUtils.writeStringToFile(new File(home, "solr.xml"), "<solr></solr>"); // Use auto-discovery
+      FileUtils.writeStringToFile(new File(home, "solr.xml"), "<solr></solr>", "UTF-8"); // Use auto-discovery
       File coll = new File(home, "SOLR_5459");
 
       SolrCore core = req.getCore();
@@ -447,7 +447,7 @@
             new File(coll, "conf"));
       }
 
-      FileUtils.writeStringToFile(new File(coll, "core.properties"), "name=SOLR_5459");
+      FileUtils.writeStringToFile(new File(coll, "core.properties"), "name=SOLR_5459", "UTF-8");
 
       FileUtils.copyInputStreamToFile(stream.getStream(),
           new File(new File(coll, "conf"), req.getParams().get("file", null)));
Index: solr/core/src/test/org/apache/solr/AnalysisAfterCoreReloadTest.java
===================================================================
--- solr/core/src/test/org/apache/solr/AnalysisAfterCoreReloadTest.java	(revision 1544348)
+++ solr/core/src/test/org/apache/solr/AnalysisAfterCoreReloadTest.java	(working copy)
@@ -121,7 +121,7 @@
       String configDir = core.getResourceLoader().getConfigDir();
       FileUtils.moveFile(new File(configDir, "stopwords.txt"), new File(configDir, "stopwords.txt.bak"));
       File file = new File(configDir, "stopwords.txt");
-      FileUtils.writeStringToFile(file, stopwords);
+      FileUtils.writeStringToFile(file, stopwords, "UTF-8");
      
     } finally {
       core.close();
Index: solr/core/src/test/org/apache/solr/core/TestLazyCores.java
===================================================================
--- solr/core/src/test/org/apache/solr/core/TestLazyCores.java	(revision 1544348)
+++ solr/core/src/test/org/apache/solr/core/TestLazyCores.java	(working copy)
@@ -579,7 +579,7 @@
         System.getProperty("line.separator") + "transient=true" +
         System.getProperty("line.separator") + "loadOnStartup=true", Charsets.UTF_8.toString());
 
-    FileUtils.writeStringToFile(new File(subHome, "solrconfig.snippet.randomindexconfig.xml"), rand_snip);
+    FileUtils.writeStringToFile(new File(subHome, "solrconfig.snippet.randomindexconfig.xml"), rand_snip, Charsets.UTF_8.toString());
 
     FileUtils.writeStringToFile(new File(subHome, "solrconfig.xml"), config, Charsets.UTF_8.toString());
 
Index: solr/core/src/test/org/apache/solr/handler/PingRequestHandlerTest.java
===================================================================
--- solr/core/src/test/org/apache/solr/handler/PingRequestHandlerTest.java	(revision 1544348)
+++ solr/core/src/test/org/apache/solr/handler/PingRequestHandlerTest.java	(working copy)
@@ -100,7 +100,7 @@
     makeRequest(handler, req("action", "enable"));
 
     assertTrue(healthcheckFile.exists());
-    assertNotNull(FileUtils.readFileToString(healthcheckFile), "UTF-8");
+    assertNotNull(FileUtils.readFileToString(healthcheckFile, "UTF-8"));
 
     // now verify that the handler response with success
 
Index: solr/core/src/test/org/apache/solr/schema/ModifyConfFileTest.java
===================================================================
--- solr/core/src/test/org/apache/solr/schema/ModifyConfFileTest.java	(revision 1544348)
+++ solr/core/src/test/org/apache/solr/schema/ModifyConfFileTest.java	(working copy)
@@ -94,7 +94,7 @@
 
       assertTrue("Schema should have caused core reload to fail!",
           rsp.getException().getMessage().indexOf("SAXParseException") != -1);
-      String contents = FileUtils.readFileToString(new File(core.getCoreDescriptor().getInstanceDir(), "conf/schema.xml"));
+      String contents = FileUtils.readFileToString(new File(core.getCoreDescriptor().getInstanceDir(), "conf/schema.xml"), Charsets.UTF_8.toString());
       assertFalse("Schema contents should NOT have changed!", contents.contains("Testing rewrite of schema.xml file."));
 
       streams.add(new ContentStreamBase.StringStream("This should barf"));
@@ -110,7 +110,7 @@
       locReq.setContentStreams(streams);
       core.execute(handler, locReq, rsp);
       contents = FileUtils.readFileToString(new File(core.getCoreDescriptor().getInstanceDir(),
-          "conf/velocity/test.vm"));
+          "conf/velocity/test.vm"), Charsets.UTF_8.toString());
       assertEquals("Schema contents should have changed!", "Some bogus stuff for a test.", contents);
 
       streams.clear();
Index: solr/solrj/src/java/org/apache/solr/common/cloud/SolrZkClient.java
===================================================================
--- solr/solrj/src/java/org/apache/solr/common/cloud/SolrZkClient.java	(revision 1544348)
+++ solr/solrj/src/java/org/apache/solr/common/cloud/SolrZkClient.java	(working copy)
@@ -481,8 +481,8 @@
       log.info("Write to ZooKeepeer " + file.getAbsolutePath() + " to " + path);
     }
 
-    String data = FileUtils.readFileToString(file);
-    return setData(path, data.getBytes("UTF-8"), retryOnConnLoss);
+    byte[] data = FileUtils.readFileToByteArray(file);
+    return setData(path, data, retryOnConnLoss);
   }
 
   /**
