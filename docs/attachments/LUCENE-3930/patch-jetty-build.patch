Index: solr/example/build.xml
===================================================================
--- solr/example/build.xml	(revision 1306656)
+++ solr/example/build.xml	(working copy)
@@ -15,8 +15,34 @@
     See the License for the specific language governing permissions and
     limitations under the License.
  -->
-<project name="solr-example" default="default">
+<project name="solr-example" default="default" xmlns:artifact="antlib:org.apache.maven.artifact.ant">
   <description>Solr Example</description>
 
   <import file="../common-build.xml"/>
+
+  <property name="patched.jetty.version" value="6.1.26"/>
+  <property name="patched.jetty.name" value="jetty-${patched.jetty.version}"/>
+  <property name="patched.jetty.build.dir" value="jetty_build"/>
+  <property name="patched.jetty.src.dir" value="${patched.jetty.build.dir}/${patched.jetty.name}"/>
+  <property name="patched.jetty.patch" value="TODO.patch"/>
+
+  <target name="build-patched-jetty" depends="install-maven-tasks">
+    <sequential>
+      <mkdir dir="${patched.jetty.build.dir}"/>
+      <get src="http://dist.codehaus.org/jetty/${patched.jetty.name}/${patched.jetty.name}-src.zip" 
+	   dest="${patched.jetty.build.dir}/${patched.jetty.name}-src.zip"/>
+      <unzip src="${patched.jetty.build.dir}/${patched.jetty.name}-src.zip" dest="${patched.jetty.build.dir}"/>
+      <patch patchfile="${patched.jetty.patch}" dir="${patched.jetty.src.dir}"/>
+      <artifact:mvn pom="${patched.jetty.src.dir}/modules/jetty/pom.xml">
+	<arg value="package"/>
+	<arg value="-DskipTests"/>
+      </artifact:mvn>
+      <artifact:mvn pom="${patched.jetty.src.dir}/modules/util/pom.xml">
+	<arg value="package"/>
+	<arg value="-DskipTests"/>
+      </artifact:mvn>
+      <copy file="${patched.jetty.src.dir}/modules/jetty/target/jetty-${patched.jetty.version}.jar" todir="lib"/>
+      <copy file="${patched.jetty.src.dir}/modules/util/target/jetty-util-${patched.jetty.version}.jar" todir="lib"/>
+    </sequential>
+  </target>
 </project>
