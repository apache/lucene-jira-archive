Index: .gitignore
===================================================================
--- .gitignore	(revision 1624656)
+++ .gitignore	(working copy)
@@ -10,7 +10,9 @@
 /velocity.log
 /build.properties
 /.idea
-**/*.iml
+lucene/**/*.iml
+solr/**/*.iml
+parent.iml
 **/*.ipr
 **/*.iws
 /.project
Index: dev-tools/idea/.idea/modules.xml
===================================================================
--- dev-tools/idea/.idea/modules.xml	(revision 1624656)
+++ dev-tools/idea/.idea/modules.xml	(working copy)
@@ -4,60 +4,58 @@
     <modules>
       <module filepath="$PROJECT_DIR$/parent.iml" />
 
-      <module filepath="$PROJECT_DIR$/lucene/core/src/java/lucene-core.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/core/src/resources/lucene-core-resources.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/core/src/test/lucene-core-tests.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/core/src/lucene-core.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/core/src/test/lucene-core-tests.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/backward-codecs/backward-codecs.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/codecs/src/codecs.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/codecs/src/test/codecs-tests.iml" />
+      <module group="Lucene/Core" filepath="$PROJECT_DIR$/lucene/test-framework/lucene-test-framework.iml" />
 
-      <module filepath="$PROJECT_DIR$/lucene/analysis/common/analysis-common.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/icu/icu.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/kuromoji/kuromoji.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/morfologik/morfologik.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/phonetic/phonetic.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/smartcn/smartcn.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/stempel/stempel.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/analysis/uima/analysis-uima.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/benchmark/src/benchmark.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/benchmark/conf/benchmark-conf.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/classification/classification.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/codecs/src/java/codecs.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/codecs/src/test/codecs-tests.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/codecs/src/resources/codecs-resources.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/demo/demo.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/expressions/expressions.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/facet/facet.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/grouping/grouping.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/highlighter/highlighter.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/join/join.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/memory/memory.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/misc/misc.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/queries/queries.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/queryparser/queryparser.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/replicator/replicator.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/sandbox/sandbox.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/spatial/spatial.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/suggest/suggest.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/test-framework/lucene-test-framework.iml" />
-      <module filepath="$PROJECT_DIR$/lucene/tools/tools.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/common/analysis-common.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/icu/icu.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/kuromoji/kuromoji.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/morfologik/morfologik.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/phonetic/phonetic.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/smartcn/smartcn.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/stempel/stempel.iml" />
+      <module group="Lucene/Analysis" filepath="$PROJECT_DIR$/lucene/analysis/uima/analysis-uima.iml" />
 
-      <module filepath="$PROJECT_DIR$/solr/core/src/java/solr-core.iml" />
-      <module filepath="$PROJECT_DIR$/solr/core/src/test/solr-core-tests.iml" />
-      <module filepath="$PROJECT_DIR$/solr/core/src/test-files/solr-core-test-files.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/benchmark/src/benchmark.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/benchmark/conf/benchmark-conf.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/classification/classification.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/demo/demo.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/expressions/expressions.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/facet/facet.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/grouping/grouping.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/highlighter/highlighter.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/join/join.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/memory/memory.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/misc/misc.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/queries/queries.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/queryparser/queryparser.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/replicator/replicator.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/sandbox/sandbox.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/spatial/spatial.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/suggest/suggest.iml" />
+      <module group="Lucene/Other" filepath="$PROJECT_DIR$/lucene/tools/tools.iml" />
 
-      <module filepath="$PROJECT_DIR$/solr/contrib/analysis-extras/analysis-extras.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/clustering/clustering.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler/dataimporthandler.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/extraction/extraction.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/langid/langid.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/morphlines-cell/morphlines-cell.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/morphlines-core/morphlines-core.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/map-reduce/map-reduce.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/uima/uima.iml" />
-      <module filepath="$PROJECT_DIR$/solr/contrib/velocity/velocity.iml" />
-      <module filepath="$PROJECT_DIR$/solr/solrj/src/java/solrj.iml" />
-      <module filepath="$PROJECT_DIR$/solr/solrj/src/test/solrj-tests.iml" />
-      <module filepath="$PROJECT_DIR$/solr/solrj/src/test-files/solrj-test-files.iml" />
-      <module filepath="$PROJECT_DIR$/solr/test-framework/solr-test-framework.iml" />
+      <module group="Solr" filepath="$PROJECT_DIR$/solr/core/src/java/solr-core.iml" />
+      <module group="Solr" filepath="$PROJECT_DIR$/solr/core/src/solr-core-tests.iml" />
+      <module group="Solr" filepath="$PROJECT_DIR$/solr/solrj/src/java/solrj.iml" />
+      <module group="Solr" filepath="$PROJECT_DIR$/solr/solrj/src/solrj-tests.iml" />
+      <module group="Solr" filepath="$PROJECT_DIR$/solr/test-framework/solr-test-framework.iml" />
+
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/analysis-extras/analysis-extras.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/clustering/clustering.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/dataimporthandler/dataimporthandler.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/extraction/extraction.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/langid/langid.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/map-reduce/map-reduce.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/morphlines-cell/morphlines-cell.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/morphlines-core/morphlines-core.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/uima/uima.iml" />
+      <module group="Solr/Contrib" filepath="$PROJECT_DIR$/solr/contrib/velocity/velocity.iml" />
     </modules>
   </component>
 </project>
Index: dev-tools/idea/.idea/workspace.xml
===================================================================
--- dev-tools/idea/.idea/workspace.xml	(revision 1624656)
+++ dev-tools/idea/.idea/workspace.xml	(working copy)
@@ -6,271 +6,317 @@
     </configuration>
     <configuration default="false" name="Lucene core" type="JUnit" factoryName="JUnit">
       <module name="lucene-core-tests" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/core" />
       <option name="VM_PARAMETERS" value="-Xmx256m -ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-common" type="JUnit" factoryName="JUnit">
       <module name="analysis-common" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/common" />
       <option name="VM_PARAMETERS" value="-Xmx256m -ea  -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-icu" type="JUnit" factoryName="JUnit">
       <module name="icu" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/icu" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-kuromoji" type="JUnit" factoryName="JUnit">
       <module name="kuromoji" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/kuromoji" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-morfologik" type="JUnit" factoryName="JUnit">
       <module name="morfologik" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/morfologik" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-phonetic" type="JUnit" factoryName="JUnit">
       <module name="phonetic" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/phonetic" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-smartcn" type="JUnit" factoryName="JUnit">
       <module name="smartcn" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/smartcn" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-stempel" type="JUnit" factoryName="JUnit">
       <module name="stempel" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/stempel" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module analyzers-uima" type="JUnit" factoryName="JUnit">
       <module name="analysis-uima" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/analysis/uima" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
+    <configuration default="false" name="Module backward-codecs" type="JUnit" factoryName="JUnit">
+      <module name="backward-codecs" />
+      <option name="TEST_OBJECT" value="pattern" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/backward-codecs" />
+      <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
+      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
+    </configuration>
     <configuration default="false" name="Module benchmark" type="JUnit" factoryName="JUnit">
       <module name="benchmark" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/benchmark" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module classification" type="JUnit" factoryName="JUnit">
       <module name="classification" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/classification" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module codecs" type="JUnit" factoryName="JUnit">
       <module name="codecs-tests" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/codecs" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module expressions" type="JUnit" factoryName="JUnit">
       <module name="expressions" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/expressions" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module facet" type="JUnit" factoryName="JUnit">
       <module name="facet" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/facet" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module grouping" type="JUnit" factoryName="JUnit">
       <module name="grouping" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/grouping" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module highlighter" type="JUnit" factoryName="JUnit">
       <module name="highlighter" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/highlighter" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module join" type="JUnit" factoryName="JUnit">
       <module name="join" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/join" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module memory" type="JUnit" factoryName="JUnit">
       <module name="memory" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/memory" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module misc" type="JUnit" factoryName="JUnit">
       <module name="misc" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/misc" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module queries" type="JUnit" factoryName="JUnit">
       <module name="queries" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/queries" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module queryparser" type="JUnit" factoryName="JUnit">
       <module name="queryparser" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/queries" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module replicator" type="JUnit" factoryName="JUnit">
       <module name="replicator" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/replicator" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module sandbox" type="JUnit" factoryName="JUnit">
       <module name="sandbox" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/sandbox" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module spatial" type="JUnit" factoryName="JUnit">
       <module name="spatial" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/spatial" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Module suggest" type="JUnit" factoryName="JUnit">
       <module name="suggest" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/lucene/suggest" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr core" type="JUnit" factoryName="JUnit">
       <module name="solr-core-tests" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/solr-core" />
-      <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="VM_PARAMETERS" value="-Xmx512m -XX:MaxPermSize=256m -ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solrj" type="JUnit" factoryName="JUnit">
       <module name="solrj-tests" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/solr-solrj" />
       <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr analysis-extras contrib" type="JUnit" factoryName="JUnit">
       <module name="analysis-extras" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-analysis-extras" />
       <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr clustering contrib" type="JUnit" factoryName="JUnit">
       <module name="clustering" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-clustering" />
       <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr dataimporthandler contrib" type="JUnit" factoryName="JUnit">
       <module name="dataimporthandler" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-dataimporthandler" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr dataimporthandler-extras contrib" type="JUnit" factoryName="JUnit">
       <module name="dataimporthandler-extras" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-dataimporthandler-extras" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr extraction contrib" type="JUnit" factoryName="JUnit">
       <module name="extraction" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-cell" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr langid contrib" type="JUnit" factoryName="JUnit">
       <module name="langid" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-langid" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
+    <configuration default="false" name="Solr map-reduce contrib" type="JUnit" factoryName="JUnit">
+      <module name="map-reduce" />
+      <option name="TEST_OBJECT" value="pattern" />
+      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/map-reduce" />
+      <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
+      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
+    </configuration>
     <configuration default="false" name="Solr morphlines-cell contrib" type="JUnit" factoryName="JUnit">
       <module name="morphlines-cell" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/morphlines-cell" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr morphlines-core contrib" type="JUnit" factoryName="JUnit">
       <module name="morphlines-core" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/morphlines-core" />
       <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
-    <configuration default="false" name="Solr mr (map-reduce) contrib" type="JUnit" factoryName="JUnit">
-      <module name="map-reduce" />
-      <option name="TEST_OBJECT" value="package" />
-      <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/map-reduce" />
-      <option name="VM_PARAMETERS" value="-ea -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
-      <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
-    </configuration>
     <configuration default="false" name="Solr uima contrib" type="JUnit" factoryName="JUnit">
       <module name="uima" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-uima" />
       <option name="VM_PARAMETERS" value="-ea -Dtests.luceneMatchVersion=@version.base@ -DtempDir=temp -Djetty.testMode=1 -Djetty.insecurerandom=1 -Dsolr.directoryFactory=org.apache.solr.core.MockDirectoryFactory" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
     <configuration default="false" name="Solr velocity contrib" type="JUnit" factoryName="JUnit">
       <module name="velocity" />
-      <option name="TEST_OBJECT" value="package" />
+      <option name="TEST_OBJECT" value="pattern" />
       <option name="WORKING_DIRECTORY" value="file://$PROJECT_DIR$/idea-build/solr/contrib/solr-velocity" />
       <option name="VM_PARAMETERS" value="-ea" />
       <option name="TEST_SEARCH_SCOPE"><value defaultName="singleModule" /></option>
+      <patterns><pattern testClass=".*\.Test[^.]*|.*\.[^.]*Test" /></patterns>
     </configuration>
-    <list size="38">
+    <list size="39">
       <item index="0" class="java.lang.String" itemvalue="JUnit.Lucene core" />
       <item index="1" class="java.lang.String" itemvalue="JUnit.Module analyzers-common" />
       <item index="2" class="java.lang.String" itemvalue="JUnit.Module analyzers-icu" />
@@ -280,35 +326,36 @@
       <item index="6" class="java.lang.String" itemvalue="JUnit.Module analyzers-smartcn" />
       <item index="7" class="java.lang.String" itemvalue="JUnit.Module analyzers-stempel" />
       <item index="8" class="java.lang.String" itemvalue="JUnit.Module analyzers-uima" />
-      <item index="9" class="java.lang.String" itemvalue="JUnit.Module benchmark" />
-      <item index="10" class="java.lang.String" itemvalue="JUnit.Module classification" />
-      <item index="11" class="java.lang.String" itemvalue="JUnit.Module codecs" />
-      <item index="12" class="java.lang.String" itemvalue="JUnit.Module expressions" />
-      <item index="13" class="java.lang.String" itemvalue="JUnit.Module facet" />
-      <item index="14" class="java.lang.String" itemvalue="JUnit.Module grouping" />
-      <item index="15" class="java.lang.String" itemvalue="JUnit.Module highlighter" />
-      <item index="16" class="java.lang.String" itemvalue="JUnit.Module join" />
-      <item index="17" class="java.lang.String" itemvalue="JUnit.Module memory" />
-      <item index="18" class="java.lang.String" itemvalue="JUnit.Module misc" />
-      <item index="19" class="java.lang.String" itemvalue="JUnit.Module queries" />
-      <item index="20" class="java.lang.String" itemvalue="JUnit.Module queryparser" />
-      <item index="21" class="java.lang.String" itemvalue="JUnit.Module replicator" />
-      <item index="22" class="java.lang.String" itemvalue="JUnit.Module sandbox" />
-      <item index="23" class="java.lang.String" itemvalue="JUnit.Module spatial" />
-      <item index="24" class="java.lang.String" itemvalue="JUnit.Module suggest" />
-      <item index="25" class="java.lang.String" itemvalue="JUnit.Solr core" />
-      <item index="26" class="java.lang.String" itemvalue="JUnit.Solr analysis-extras contrib" />
-      <item index="27" class="java.lang.String" itemvalue="JUnit.Solr clustering contrib" />
-      <item index="28" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler contrib" />
-      <item index="29" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler-extras contrib" />
-      <item index="30" class="java.lang.String" itemvalue="JUnit.Solr extraction contrib" />
-      <item index="31" class="java.lang.String" itemvalue="JUnit.Solr morphlines-cell contrib" />
-      <item index="32" class="java.lang.String" itemvalue="JUnit.Solr morphlines-core contrib" />
-      <item index="33" class="java.lang.String" itemvalue="JUnit.Solr mr (map-reduce) contrib" />
-      <item index="34" class="java.lang.String" itemvalue="JUnit.Solr langid contrib" />
-      <item index="35" class="java.lang.String" itemvalue="JUnit.Solr uima contrib" />
-      <item index="36" class="java.lang.String" itemvalue="JUnit.Solr velocity contrib" />
-      <item index="37" class="java.lang.String" itemvalue="JUnit.Solrj" />
+      <item index="9" class="java.lang.String" itemvalue="JUnit.Module backward-codecs" />
+      <item index="10" class="java.lang.String" itemvalue="JUnit.Module benchmark" />
+      <item index="11" class="java.lang.String" itemvalue="JUnit.Module classification" />
+      <item index="12" class="java.lang.String" itemvalue="JUnit.Module codecs" />
+      <item index="13" class="java.lang.String" itemvalue="JUnit.Module expressions" />
+      <item index="14" class="java.lang.String" itemvalue="JUnit.Module facet" />
+      <item index="15" class="java.lang.String" itemvalue="JUnit.Module grouping" />
+      <item index="16" class="java.lang.String" itemvalue="JUnit.Module highlighter" />
+      <item index="17" class="java.lang.String" itemvalue="JUnit.Module join" />
+      <item index="18" class="java.lang.String" itemvalue="JUnit.Module memory" />
+      <item index="19" class="java.lang.String" itemvalue="JUnit.Module misc" />
+      <item index="20" class="java.lang.String" itemvalue="JUnit.Module queries" />
+      <item index="21" class="java.lang.String" itemvalue="JUnit.Module queryparser" />
+      <item index="22" class="java.lang.String" itemvalue="JUnit.Module replicator" />
+      <item index="23" class="java.lang.String" itemvalue="JUnit.Module sandbox" />
+      <item index="24" class="java.lang.String" itemvalue="JUnit.Module spatial" />
+      <item index="25" class="java.lang.String" itemvalue="JUnit.Module suggest" />
+      <item index="26" class="java.lang.String" itemvalue="JUnit.Solr core" />
+      <item index="27" class="java.lang.String" itemvalue="JUnit.Solr analysis-extras contrib" />
+      <item index="28" class="java.lang.String" itemvalue="JUnit.Solr clustering contrib" />
+      <item index="29" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler contrib" />
+      <item index="30" class="java.lang.String" itemvalue="JUnit.Solr dataimporthandler-extras contrib" />
+      <item index="31" class="java.lang.String" itemvalue="JUnit.Solr extraction contrib" />
+      <item index="32" class="java.lang.String" itemvalue="JUnit.Solr map-reduce contrib" />
+      <item index="33" class="java.lang.String" itemvalue="JUnit.Solr morphlines-cell contrib" />
+      <item index="34" class="java.lang.String" itemvalue="JUnit.Solr morphlines-core contrib" />
+      <item index="35" class="java.lang.String" itemvalue="JUnit.Solr langid contrib" />
+      <item index="36" class="java.lang.String" itemvalue="JUnit.Solr uima contrib" />
+      <item index="37" class="java.lang.String" itemvalue="JUnit.Solr velocity contrib" />
+      <item index="38" class="java.lang.String" itemvalue="JUnit.Solrj" />
     </list>
   </component>
 </project>
Index: dev-tools/idea/lucene/analysis/common/analysis-common.iml
===================================================================
--- dev-tools/idea/lucene/analysis/common/analysis-common.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/common/analysis-common.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/tools/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
Index: dev-tools/idea/lucene/analysis/icu/icu.iml
===================================================================
--- dev-tools/idea/lucene/analysis/icu/icu.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/icu/icu.iml	(working copy)
@@ -8,8 +8,8 @@
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/tools/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml
===================================================================
--- dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/kuromoji/kuromoji.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
       <sourceFolder url="file://$MODULE_DIR$/src/tools/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/tools/test" isTestSource="true" />
Index: dev-tools/idea/lucene/analysis/morfologik/morfologik.iml
===================================================================
--- dev-tools/idea/lucene/analysis/morfologik/morfologik.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/morfologik/morfologik.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/lucene/analysis/phonetic/phonetic.iml
===================================================================
--- dev-tools/idea/lucene/analysis/phonetic/phonetic.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/phonetic/phonetic.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/lucene/analysis/smartcn/smartcn.iml
===================================================================
--- dev-tools/idea/lucene/analysis/smartcn/smartcn.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/smartcn/smartcn.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/lucene/analysis/stempel/stempel.iml
===================================================================
--- dev-tools/idea/lucene/analysis/stempel/stempel.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/stempel/stempel.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/lucene/analysis/uima/analysis-uima.iml
===================================================================
--- dev-tools/idea/lucene/analysis/uima/analysis-uima.iml	(revision 1624656)
+++ dev-tools/idea/lucene/analysis/uima/analysis-uima.iml	(working copy)
@@ -6,9 +6,9 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/lucene/backward-codecs/backward-codecs.iml
===================================================================
--- dev-tools/idea/lucene/backward-codecs/backward-codecs.iml	(revision 0)
+++ dev-tools/idea/lucene/backward-codecs/backward-codecs.iml	(working copy)
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="JAVA_MODULE" version="4">
+  <component name="NewModuleRootManager" inherit-compiler-output="false">
+    <output url="file://$MODULE_DIR$/../../idea-build/lucene/backward-codecs/classes/java" />
+    <output-test url="file://$MODULE_DIR$/../../idea-build/lucene/backward-codecs/classes/test" />
+    <exclude-output />
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+    <orderEntry type="module" module-name="lucene-core" />
+    <orderEntry type="library" scope="TEST" name="JUnit" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
+  </component>
+</module>
Index: dev-tools/idea/lucene/codecs/src/codecs.iml
===================================================================
--- dev-tools/idea/lucene/codecs/src/codecs.iml	(working copy)
+++ dev-tools/idea/lucene/codecs/src/codecs.iml	(working copy)
@@ -1,15 +1,14 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/lucene/codecs/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/lucene/codecs/classes/test" />
+    <output url="file://$MODULE_DIR$/../../../idea-build/lucene/codecs/classes/java" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="module" module-name="codecs-resources" />
     <orderEntry type="module" module-name="lucene-core" />
   </component>
 </module>
Index: dev-tools/idea/lucene/codecs/src/java/codecs.iml (deleted)
===================================================================
Index: dev-tools/idea/lucene/codecs/src/resources/codecs-resources.iml (deleted)
===================================================================
Index: dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml
===================================================================
--- dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml	(revision 1624656)
+++ dev-tools/idea/lucene/codecs/src/test/codecs-tests.iml	(working copy)
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/lucene/codecs/classes/java" />
     <output-test url="file://$MODULE_DIR$/../../../../idea-build/lucene/codecs/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
Index: dev-tools/idea/lucene/core/src/java/lucene-core.iml (deleted)
===================================================================
Index: dev-tools/idea/lucene/core/src/lucene-core.iml
===================================================================
--- dev-tools/idea/lucene/core/src/lucene-core.iml	(working copy)
+++ dev-tools/idea/lucene/core/src/lucene-core.iml	(working copy)
@@ -1,15 +1,14 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/lucene/core/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/lucene/core/classes/test" />
+    <output url="file://$MODULE_DIR$/../../../idea-build/lucene/core/classes/java" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="module" module-name="lucene-core-resources" />
   </component>
 </module>
 
Index: dev-tools/idea/lucene/core/src/resources/lucene-core-resources.iml (deleted)
===================================================================
Index: dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml
===================================================================
--- dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml	(revision 1624656)
+++ dev-tools/idea/lucene/core/src/test/lucene-core-tests.iml	(working copy)
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/lucene/core/classes/java" />
     <output-test url="file://$MODULE_DIR$/../../../../idea-build/lucene/core/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
Index: dev-tools/idea/lucene/demo/demo.iml
===================================================================
--- dev-tools/idea/lucene/demo/demo.iml	(revision 1624656)
+++ dev-tools/idea/lucene/demo/demo.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/lucene/expressions/expressions.iml
===================================================================
--- dev-tools/idea/lucene/expressions/expressions.iml	(revision 1624656)
+++ dev-tools/idea/lucene/expressions/expressions.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/lucene/facet/facet.iml
===================================================================
--- dev-tools/idea/lucene/facet/facet.iml	(revision 1624656)
+++ dev-tools/idea/lucene/facet/facet.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
       <excludeFolder url="file://$MODULE_DIR$/work" />
     </content>
Index: dev-tools/idea/lucene/queryparser/queryparser.iml
===================================================================
--- dev-tools/idea/lucene/queryparser/queryparser.iml	(revision 1624656)
+++ dev-tools/idea/lucene/queryparser/queryparser.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
       <excludeFolder url="file://$MODULE_DIR$/work" />
     </content>
Index: dev-tools/idea/lucene/sandbox/sandbox.iml
===================================================================
--- dev-tools/idea/lucene/sandbox/sandbox.iml	(revision 1624656)
+++ dev-tools/idea/lucene/sandbox/sandbox.iml	(working copy)
@@ -6,6 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/lucene/spatial/spatial.iml
===================================================================
--- dev-tools/idea/lucene/spatial/spatial.iml	(revision 1624656)
+++ dev-tools/idea/lucene/spatial/spatial.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/lucene/test-framework/lucene-test-framework.iml
===================================================================
--- dev-tools/idea/lucene/test-framework/lucene-test-framework.iml	(revision 1624656)
+++ dev-tools/idea/lucene/test-framework/lucene-test-framework.iml	(working copy)
@@ -5,7 +5,7 @@
     <output-test url="file://$MODULE_DIR$/../../idea-build/lucene/test-framework/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml
===================================================================
--- dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/analysis-extras/analysis-extras.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/clustering/clustering.iml
===================================================================
--- dev-tools/idea/solr/contrib/clustering/clustering.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/clustering/clustering.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml
===================================================================
--- dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/dataimporthandler/dataimporthandler.iml	(working copy)
@@ -8,7 +8,7 @@
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/webapp" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml
===================================================================
--- dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/dataimporthandler-extras/dataimporthandler-extras.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/extraction/extraction.iml
===================================================================
--- dev-tools/idea/solr/contrib/extraction/extraction.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/extraction/extraction.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/solr/contrib/langid/langid.iml
===================================================================
--- dev-tools/idea/solr/contrib/langid/langid.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/langid/langid.iml	(working copy)
@@ -6,9 +6,9 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/map-reduce/map-reduce.iml
===================================================================
--- dev-tools/idea/solr/contrib/map-reduce/map-reduce.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/map-reduce/map-reduce.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
@@ -19,6 +19,7 @@
     <orderEntry type="library" name="Solr morphlines cell library" level="project" />
     <orderEntry type="library" scope="TEST" name="Solr morphlines core test library" level="project" />
     <orderEntry type="library" scope="TEST" name="Solr example library" level="project" />
+    <orderEntry type="library" scope="TEST" name="Solr core test library" level="project" />
     <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
     <orderEntry type="module-library" scope="TEST">
Index: dev-tools/idea/solr/contrib/morphlines-cell/morphlines-cell.iml
===================================================================
--- dev-tools/idea/solr/contrib/morphlines-cell/morphlines-cell.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/morphlines-cell/morphlines-cell.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/morphlines-core/morphlines-core.iml
===================================================================
--- dev-tools/idea/solr/contrib/morphlines-core/morphlines-core.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/morphlines-core/morphlines-core.iml	(working copy)
@@ -7,7 +7,7 @@
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/uima/uima.iml
===================================================================
--- dev-tools/idea/solr/contrib/uima/uima.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/uima/uima.iml	(working copy)
@@ -6,9 +6,9 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/resources" isTestSource="false" />
+      <sourceFolder url="file://$MODULE_DIR$/src/resources" type="java-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: dev-tools/idea/solr/contrib/velocity/velocity.iml
===================================================================
--- dev-tools/idea/solr/contrib/velocity/velocity.iml	(revision 1624656)
+++ dev-tools/idea/solr/contrib/velocity/velocity.iml	(working copy)
@@ -6,7 +6,7 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/test" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/test-files" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/src/test-files" type="java-test-resource" />
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
     </content>
     <orderEntry type="inheritedJdk" />
Index: dev-tools/idea/solr/core/src/java/solr-core.iml
===================================================================
--- dev-tools/idea/solr/core/src/java/solr-core.iml	(revision 1624656)
+++ dev-tools/idea/solr/core/src/java/solr-core.iml	(working copy)
@@ -2,7 +2,6 @@
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
     <output url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-core/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-core/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
Index: dev-tools/idea/solr/core/src/solr-core-tests.iml
===================================================================
--- dev-tools/idea/solr/core/src/solr-core-tests.iml	(working copy)
+++ dev-tools/idea/solr/core/src/solr-core-tests.iml	(working copy)
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-core/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-core/classes/test" />
+    <output-test url="file://$MODULE_DIR$/../../../idea-build/solr/solr-core/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/test" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
@@ -18,7 +18,6 @@
     <orderEntry type="library" scope="TEST" name="ICU library" level="project" />
     <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
-    <orderEntry type="module" scope="TEST" module-name="solr-core-test-files" />
     <orderEntry type="module" scope="TEST" module-name="solr-core" />
     <orderEntry type="module" scope="TEST" module-name="solrj" />
     <orderEntry type="module" scope="TEST" module-name="lucene-core" />
Index: dev-tools/idea/solr/core/src/test/solr-core-tests.iml (deleted)
===================================================================
Index: dev-tools/idea/solr/core/src/test-files/solr-core-test-files.iml (deleted)
===================================================================
Index: dev-tools/idea/solr/solrj/src/java/solrj.iml
===================================================================
--- dev-tools/idea/solr/solrj/src/java/solrj.iml	(revision 1624656)
+++ dev-tools/idea/solr/solrj/src/java/solrj.iml	(working copy)
@@ -2,7 +2,6 @@
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
     <output url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-solrj/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-solrj/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$" isTestSource="false" />
Index: dev-tools/idea/solr/solrj/src/solrj-tests.iml
===================================================================
--- dev-tools/idea/solr/solrj/src/solrj-tests.iml	(working copy)
+++ dev-tools/idea/solr/solrj/src/solrj-tests.iml	(working copy)
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <module type="JAVA_MODULE" version="4">
   <component name="NewModuleRootManager" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-solrj/classes/java" />
-    <output-test url="file://$MODULE_DIR$/../../../../idea-build/solr/solr-solrj/classes/test" />
+    <output-test url="file://$MODULE_DIR$/../../../idea-build/solr/solr-solrj/classes/test" />
     <exclude-output />
     <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/test" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/test-files" type="java-test-resource" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
@@ -15,18 +15,18 @@
     <orderEntry type="module-library" scope="TEST">
       <library>
         <CLASSES>
-          <root url="file://$MODULE_DIR$/test-lib" />
+          <root url="file://$MODULE_DIR$/../test-lib" />
         </CLASSES>
         <JAVADOC />
         <SOURCES />
-        <jarDirectory url="file://$MODULE_DIR$/test-lib" recursive="false" />
+        <jarDirectory url="file://$MODULE_DIR$/../test-lib" recursive="false" />
       </library>
     </orderEntry>
     <orderEntry type="library" scope="TEST" name="Solr example library" level="project" />
+    <orderEntry type="module" scope="TEST" module-name="lucene-core" />
     <orderEntry type="module" scope="TEST" module-name="lucene-test-framework" />
     <orderEntry type="module" scope="TEST" module-name="solr-test-framework" />
     <orderEntry type="module" scope="TEST" module-name="solrj" />
-    <orderEntry type="module" scope="TEST" module-name="solrj-test-files" />
     <orderEntry type="module" scope="TEST" module-name="solr-core" />
     <orderEntry type="module" scope="TEST" module-name="analysis-common" />
   </component>
Index: dev-tools/idea/solr/solrj/src/test/solrj-tests.iml (deleted)
===================================================================
Index: dev-tools/idea/solr/solrj/src/test-files/solrj-test-files.iml (deleted)
===================================================================
Index: dev-tools/idea/solr/test-framework/solr-test-framework.iml
===================================================================
--- dev-tools/idea/solr/test-framework/solr-test-framework.iml	(revision 1624656)
+++ dev-tools/idea/solr/test-framework/solr-test-framework.iml	(working copy)
@@ -6,7 +6,6 @@
     <exclude-output />
     <content url="file://$MODULE_DIR$">
       <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/java" isTestSource="false" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
Index: lucene/backward-codecs
===================================================================
--- lucene/backward-codecs	(revision 1624656)
+++ lucene/backward-codecs	(working copy)

Property changes on: lucene/backward-codecs
___________________________________________________________________
Added: svn:ignore
## -0,0 +1 ##
+*.iml
Index: lucene/codecs/src
===================================================================
--- lucene/codecs/src	(revision 1624656)
+++ lucene/codecs/src	(working copy)

Property changes on: lucene/codecs/src
___________________________________________________________________
Added: svn:ignore
## -0,0 +1 ##
+*.iml
Index: lucene/codecs/src/java
===================================================================
--- lucene/codecs/src/java	(revision 1624656)
+++ lucene/codecs/src/java	(working copy)

Property changes on: lucene/codecs/src/java
___________________________________________________________________
Deleted: svn:ignore
## -1 +0,0 ##
-*.iml
\ No newline at end of property
Index: lucene/core/src
===================================================================
--- lucene/core/src	(revision 1624656)
+++ lucene/core/src	(working copy)

Property changes on: lucene/core/src
___________________________________________________________________
Added: svn:ignore
## -0,0 +1 ##
+*.iml
Index: lucene/core/src/java
===================================================================
--- lucene/core/src/java	(revision 1624656)
+++ lucene/core/src/java	(working copy)

Property changes on: lucene/core/src/java
___________________________________________________________________
Deleted: svn:ignore
## -1 +0,0 ##
-*.iml
\ No newline at end of property
Index: solr/core/src
===================================================================
--- solr/core/src	(revision 1624656)
+++ solr/core/src	(working copy)

Property changes on: solr/core/src
___________________________________________________________________
Added: svn:ignore
## -0,0 +1 ##
+*.iml
Index: solr/core/src/test
===================================================================
--- solr/core/src/test	(revision 1624656)
+++ solr/core/src/test	(working copy)

Property changes on: solr/core/src/test
___________________________________________________________________
Deleted: svn:ignore
## -1 +0,0 ##
-*.iml
\ No newline at end of property
Index: solr/solrj/src
===================================================================
--- solr/solrj/src	(revision 1624656)
+++ solr/solrj/src	(working copy)

Property changes on: solr/solrj/src
___________________________________________________________________
Added: svn:ignore
## -0,0 +1 ##
+*.iml
Index: solr/solrj/src/test
===================================================================
--- solr/solrj/src/test	(revision 1624656)
+++ solr/solrj/src/test	(working copy)

Property changes on: solr/solrj/src/test
___________________________________________________________________
Deleted: svn:ignore
## -1 +0,0 ##
-*.iml
\ No newline at end of property
